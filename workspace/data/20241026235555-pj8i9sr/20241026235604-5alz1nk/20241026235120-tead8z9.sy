{"ID":"20241026235120-tead8z9","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241026235120-tead8z9","title":"mybatisplus","type":"doc","updated":"20241101234851"},"Children":[{"ID":"20241026235121-e5qbjws","Type":"NodeParagraph","Properties":{"id":"20241026235121-e5qbjws","updated":"20241026235121"},"Children":[{"Type":"NodeText","Data":"本篇学习文档对应B站视频："}]},{"ID":"20241026235122-gxytavw","Type":"NodeParagraph","Properties":{"id":"20241026235122-gxytavw","updated":"20241027000314"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://www.bilibili.com/video/BV1Xu411A7tL/?spm_id_from=333.999.0.0","TextMarkTextContent":"https://www.bilibili.com/video/BV1Xu411A7tL/?spm_id_from=333.999.0.0"}]},{"ID":"20241026235123-st2q96j","Type":"NodeParagraph","Properties":{"id":"20241026235123-st2q96j","updated":"20241026235123"},"Children":[{"Type":"NodeText","Data":"大家在日常开发中应该能发现，单表的CRUD功能代码重复度很高，也没有什么难度。而这部分代码量往往比较大，开发起来比较费时。"}]},{"ID":"20241026235124-uypsngr","Type":"NodeParagraph","Properties":{"id":"20241026235124-uypsngr","updated":"20241026235124"},"Children":[{"Type":"NodeText","Data":"因此，目前企业中都会使用一些组件来简化或省略单表的CRUD开发工作。目前在国内使用较多的一个组件就是MybatisPlus."}]},{"ID":"20241026235125-rzs8vyq","Type":"NodeParagraph","Properties":{"id":"20241026235125-rzs8vyq","updated":"20241026235125"},"Children":[{"Type":"NodeText","Data":"官方网站如下："}]},{"ID":"20241026235126-ymntu4a","Type":"NodeParagraph","Properties":{"id":"20241026235126-ymntu4a","updated":"20241026235126"},"Children":[{"Type":"NodeText","Data":"暂时无法在飞书文档外展示此内容"}]},{"ID":"20241026235127-aageeeh","Type":"NodeParagraph","Properties":{"id":"20241026235127-aageeeh","updated":"20241026235127"},"Children":[{"Type":"NodeText","Data":"当然，MybatisPlus不仅仅可以简化单表操作，而且还对Mybatis的功能有很多的增强。可以让我们的开发更加的简单，高效。"}]},{"ID":"20241026235128-eqml8vk","Type":"NodeParagraph","Properties":{"id":"20241026235128-eqml8vk","updated":"20241026235128"},"Children":[{"Type":"NodeText","Data":"通过今天的学习，我们要达成下面的目标："}]},{"ID":"20241026235129-cdgl7nn","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235129-cdgl7nn","updated":"20241026235129"},"Children":[{"ID":"20241026235130-s6aqaq4","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235130-s6aqaq4","updated":"20241026235130"},"Children":[{"ID":"20241026235131-iw6o9x3","Type":"NodeParagraph","Properties":{"id":"20241026235131-iw6o9x3","updated":"20241026235131"},"Children":[{"Type":"NodeText","Data":"能利用MybatisPlus实现基本的CRUD"}]}]},{"ID":"20241026235132-mfqmwjn","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235132-mfqmwjn","updated":"20241026235132"},"Children":[{"ID":"20241026235133-rhaisnh","Type":"NodeParagraph","Properties":{"id":"20241026235133-rhaisnh","updated":"20241026235133"},"Children":[{"Type":"NodeText","Data":"会使用条件构建造构建查询和更新语句"}]}]},{"ID":"20241026235134-thgjaai","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235134-thgjaai","updated":"20241026235134"},"Children":[{"ID":"20241026235135-cpkg2kr","Type":"NodeParagraph","Properties":{"id":"20241026235135-cpkg2kr","updated":"20241026235135"},"Children":[{"Type":"NodeText","Data":"会使用MybatisPlus中的常用注解"}]}]},{"ID":"20241026235136-yzb1896","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235136-yzb1896","updated":"20241026235136"},"Children":[{"ID":"20241026235137-k93hgp5","Type":"NodeParagraph","Properties":{"id":"20241026235137-k93hgp5","updated":"20241026235137"},"Children":[{"Type":"NodeText","Data":"会使用MybatisPlus处理枚举、JSON类型字段"}]}]},{"ID":"20241026235138-bv7h7qn","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235138-bv7h7qn","updated":"20241026235138"},"Children":[{"ID":"20241026235139-x71k5tn","Type":"NodeParagraph","Properties":{"id":"20241026235139-x71k5tn","updated":"20241026235139"},"Children":[{"Type":"NodeText","Data":"会使用MybatisPlus实现分页"}]}]}]},{"ID":"20241026235140-4fbj86j","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241026235140-4fbj86j","updated":"20241026235140"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"1.快速入门"}]},{"ID":"20241026235141-vnjcmux","Type":"NodeParagraph","Properties":{"id":"20241026235141-vnjcmux","updated":"20241026235141"},"Children":[{"Type":"NodeText","Data":"为了方便测试，我们先创建一个新的项目，并准备一些基础数据。"}]},{"ID":"20241026235142-6eomjgs","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235142-6eomjgs","updated":"20241026235142"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"1.1.环境准备"}]},{"ID":"20241026235143-bs47kih","Type":"NodeParagraph","Properties":{"id":"20241026235143-bs47kih","updated":"20241026235143"},"Children":[{"Type":"NodeText","Data":"复制课前资料提供好的一个项目到你的工作空间（不要包含空格和特殊字符）："}]},{"ID":"20241026235144-5604o67","Type":"NodeParagraph","Properties":{"id":"20241026235144-5604o67","updated":"20241026235144"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162008061-20241027000203-h5zhg9v.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235145-u5ehwmj","Type":"NodeParagraph","Properties":{"id":"20241026235145-u5ehwmj","updated":"20241026235145"},"Children":[{"Type":"NodeText","Data":"然后用你的IDEA工具打开，项目结构如下："}]},{"ID":"20241026235146-8spug8z","Type":"NodeParagraph","Properties":{"id":"20241026235146-8spug8z","updated":"20241026235146"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/16962616200761-20241027000203-rupvrad.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235147-8b7fpp6","Type":"NodeParagraph","Properties":{"id":"20241026235147-8b7fpp6","updated":"20241026235147"},"Children":[{"Type":"NodeText","Data":"注意配置一下项目的JDK版本为JDK11。首先点击项目结构设置："}]},{"ID":"20241026235148-zf35bxb","Type":"NodeParagraph","Properties":{"id":"20241026235148-zf35bxb","updated":"20241026235148"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/16962616200762-20241027000203-uns563t.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235149-8q8t0np","Type":"NodeParagraph","Properties":{"id":"20241026235149-8q8t0np","updated":"20241026235149"},"Children":[{"Type":"NodeText","Data":"在弹窗中配置JDK："}]},{"ID":"20241026235150-i0fhoi4","Type":"NodeParagraph","Properties":{"id":"20241026235150-i0fhoi4","updated":"20241026235150"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/16962616200763-20241027000203-4kpo4p4.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235151-xtitl9l","Type":"NodeParagraph","Properties":{"id":"20241026235151-xtitl9l","updated":"20241026235151"},"Children":[{"Type":"NodeText","Data":"接下来，要导入两张表，在课前资料中已经提供了SQL文件："}]},{"ID":"20241026235152-2zvgt24","Type":"NodeParagraph","Properties":{"id":"20241026235152-2zvgt24","updated":"20241026235152"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/16962616200764-20241027000203-v496008.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235153-7loeemj","Type":"NodeParagraph","Properties":{"id":"20241026235153-7loeemj","updated":"20241026235153"},"Children":[{"Type":"NodeText","Data":"对应的数据库表结构如下："}]},{"ID":"20241026235154-estf8km","Type":"NodeParagraph","Properties":{"id":"20241026235154-estf8km","updated":"20241026235154"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/16962616200775-20241027000203-sb90bzk.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235155-b2dyrqa","Type":"NodeParagraph","Properties":{"id":"20241026235155-b2dyrqa","updated":"20241026235155"},"Children":[{"Type":"NodeText","Data":"最后，在"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"application.yaml"},{"Type":"NodeText","Data":"中修改jdbc参数为你自己的数据库参数："}]},{"ID":"20241026235156-ha6ag3v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WUFNTA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235156-ha6ag3v","updated":"20241026235156"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WUFNTA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"spring:\n  datasource:\n    url: jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true\u0026characterEncoding=UTF-8\u0026autoReconnect=true\u0026serverTimezone=Asia/Shanghai\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    username: root\n    password: MySQL123\nlogging:\n  level:\n    com.itheima: debug\n  pattern:\n    dateformat: HH:mm:ss\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235157-8yamtje","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235157-8yamtje","updated":"20241026235157"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"1.2.快速开始"}]},{"ID":"20241026235158-nkh0rxv","Type":"NodeParagraph","Properties":{"id":"20241026235158-nkh0rxv","updated":"20241026235158"},"Children":[{"Type":"NodeText","Data":"比如我们要实现User表的CRUD，只需要下面几步："}]},{"ID":"20241026235159-hxujh6p","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235159-hxujh6p","updated":"20241026235159"},"Children":[{"ID":"20241026235160-tc5u7b8","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235160-tc5u7b8","updated":"20241026235160"},"Children":[{"ID":"20241026235161-xbpazy6","Type":"NodeParagraph","Properties":{"id":"20241026235161-xbpazy6","updated":"20241026235161"},"Children":[{"Type":"NodeText","Data":"引入MybatisPlus依赖"}]}]},{"ID":"20241026235162-4uinz9f","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235162-4uinz9f","updated":"20241026235162"},"Children":[{"ID":"20241026235163-o4d8x7a","Type":"NodeParagraph","Properties":{"id":"20241026235163-o4d8x7a","updated":"20241026235163"},"Children":[{"Type":"NodeText","Data":"定义Mapper"}]}]}]},{"ID":"20241026235164-w84g4az","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235164-w84g4az","updated":"20241026235164"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"1.2.1引入依赖"}]},{"ID":"20241026235165-w26kvec","Type":"NodeParagraph","Properties":{"id":"20241026235165-w26kvec","updated":"20241026235165"},"Children":[{"Type":"NodeText","Data":"MybatisPlus提供了starter，实现了自动Mybatis以及MybatisPlus的自动装配功能，坐标如下："}]},{"ID":"20241026235166-oxcipag","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WE1M","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235166-oxcipag","updated":"20241026235166"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WE1M","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cdependency\u003e\n    \u003cgroupId\u003ecom.baomidou\u003c/groupId\u003e\n    \u003cartifactId\u003emybatis-plus-boot-starter\u003c/artifactId\u003e\n    \u003cversion\u003e3.5.3.1\u003c/version\u003e\n\u003c/dependency\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235167-z97r0v9","Type":"NodeParagraph","Properties":{"id":"20241026235167-z97r0v9","updated":"20241026235167"},"Children":[{"Type":"NodeText","Data":"由于这个starter包含对mybatis的自动装配，因此完全可以替换掉Mybatis的starter。 最终，项目的依赖如下："}]},{"ID":"20241026235168-uaoy1mx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WE1M","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235168-uaoy1mx","updated":"20241026235168"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WE1M","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cdependencies\u003e\n    \u003cdependency\u003e\n        \u003cgroupId\u003ecom.baomidou\u003c/groupId\u003e\n        \u003cartifactId\u003emybatis-plus-boot-starter\u003c/artifactId\u003e\n        \u003cversion\u003e3.5.3.1\u003c/version\u003e\n    \u003c/dependency\u003e\n    \u003cdependency\u003e\n        \u003cgroupId\u003ecom.mysql\u003c/groupId\u003e\n        \u003cartifactId\u003emysql-connector-j\u003c/artifactId\u003e\n        \u003cscope\u003eruntime\u003c/scope\u003e\n    \u003c/dependency\u003e\n    \u003cdependency\u003e\n        \u003cgroupId\u003eorg.projectlombok\u003c/groupId\u003e\n        \u003cartifactId\u003elombok\u003c/artifactId\u003e\n        \u003coptional\u003etrue\u003c/optional\u003e\n    \u003c/dependency\u003e\n    \u003cdependency\u003e\n        \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e\n        \u003cartifactId\u003espring-boot-starter-test\u003c/artifactId\u003e\n        \u003cscope\u003etest\u003c/scope\u003e\n    \u003c/dependency\u003e\n\u003c/dependencies\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235169-62bolzc","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235169-62bolzc","updated":"20241026235169"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"1.2.2.定义Mapper"}]},{"ID":"20241026235170-p0s7m1n","Type":"NodeParagraph","Properties":{"id":"20241026235170-p0s7m1n","updated":"20241026235170"},"Children":[{"Type":"NodeText","Data":"为了简化单表CRUD，MybatisPlus提供了一个基础的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"BaseMapper"},{"Type":"NodeText","Data":"接口，其中已经实现了单表的CRUD："}]},{"ID":"20241026235171-oyymhxq","Type":"NodeParagraph","Properties":{"id":"20241026235171-oyymhxq","updated":"20241026235171"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/16962616200776-20241027000203-95arj4r.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235172-qi1wk83","Type":"NodeParagraph","Properties":{"id":"20241026235172-qi1wk83","updated":"20241026235172"},"Children":[{"Type":"NodeText","Data":"因此我们自定义的Mapper只要实现了这个"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"BaseMapper"},{"Type":"NodeText","Data":"，就无需自己实现单表CRUD了。 修改mp-demo中的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"com.itheima.mp.mapper"},{"Type":"NodeText","Data":"包下的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UserMapper"},{"Type":"NodeText","Data":"接口，让其继承"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"BaseMapper"},{"Type":"NodeText","Data":"："}]},{"ID":"20241026235173-mwvmf8g","Type":"NodeParagraph","Properties":{"id":"20241026235173-mwvmf8g","updated":"20241026235173"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/16962616200777-20241027000203-jsvncna.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235174-tpbwzkg","Type":"NodeParagraph","Properties":{"id":"20241026235174-tpbwzkg","updated":"20241026235174"},"Children":[{"Type":"NodeText","Data":"代码如下："}]},{"ID":"20241026235175-wmlj3k4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235175-wmlj3k4","updated":"20241026235175"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.mapper;\n\nimport com.baomidou.mybatisplus.core.mapper.BaseMapper;\nimport com.itheima.mp.domain.po.User;\n\npublic interface UserMapper extends BaseMapper\u003cUser\u003e {\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235176-7sff31p","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235176-7sff31p","updated":"20241026235176"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"1.2.3.测试"}]},{"ID":"20241026235177-503v4sr","Type":"NodeParagraph","Properties":{"id":"20241026235177-503v4sr","updated":"20241026235177"},"Children":[{"Type":"NodeText","Data":"新建一个测试类，编写几个单元测试，测试基本的CRUD功能："}]},{"ID":"20241026235178-4aabnqr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235178-4aabnqr","updated":"20241026235178"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.mapper;\n\nimport com.itheima.mp.domain.po.User;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@SpringBootTest\nclass UserMapperTest {\n\n    @Autowired\n    private UserMapper userMapper;\n\n    @Test\n    void testInsert() {\n        User user = new User();\n        user.setId(5L);\n        user.setUsername(\"Lucy\");\n        user.setPassword(\"123\");\n        user.setPhone(\"18688990011\");\n        user.setBalance(200);\n        user.setInfo(\"{\\\"age\\\": 24, \\\"intro\\\": \\\"英文老师\\\", \\\"gender\\\": \\\"female\\\"}\");\n        user.setCreateTime(LocalDateTime.now());\n        user.setUpdateTime(LocalDateTime.now());\n        userMapper.insert(user);\n    }\n\n    @Test\n    void testSelectById() {\n        User user = userMapper.selectById(5L);\n        System.out.println(\"user = \" + user);\n    }\n\n    @Test\n    void testSelectByIds() {\n        List\u003cUser\u003e users = userMapper.selectBatchIds(List.of(1L, 2L, 3L, 4L, 5L));\n        users.forEach(System.out::println);\n    }\n\n    @Test\n    void testUpdateById() {\n        User user = new User();\n        user.setId(5L);\n        user.setBalance(20000);\n        userMapper.updateById(user);\n    }\n\n    @Test\n    void testDelete() {\n        userMapper.deleteById(5L);\n    }\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235179-ycvu1qq","Type":"NodeParagraph","Properties":{"id":"20241026235179-ycvu1qq","updated":"20241026235179"},"Children":[{"Type":"NodeText","Data":"可以看到，在运行过程中打印出的SQL日志，非常标准："}]},{"ID":"20241026235180-45yavmn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"U1FM","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235180-45yavmn","updated":"20241026235180"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"U1FM","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"11:05:01  INFO 15524 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n11:05:02  INFO 15524 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n11:05:02 DEBUG 15524 --- [           main] c.i.mp.mapper.UserMapper.selectById      : ==\u003e  Preparing: SELECT id,username,password,phone,info,status,balance,create_time,update_time FROM user WHERE id=?\n11:05:02 DEBUG 15524 --- [           main] c.i.mp.mapper.UserMapper.selectById      : ==\u003e Parameters: 5(Long)\n11:05:02 DEBUG 15524 --- [           main] c.i.mp.mapper.UserMapper.selectById      : \u003c==      Total: 1\nuser = User(id=5, username=Lucy, password=123, phone=18688990011, info={\"age\": 21}, status=1, balance=20000, createTime=Fri Jun 30 11:02:30 CST 2023, updateTime=Fri Jun 30 11:02:30 CST 2023)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235181-0cccc4j","Type":"NodeParagraph","Properties":{"id":"20241026235181-0cccc4j","updated":"20241026235181"},"Children":[{"Type":"NodeText","Data":"只需要继承BaseMapper就能省去所有的单表CRUD，是不是非常简单！"}]},{"ID":"20241026235182-r5j88cc","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235182-r5j88cc","updated":"20241026235182"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"1.3.常见注解"}]},{"ID":"20241026235183-r14o3ek","Type":"NodeParagraph","Properties":{"id":"20241026235183-r14o3ek","updated":"20241026235183"},"Children":[{"Type":"NodeText","Data":"在刚刚的入门案例中，我们仅仅引入了依赖，继承了BaseMapper就能使用MybatisPlus，非常简单。但是问题来了： MybatisPlus如何知道我们要查询的是哪张表？表中有哪些字段呢？"}]},{"ID":"20241026235184-l44ahou","Type":"NodeParagraph","Properties":{"id":"20241026235184-l44ahou","updated":"20241026235184"},"Children":[{"Type":"NodeText","Data":"大家回忆一下，UserMapper在继承BaseMapper的时候指定了一个泛型："}]},{"ID":"20241026235185-qbg730z","Type":"NodeParagraph","Properties":{"id":"20241026235185-qbg730z","updated":"20241026235185"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/16962616200778-20241027000203-1i6ce7a.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235186-66uw78l","Type":"NodeParagraph","Properties":{"id":"20241026235186-66uw78l","updated":"20241026235186"},"Children":[{"Type":"NodeText","Data":"泛型中的User就是与数据库对应的PO."}]},{"ID":"20241026235187-c9fpqma","Type":"NodeParagraph","Properties":{"id":"20241026235187-c9fpqma","updated":"20241026235187"},"Children":[{"Type":"NodeText","Data":"MybatisPlus就是根据PO实体的信息来推断出表的信息，从而生成SQL的。默认情况下："}]},{"ID":"20241026235188-x6aqwcu","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235188-x6aqwcu","updated":"20241026235188"},"Children":[{"ID":"20241026235189-71qchz1","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235189-71qchz1","updated":"20241026235189"},"Children":[{"ID":"20241026235190-wj7rw5i","Type":"NodeParagraph","Properties":{"id":"20241026235190-wj7rw5i","updated":"20241026235190"},"Children":[{"Type":"NodeText","Data":"MybatisPlus会把PO实体的类名驼峰转下划线作为表名"}]}]},{"ID":"20241026235191-49albkw","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235191-49albkw","updated":"20241026235191"},"Children":[{"ID":"20241026235192-j8b3gh7","Type":"NodeParagraph","Properties":{"id":"20241026235192-j8b3gh7","updated":"20241026235192"},"Children":[{"Type":"NodeText","Data":"MybatisPlus会把PO实体的所有变量名驼峰转下划线作为表的字段名，并根据变量类型推断字段类型"}]}]},{"ID":"20241026235193-cku9wkj","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235193-cku9wkj","updated":"20241026235193"},"Children":[{"ID":"20241026235194-p2ws4mg","Type":"NodeParagraph","Properties":{"id":"20241026235194-p2ws4mg","updated":"20241026235194"},"Children":[{"Type":"NodeText","Data":"MybatisPlus会把名为id的字段作为主键"}]}]}]},{"ID":"20241026235195-imlv2em","Type":"NodeParagraph","Properties":{"id":"20241026235195-imlv2em","updated":"20241026235195"},"Children":[{"Type":"NodeText","Data":"但很多情况下，默认的实现与实际场景不符，因此MybatisPlus提供了一些注解便于我们声明表信息。"}]},{"ID":"20241026235196-qyxnkiy","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235196-qyxnkiy","updated":"20241026235196"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"1.3.1.@TableName"}]},{"ID":"20241026235197-vcag5mv","Type":"NodeParagraph","Properties":{"id":"20241026235197-vcag5mv","updated":"20241026235197"},"Children":[{"Type":"NodeText","Data":"说明："}]},{"ID":"20241026235198-mfz9gsr","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235198-mfz9gsr","updated":"20241026235198"},"Children":[{"ID":"20241026235199-c1y4gij","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235199-c1y4gij","updated":"20241026235199"},"Children":[{"ID":"20241026235200-g4takff","Type":"NodeParagraph","Properties":{"id":"20241026235200-g4takff","updated":"20241026235200"},"Children":[{"Type":"NodeText","Data":"描述：表名注解，标识实体类对应的表"}]}]},{"ID":"20241026235201-e1mh5ou","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235201-e1mh5ou","updated":"20241026235201"},"Children":[{"ID":"20241026235202-r92z9ip","Type":"NodeParagraph","Properties":{"id":"20241026235202-r92z9ip","updated":"20241026235202"},"Children":[{"Type":"NodeText","Data":"使用位置：实体类"}]}]}]},{"ID":"20241026235203-2ca2ntp","Type":"NodeParagraph","Properties":{"id":"20241026235203-2ca2ntp","updated":"20241026235203"},"Children":[{"Type":"NodeText","Data":"示例："}]},{"ID":"20241026235204-3h0z9xb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235204-3h0z9xb","updated":"20241026235204"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@TableName(\"user\")\npublic class User {\n    private Long id;\n    private String name;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235205-z3odaiz","Type":"NodeParagraph","Properties":{"id":"20241026235205-z3odaiz","updated":"20241026235205"},"Children":[{"Type":"NodeText","Data":"TableName注解除了指定表名以外，还可以指定很多其它属性："}]},{"ID":"20241026235206-udfepvt","Type":"NodeTable","Data":"| **属性**         | **类型** | **必须指定** | **默认值** | **描述**                                                     |\n| ---------------- | -------- | ------------ | ---------- | ------------------------------------------------------------ |\n| value            | String   | 否           | \"\"         | 表名                                                         |\n| schema           | String   | 否           | \"\"         | schema                                                       |\n| keepGlobalPrefix | boolean  | 否           | false      | 是否保持使用全局的 tablePrefix 的值（当全局 tablePrefix 生效时） |\n| resultMap        | String   | 否           | \"\"         | xml 中 resultMap 的 id（用于满足特定类型的实体类对象绑定）   |\n| autoResultMap    | boolean  | 否           | false      | 是否自动构建 resultMap 并使用（如果设置 resultMap 则不会进行 resultMap 的自动构建与注入） |\n| excludeProperty  | String[] | 否           | {}         | 需要排除的属性名 @since 3.3.1                                |","TableAligns":[0,0,0,0,0],"Properties":{"id":"20241026235206-udfepvt","updated":"20241026235206"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"属性"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"类型"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"必须指定"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"默认值"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"描述"}]}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"value"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"String"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"\"\""}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"表名"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"schema"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"String"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"\"\""}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"schema"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"keepGlobalPrefix"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"boolean"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"false"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"是否保持使用全局的 tablePrefix 的值（当全局 tablePrefix 生效时）"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"resultMap"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"String"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"\"\""}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"xml 中 resultMap 的 id（用于满足特定类型的实体类对象绑定）"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"autoResultMap"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"boolean"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"false"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"是否自动构建 resultMap 并使用（如果设置 resultMap 则不会进行 resultMap 的自动构建与注入）"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"excludeProperty"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"String[]"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"{}"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"需要排除的属性名 @since 3.3.1"}]}]}]},{"ID":"20241026235207-ae3o1r8","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235207-ae3o1r8","updated":"20241026235207"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"1.3.2.@TableId"}]},{"ID":"20241026235208-m30r35f","Type":"NodeParagraph","Properties":{"id":"20241026235208-m30r35f","updated":"20241026235208"},"Children":[{"Type":"NodeText","Data":"说明："}]},{"ID":"20241026235209-ekss807","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235209-ekss807","updated":"20241026235209"},"Children":[{"ID":"20241026235210-xvyz7iu","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235210-xvyz7iu","updated":"20241026235210"},"Children":[{"ID":"20241026235211-mgvi2qt","Type":"NodeParagraph","Properties":{"id":"20241026235211-mgvi2qt","updated":"20241026235211"},"Children":[{"Type":"NodeText","Data":"描述：主键注解，标识实体类中的主键字段"}]}]},{"ID":"20241026235212-4bwrwws","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235212-4bwrwws","updated":"20241026235212"},"Children":[{"ID":"20241026235213-6ocr0lx","Type":"NodeParagraph","Properties":{"id":"20241026235213-6ocr0lx","updated":"20241026235213"},"Children":[{"Type":"NodeText","Data":"使用位置：实体类的主键字段"}]}]}]},{"ID":"20241026235214-36por41","Type":"NodeParagraph","Properties":{"id":"20241026235214-36por41","updated":"20241026235214"},"Children":[{"Type":"NodeText","Data":"示例："}]},{"ID":"20241026235215-jkd0djt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235215-jkd0djt","updated":"20241026235215"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@TableName(\"user\")\npublic class User {\n    @TableId\n    private Long id;\n    private String name;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235216-ccgoxan","Type":"NodeParagraph","Properties":{"id":"20241026235216-ccgoxan","updated":"20241026235216"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"TableId"},{"Type":"NodeText","Data":"注解支持两个属性："}]},{"ID":"20241026235217-57bshzt","Type":"NodeTable","Data":"| **属性** | **类型** | **必须指定** | **默认值**  |   **描述**   |\n| :------: | :------: | :----------: | :---------: | :----------: |\n|  value   |  String  |      否      |     \"\"      |     表名     |\n|   type   |   Enum   |      否      | IdType.NONE | 指定主键类型 |","TableAligns":[2,2,2,2,2],"Properties":{"id":"20241026235217-57bshzt","updated":"20241026235217"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"属性"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"类型"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"必须指定"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"默认值"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"描述"}]}]}]},{"Type":"NodeTableRow","TableAligns":[2,2,2,2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"value"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"String"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"\"\""}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"表名"}]}]},{"Type":"NodeTableRow","TableAligns":[2,2,2,2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"type"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"Enum"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"IdType.NONE"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"指定主键类型"}]}]}]},{"ID":"20241026235218-b6uiaib","Type":"NodeParagraph","Properties":{"id":"20241026235218-b6uiaib","updated":"20241026235218"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"IdType"},{"Type":"NodeText","Data":"支持的类型有："}]},{"ID":"20241026235219-1y1kokv","Type":"NodeTable","Data":"|    **值**     |                           **描述**                           |\n| :-----------: | :----------------------------------------------------------: |\n|     AUTO      |                        数据库 ID 自增                        |\n|     NONE      | 无状态，该类型为未设置主键类型（注解里等于跟随全局，全局里约等于 INPUT） |\n|     INPUT     |                   insert 前自行 set 主键值                   |\n|   ASSIGN_ID   | 分配 ID(主键类型为 Number(Long 和 Integer)或 String)(since 3.3.0),使用接口IdentifierGenerator的方法nextId(默认实现类为DefaultIdentifierGenerator雪花算法) |\n|  ASSIGN_UUID  | 分配 UUID,主键类型为 String(since 3.3.0),使用接口IdentifierGenerator的方法nextUUID(默认 default 方法) |\n|   ID_WORKER   |      分布式全局唯一 ID 长整型类型(please use ASSIGN_ID)      |\n|     UUID      |          32 位 UUID 字符串(please use ASSIGN_UUID)           |\n| ID_WORKER_STR |      分布式全局唯一 ID 字符串类型(please use ASSIGN_ID)      |","TableAligns":[2,2],"Properties":{"id":"20241026235219-1y1kokv","updated":"20241026235219"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"值"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"描述"}]}]}]},{"Type":"NodeTableRow","TableAligns":[2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"AUTO"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"数据库 ID 自增"}]}]},{"Type":"NodeTableRow","TableAligns":[2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"NONE"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"无状态，该类型为未设置主键类型（注解里等于跟随全局，全局里约等于 INPUT）"}]}]},{"Type":"NodeTableRow","TableAligns":[2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"INPUT"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"insert 前自行 set 主键值"}]}]},{"Type":"NodeTableRow","TableAligns":[2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"ASSIGN_ID"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"分配 ID(主键类型为 Number(Long 和 Integer)或 String)(since 3.3.0),使用接口IdentifierGenerator的方法nextId(默认实现类为DefaultIdentifierGenerator雪花算法)"}]}]},{"Type":"NodeTableRow","TableAligns":[2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"ASSIGN_UUID"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"分配 UUID,主键类型为 String(since 3.3.0),使用接口IdentifierGenerator的方法nextUUID(默认 default 方法)"}]}]},{"Type":"NodeTableRow","TableAligns":[2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"ID_WORKER"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"分布式全局唯一 ID 长整型类型(please use ASSIGN_ID)"}]}]},{"Type":"NodeTableRow","TableAligns":[2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"UUID"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"32 位 UUID 字符串(please use ASSIGN_UUID)"}]}]},{"Type":"NodeTableRow","TableAligns":[2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"ID_WORKER_STR"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"分布式全局唯一 ID 字符串类型(please use ASSIGN_ID)"}]}]}]},{"ID":"20241026235220-01up036","Type":"NodeParagraph","Properties":{"id":"20241026235220-01up036","updated":"20241026235220"},"Children":[{"Type":"NodeText","Data":"这里比较常见的有三种："}]},{"ID":"20241026235221-duk9wu8","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235221-duk9wu8","updated":"20241026235221"},"Children":[{"ID":"20241026235222-17wfkj9","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235222-17wfkj9","updated":"20241026235222"},"Children":[{"ID":"20241026235223-mb3pde9","Type":"NodeParagraph","Properties":{"id":"20241026235223-mb3pde9","updated":"20241026235223"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"AUTO"},{"Type":"NodeText","Data":"：利用数据库的id自增长"}]}]},{"ID":"20241026235224-kzm3fi0","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235224-kzm3fi0","updated":"20241026235224"},"Children":[{"ID":"20241026235225-kdsckbj","Type":"NodeParagraph","Properties":{"id":"20241026235225-kdsckbj","updated":"20241026235225"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"INPUT"},{"Type":"NodeText","Data":"：手动生成id"}]}]},{"ID":"20241026235226-3kqo4wv","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235226-3kqo4wv","updated":"20241026235226"},"Children":[{"ID":"20241026235227-egonmd8","Type":"NodeParagraph","Properties":{"id":"20241026235227-egonmd8","updated":"20241026235227"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"ASSIGN_ID"},{"Type":"NodeText","Data":"：雪花算法生成"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Long"},{"Type":"NodeText","Data":"类型的全局唯一id，这是默认的ID策略"}]}]}]},{"ID":"20241026235228-xk2d5bm","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235228-xk2d5bm","updated":"20241101234851"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"1.3.3.@TableField"}]},{"ID":"20241026235229-awgeumh","Type":"NodeParagraph","Properties":{"id":"20241026235229-awgeumh","updated":"20241026235229"},"Children":[{"Type":"NodeText","Data":"说明："}]},{"ID":"20241026235230-fnl9yvs","Type":"NodeBlockquote","Properties":{"id":"20241026235230-fnl9yvs","updated":"20241026235230"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241026235231-q25geij","Type":"NodeParagraph","Properties":{"id":"20241026235231-q25geij","updated":"20241026235231"},"Children":[{"Type":"NodeText","Data":"描述：普通字段注解"}]}]},{"ID":"20241026235232-h7wllj1","Type":"NodeParagraph","Properties":{"id":"20241026235232-h7wllj1","updated":"20241026235232"},"Children":[{"Type":"NodeText","Data":"示例："}]},{"ID":"20241026235233-53369li","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235233-53369li","updated":"20241026235233"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@TableName(\"user\")\npublic class User {\n    @TableId\n    private Long id;\n    private String name;\n    private Integer age;\n    @TableField(\"isMarried\")\n    private Boolean isMarried;\n    @TableField(\"concat\")\n    private String concat;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235234-g8grfjr","Type":"NodeParagraph","Properties":{"id":"20241026235234-g8grfjr","updated":"20241026235234"},"Children":[{"Type":"NodeText","Data":"一般情况下我们并不需要给字段添加"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"@TableField"},{"Type":"NodeText","Data":"注解，一些特殊情况除外："}]},{"ID":"20241026235235-juzr1he","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235235-juzr1he","updated":"20241026235235"},"Children":[{"ID":"20241026235236-aw0tlbl","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235236-aw0tlbl","updated":"20241026235236"},"Children":[{"ID":"20241026235237-8nexrfb","Type":"NodeParagraph","Properties":{"id":"20241026235237-8nexrfb","updated":"20241026235237"},"Children":[{"Type":"NodeText","Data":"成员变量名与数据库字段名不一致"}]}]},{"ID":"20241026235238-l19k8b9","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235238-l19k8b9","updated":"20241026235238"},"Children":[{"ID":"20241026235239-irdjucr","Type":"NodeParagraph","Properties":{"id":"20241026235239-irdjucr","updated":"20241026235239"},"Children":[{"Type":"NodeText","Data":"成员变量是以"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"isXXX"},{"Type":"NodeText","Data":"命名，按照"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"JavaBean"},{"Type":"NodeText","Data":"的规范，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"MybatisPlus"},{"Type":"NodeText","Data":"识别字段时会把"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"is"},{"Type":"NodeText","Data":"去除，这就导致与数据库不符。"}]}]},{"ID":"20241026235240-slquf9d","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235240-slquf9d","updated":"20241026235240"},"Children":[{"ID":"20241026235241-bvgq1jy","Type":"NodeParagraph","Properties":{"id":"20241026235241-bvgq1jy","updated":"20241026235241"},"Children":[{"Type":"NodeText","Data":"成员变量名与数据库一致，但是与数据库的关键字冲突。使用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"@TableField"},{"Type":"NodeText","Data":"注解给字段名添加````转义"}]}]}]},{"ID":"20241026235242-mh8i4h6","Type":"NodeParagraph","Properties":{"id":"20241026235242-mh8i4h6","updated":"20241026235242"},"Children":[{"Type":"NodeText","Data":"支持的其它属性如下："}]},{"ID":"20241026235243-fi69vv0","Type":"NodeTable","TableAligns":[0,0,0,0,0],"Properties":{"colgroup":"||||","id":"20241026235243-fi69vv0","updated":"20241101234851"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"属性"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"类型"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"必填"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"默认值"}]},{"Type":"NodeTableCell","Data":"th","Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"描述"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"value"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"String"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"\"\""}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"数据库字段名"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"exist"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"boolean"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"true"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"是否为数据库表字段"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"condition"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"String"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"\"\""}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"字段 where 实体查询比较条件，有值设置则按设置的值为准，没有则为默认全局的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"%s=#{%s}"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://github.com/baomidou/mybatis-plus/blob/3.0/mybatis-plus-annotation/src/main/java/com/baomidou/mybatisplus/annotation/SqlCondition.java","TextMarkTextContent":"参考(opens new window)"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"update"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"String"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"\"\""}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"字段 update set 部分注入，例如：当在version字段上注解update=\"%s+1\" 表示更新时会 set version=version+1 （该属性优先级高于 el 属性）"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"insertStrategy"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Enum"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"FieldStrategy.DEFAULT"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"举例："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"NOT_NULL insert into table_a(\u0026lt;if test=\u0026quot;columnProperty != null\u0026quot;\u0026gt;column\u0026lt;/if\u0026gt;) values (\u0026lt;if test=\u0026quot;columnProperty != null\u0026quot;\u0026gt;{columnProperty}\u0026lt;/if\u0026gt;)"},{"Type":"NodeText","Data":"​"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"updateStrategy"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Enum"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"FieldStrategy.DEFAULT"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"举例："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"IGNORED update table_a set column=#{columnProperty}"},{"Type":"NodeText","Data":"​"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"whereStrategy"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Enum"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"FieldStrategy.DEFAULT"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"举例："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"NOT_EMPTY where \u0026lt;if test=\u0026quot;columnProperty != null and columnProperty!=''\u0026quot;\u0026gt;column=#{columnProperty}\u0026lt;/if\u0026gt;"},{"Type":"NodeText","Data":"​"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"fill"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"Enum"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"FieldFill.DEFAULT"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"字段自动填充策略"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"select"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"boolean"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"true"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"是否进行 select 查询"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"keepGlobalFormat"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"boolean"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"false"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"是否保持使用全局的 format 进行处理"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"jdbcType"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"JdbcType"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"JdbcType.UNDEFINED"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"JDBC 类型 (该默认值不代表会按照该值生效)"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"typeHandler"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"TypeHander"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td"},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"类型处理器 (该默认值不代表会按照该值生效)"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"numericScale"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"String"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"否"}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"\"\""}]},{"Type":"NodeTableCell","Data":"td","Children":[{"Type":"NodeText","Data":"指定小数点后保留的位数"}]}]}]},{"ID":"20241026235244-gw7muba","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235244-gw7muba","updated":"20241026235244"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"1.4.常见配置"}]},{"ID":"20241026235245-13whbjh","Type":"NodeParagraph","Properties":{"id":"20241026235245-13whbjh","updated":"20241026235245"},"Children":[{"Type":"NodeText","Data":"MybatisPlus也支持基于yaml文件的自定义配置，详见官方文档："}]},{"ID":"20241026235246-v4a0wba","Type":"NodeParagraph","Properties":{"id":"20241026235246-v4a0wba","updated":"20241026235246"},"Children":[{"Type":"NodeText","Data":"https://www.baomidou.com/pages/56bac0/#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"}]},{"ID":"20241026235247-xndth8w","Type":"NodeParagraph","Properties":{"id":"20241026235247-xndth8w","updated":"20241026235247"},"Children":[{"Type":"NodeText","Data":"大多数的配置都有默认值，因此我们都无需配置。但还有一些是没有默认值的，例如:"}]},{"ID":"20241026235248-u0xwlv7","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235248-u0xwlv7","updated":"20241026235248"},"Children":[{"ID":"20241026235249-5o3ysw5","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235249-5o3ysw5","updated":"20241026235249"},"Children":[{"ID":"20241026235250-peigis8","Type":"NodeParagraph","Properties":{"id":"20241026235250-peigis8","updated":"20241026235250"},"Children":[{"Type":"NodeText","Data":"实体类的别名扫描包"}]}]},{"ID":"20241026235251-yy6s1zl","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235251-yy6s1zl","updated":"20241026235251"},"Children":[{"ID":"20241026235252-jzyv2gk","Type":"NodeParagraph","Properties":{"id":"20241026235252-jzyv2gk","updated":"20241026235252"},"Children":[{"Type":"NodeText","Data":"全局id类型"}]}]}]},{"ID":"20241026235253-5f4px9g","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WUFNTA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235253-5f4px9g","updated":"20241026235253"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WUFNTA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"mybatis-plus:\n  type-aliases-package: com.itheima.mp.domain.po\n  global-config:\n    db-config:\n      id-type: auto # 全局id类型为自增长\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235254-h1k2tjt","Type":"NodeParagraph","Properties":{"id":"20241026235254-h1k2tjt","updated":"20241026235254"},"Children":[{"Type":"NodeText","Data":"需要注意的是，MyBatisPlus也支持手写SQL的，而mapper文件的读取地址可以自己配置："}]},{"ID":"20241026235255-60810nf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WUFNTA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235255-60810nf","updated":"20241026235255"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WUFNTA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"mybatis-plus:\n  mapper-locations: \"classpath*:/mapper/**/*.xml\" # Mapper.xml文件地址，当前这个是默认值。\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235256-mmmxzek","Type":"NodeParagraph","Properties":{"id":"20241026235256-mmmxzek","updated":"20241026235256"},"Children":[{"Type":"NodeText","Data":"可以看到默认值是"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"classpath*:/mapper/**/*.xml"},{"Type":"NodeText","Data":"，也就是说我们只要把mapper.xml文件放置这个目录下就一定会被加载。"}]},{"ID":"20241026235257-tjmaoxz","Type":"NodeParagraph","Properties":{"id":"20241026235257-tjmaoxz","updated":"20241026235257"},"Children":[{"Type":"NodeText","Data":"例如，我们新建一个"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UserMapper.xml"},{"Type":"NodeText","Data":"文件："}]},{"ID":"20241026235258-pq87l1j","Type":"NodeParagraph","Properties":{"id":"20241026235258-pq87l1j","updated":"20241026235258"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/16962616200779-20241027000203-sdidp9j.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235259-sn5ouft","Type":"NodeParagraph","Properties":{"id":"20241026235259-sn5ouft","updated":"20241026235259"},"Children":[{"Type":"NodeText","Data":"然后在其中定义一个方法："}]},{"ID":"20241026235260-e7q83u4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WE1M","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235260-e7q83u4","updated":"20241026235260"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WE1M","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003c!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"\u003e\n\u003cmapper namespace=\"com.itheima.mp.mapper.UserMapper\"\u003e\n\n    \u003cselect id=\"queryById\" resultType=\"User\"\u003e\n        SELECT * FROM user WHERE id = #{id}\n    \u003c/select\u003e\n\u003c/mapper\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235261-3t26762","Type":"NodeParagraph","Properties":{"id":"20241026235261-3t26762","updated":"20241026235261"},"Children":[{"Type":"NodeText","Data":"然后在测试类"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UserMapperTest"},{"Type":"NodeText","Data":"中测试该方法："}]},{"ID":"20241026235262-dlcz8cs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235262-dlcz8cs","updated":"20241026235262"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testQuery() {\n    User user = userMapper.queryById(1L);\n    System.out.println(\"user = \" + user);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235263-54favd7","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241026235263-54favd7","updated":"20241026235263"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"2.核心功能"}]},{"ID":"20241026235264-dymbi6j","Type":"NodeParagraph","Properties":{"id":"20241026235264-dymbi6j","updated":"20241026235264"},"Children":[{"Type":"NodeText","Data":"刚才的案例中都是以id为条件的简单CRUD，一些复杂条件的SQL语句就要用到一些更高级的功能了。"}]},{"ID":"20241026235265-414521d","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235265-414521d","updated":"20241026235265"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"2.1.条件构造器"}]},{"ID":"20241026235266-01w32nk","Type":"NodeParagraph","Properties":{"id":"20241026235266-01w32nk","updated":"20241026235266"},"Children":[{"Type":"NodeText","Data":"除了新增以外，修改、删除、查询的SQL语句都需要指定where条件。因此BaseMapper中提供的相关方法除了以"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"id"},{"Type":"NodeText","Data":"作为"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"where"},{"Type":"NodeText","Data":"条件以外，还支持更加复杂的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"where"},{"Type":"NodeText","Data":"条件。"}]},{"ID":"20241026235267-lk35j2p","Type":"NodeParagraph","Properties":{"id":"20241026235267-lk35j2p","updated":"20241026235267"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007710-20241027000203-suz27al.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235268-cezokjs","Type":"NodeParagraph","Properties":{"id":"20241026235268-cezokjs","updated":"20241026235268"},"Children":[{"Type":"NodeText","Data":"参数中的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Wrapper"},{"Type":"NodeText","Data":"就是条件构造的抽象类，其下有很多默认实现，继承关系如图："}]},{"ID":"20241026235269-pmkshcj","Type":"NodeParagraph","Properties":{"id":"20241026235269-pmkshcj","updated":"20241026235269"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007711-20241027000203-l7ekjbn.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235270-kxyk4ud","Type":"NodeParagraph","Properties":{"id":"20241026235270-kxyk4ud","updated":"20241026235270"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Wrapper"},{"Type":"NodeText","Data":"的子类"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"AbstractWrapper"},{"Type":"NodeText","Data":"提供了where中包含的所有条件构造方法："}]},{"ID":"20241026235271-bn4g50j","Type":"NodeParagraph","Properties":{"id":"20241026235271-bn4g50j","updated":"20241026235271"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007712-20241027000203-o2pyzg1.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235272-r1dcfxe","Type":"NodeParagraph","Properties":{"id":"20241026235272-r1dcfxe","updated":"20241026235272"},"Children":[{"Type":"NodeText","Data":"而QueryWrapper在AbstractWrapper的基础上拓展了一个select方法，允许指定查询字段："}]},{"ID":"20241026235273-1be5q2r","Type":"NodeParagraph","Properties":{"id":"20241026235273-1be5q2r","updated":"20241026235273"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007713-20241027000203-odf0nwk.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235274-49f31kb","Type":"NodeParagraph","Properties":{"id":"20241026235274-49f31kb","updated":"20241026235274"},"Children":[{"Type":"NodeText","Data":"而UpdateWrapper在AbstractWrapper的基础上拓展了一个set方法，允许指定SQL中的SET部分："}]},{"ID":"20241026235275-qsmb68t","Type":"NodeParagraph","Properties":{"id":"20241026235275-qsmb68t","updated":"20241026235275"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007714-20241027000203-96xdegi.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235276-o5l2i2l","Type":"NodeParagraph","Properties":{"id":"20241026235276-o5l2i2l","updated":"20241026235276"},"Children":[{"Type":"NodeText","Data":"接下来，我们就来看看如何利用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Wrapper"},{"Type":"NodeText","Data":"实现复杂查询。"}]},{"ID":"20241026235277-yzbfhlp","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235277-yzbfhlp","updated":"20241026235277"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"2.1.1.QueryWrapper"}]},{"ID":"20241026235278-i2utg26","Type":"NodeParagraph","Properties":{"id":"20241026235278-i2utg26","updated":"20241026235278"},"Children":[{"Type":"NodeText","Data":"无论是修改、删除、查询，都可以使用QueryWrapper来构建查询条件。接下来看一些例子： "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"查询"},{"Type":"NodeText","Data":"：查询出名字中带"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"o"},{"Type":"NodeText","Data":"的，存款大于等于1000元的人。代码如下："}]},{"ID":"20241026235279-tuxitb3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235279-tuxitb3","updated":"20241026235279"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testQueryWrapper() {\n    // 1.构建查询条件 where name like \"%o%\" AND balance \u003e= 1000\n    QueryWrapper\u003cUser\u003e wrapper = new QueryWrapper\u003cUser\u003e()\n            .select(\"id\", \"username\", \"info\", \"balance\")\n            .like(\"username\", \"o\")\n            .ge(\"balance\", 1000);\n    // 2.查询数据\n    List\u003cUser\u003e users = userMapper.selectList(wrapper);\n    users.forEach(System.out::println);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235280-vu30bzq","Type":"NodeParagraph","Properties":{"id":"20241026235280-vu30bzq","updated":"20241026235280"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"更新"},{"Type":"NodeText","Data":"：更新用户名为jack的用户的余额为2000，代码如下："}]},{"ID":"20241026235281-of2vaqz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235281-of2vaqz","updated":"20241026235281"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testUpdateByQueryWrapper() {\n    // 1.构建查询条件 where name = \"Jack\"\n    QueryWrapper\u003cUser\u003e wrapper = new QueryWrapper\u003cUser\u003e().eq(\"username\", \"Jack\");\n    // 2.更新数据，user中非null字段都会作为set语句\n    User user = new User();\n    user.setBalance(2000);\n    userMapper.update(user, wrapper);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235282-rkft7so","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235282-rkft7so","updated":"20241026235282"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"2.1.2.UpdateWrapper"}]},{"ID":"20241026235283-kpxuidt","Type":"NodeParagraph","Properties":{"id":"20241026235283-kpxuidt","updated":"20241026235283"},"Children":[{"Type":"NodeText","Data":"基于BaseMapper中的update方法更新时只能直接赋值，对于一些复杂的需求就难以实现。 例如：更新id为"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"1,2,4"},{"Type":"NodeText","Data":"的用户的余额，扣200，对应的SQL应该是："}]},{"ID":"20241026235284-198txvn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235284-198txvn","updated":"20241026235284"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"UPDATE user SET balance = balance - 200 WHERE id in (1, 2, 4)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235285-l3wieui","Type":"NodeParagraph","Properties":{"id":"20241026235285-l3wieui","updated":"20241026235285"},"Children":[{"Type":"NodeText","Data":"SET的赋值结果是基于字段现有值的，这个时候就要利用UpdateWrapper中的setSql功能了："}]},{"ID":"20241026235286-mykhrv7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235286-mykhrv7","updated":"20241026235286"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testUpdateWrapper() {\n    List\u003cLong\u003e ids = List.of(1L, 2L, 4L);\n    // 1.生成SQL\n    UpdateWrapper\u003cUser\u003e wrapper = new UpdateWrapper\u003cUser\u003e()\n            .setSql(\"balance = balance - 200\") // SET balance = balance - 200\n            .in(\"id\", ids); // WHERE id in (1, 2, 4)\n        // 2.更新，注意第一个参数可以给null，也就是不填更新字段和数据，\n    // 而是基于UpdateWrapper中的setSQL来更新\n    userMapper.update(null, wrapper);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235287-t182qzy","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235287-t182qzy","updated":"20241026235287"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"2.1.3.LambdaQueryWrapper"}]},{"ID":"20241026235288-xwzttek","Type":"NodeParagraph","Properties":{"id":"20241026235288-xwzttek","updated":"20241026235288"},"Children":[{"Type":"NodeText","Data":"无论是QueryWrapper还是UpdateWrapper在构造条件的时候都需要写死字段名称，会出现字符串"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"魔法值"},{"Type":"NodeText","Data":"。这在编程规范中显然是不推荐的。 那怎么样才能不写字段名，又能知道字段名呢？"}]},{"ID":"20241026235289-xkypy1q","Type":"NodeParagraph","Properties":{"id":"20241026235289-xkypy1q","updated":"20241026235289"},"Children":[{"Type":"NodeText","Data":"其中一种办法是基于变量的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"gettter"},{"Type":"NodeText","Data":"方法结合反射技术。因此我们只要将条件对应的字段的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"getter"},{"Type":"NodeText","Data":"方法传递给MybatisPlus，它就能计算出对应的变量名了。而传递方法可以使用JDK8中的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"方法引用"},{"Type":"NodeText","Data":"和"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Lambda"},{"Type":"NodeText","Data":"表达式。 因此MybatisPlus又提供了一套基于Lambda的Wrapper，包含两个："}]},{"ID":"20241026235290-fqkcg98","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235290-fqkcg98","updated":"20241026235290"},"Children":[{"ID":"20241026235291-p5xj4mu","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235291-p5xj4mu","updated":"20241026235291"},"Children":[{"ID":"20241026235292-zzkd3tj","Type":"NodeParagraph","Properties":{"id":"20241026235292-zzkd3tj","updated":"20241026235292"},"Children":[{"Type":"NodeText","Data":"LambdaQueryWrapper"}]}]},{"ID":"20241026235293-m50ndke","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235293-m50ndke","updated":"20241026235293"},"Children":[{"ID":"20241026235294-zuzizgp","Type":"NodeParagraph","Properties":{"id":"20241026235294-zuzizgp","updated":"20241026235294"},"Children":[{"Type":"NodeText","Data":"LambdaUpdateWrapper"}]}]}]},{"ID":"20241026235295-d3ws5ya","Type":"NodeParagraph","Properties":{"id":"20241026235295-d3ws5ya","updated":"20241026235295"},"Children":[{"Type":"NodeText","Data":"分别对应QueryWrapper和UpdateWrapper"}]},{"ID":"20241026235296-shl11k1","Type":"NodeParagraph","Properties":{"id":"20241026235296-shl11k1","updated":"20241026235296"},"Children":[{"Type":"NodeText","Data":"其使用方式如下："}]},{"ID":"20241026235297-tflvmtq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235297-tflvmtq","updated":"20241026235297"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testLambdaQueryWrapper() {\n    // 1.构建条件 WHERE username LIKE \"%o%\" AND balance \u003e= 1000\n    QueryWrapper\u003cUser\u003e wrapper = new QueryWrapper\u003c\u003e();\n    wrapper.lambda()\n            .select(User::getId, User::getUsername, User::getInfo, User::getBalance)\n            .like(User::getUsername, \"o\")\n            .ge(User::getBalance, 1000);\n    // 2.查询\n    List\u003cUser\u003e users = userMapper.selectList(wrapper);\n    users.forEach(System.out::println);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235298-uwdktpa","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235298-uwdktpa","updated":"20241026235298"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"2.2.自定义SQL"}]},{"ID":"20241026235299-hocbm6i","Type":"NodeParagraph","Properties":{"id":"20241026235299-hocbm6i","updated":"20241026235299"},"Children":[{"Type":"NodeText","Data":"在演示UpdateWrapper的案例中，我们在代码中编写了更新的SQL语句："}]},{"ID":"20241026235300-mashvfy","Type":"NodeParagraph","Properties":{"id":"20241026235300-mashvfy","updated":"20241026235300"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007715-20241027000203-0p81och.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235301-8gt9f22","Type":"NodeParagraph","Properties":{"id":"20241026235301-8gt9f22","updated":"20241026235301"},"Children":[{"Type":"NodeText","Data":"这种写法在某些企业也是不允许的，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"因为SQL语句最好都维护在持久层，而不是业务层"},{"Type":"NodeText","Data":"。就当前案例来说，由于条件是in语句，只能将SQL写在Mapper.xml文件，利用foreach来生成动态SQL。 这实在是太麻烦了。假如查询条件更复杂，动态SQL的编写也会更加复杂。"}]},{"ID":"20241026235302-pazjefp","Type":"NodeParagraph","Properties":{"id":"20241026235302-pazjefp","updated":"20241026235302"},"Children":[{"Type":"NodeText","Data":"所以，MybatisPlus提供了自定义SQL功能，可以让我们利用Wrapper生成查询条件，再结合Mapper.xml编写SQL"}]},{"ID":"20241026235303-zdqsv1h","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235303-zdqsv1h","updated":"20241026235303"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"2.2.1.基本用法"}]},{"ID":"20241026235304-lzsal2a","Type":"NodeParagraph","Properties":{"id":"20241026235304-lzsal2a","updated":"20241026235304"},"Children":[{"Type":"NodeText","Data":"以当前案例来说，我们可以这样写："}]},{"ID":"20241026235305-0pxc3f8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235305-0pxc3f8","updated":"20241026235305"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testCustomWrapper() {\n    // 1.准备自定义查询条件\n    List\u003cLong\u003e ids = List.of(1L, 2L, 4L);\n    QueryWrapper\u003cUser\u003e wrapper = new QueryWrapper\u003cUser\u003e().in(\"id\", ids);\n\n    // 2.调用mapper的自定义方法，直接传递Wrapper\n    userMapper.deductBalanceByIds(200, wrapper);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235306-sbygk9g","Type":"NodeParagraph","Properties":{"id":"20241026235306-sbygk9g","updated":"20241026235306"},"Children":[{"Type":"NodeText","Data":"然后在UserMapper中自定义SQL："}]},{"ID":"20241026235307-dtpignc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235307-dtpignc","updated":"20241026235307"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"public interface UserMapper extends BaseMapper\u003cUser\u003e {\n    @Select(\"UPDATE user SET balance = balance - #{money} ${ew.customSqlSegment}\")\n    void deductBalanceByIds(@Param(\"money\") int money, @Param(\"ew\") QueryWrapper\u003cUser\u003e wrapper);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235308-z17cgkg","Type":"NodeParagraph","Properties":{"id":"20241026235308-z17cgkg","updated":"20241026235308"},"Children":[{"Type":"NodeText","Data":"这样就省去了编写复杂查询条件的烦恼了。"}]},{"ID":"20241026235309-niotknv","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235309-niotknv","updated":"20241026235309"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"2.2.2.多表关联"}]},{"ID":"20241026235310-k3ol5q8","Type":"NodeParagraph","Properties":{"id":"20241026235310-k3ol5q8","updated":"20241026235310"},"Children":[{"Type":"NodeText","Data":"理论上来讲MyBatisPlus是不支持多表查询的，不过我们可以利用Wrapper中自定义条件结合自定义SQL来实现多表查询的效果。 例如，我们要查询出所有收货地址在北京的并且用户id在1、2、4之中的用户 要是自己基于mybatis实现SQL，大概是这样的："}]},{"ID":"20241026235311-3aik68y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WE1M","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235311-3aik68y","updated":"20241026235311"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WE1M","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cselect id=\"queryUserByIdAndAddr\" resultType=\"com.itheima.mp.domain.po.User\"\u003e\n      SELECT *\n      FROM user u\n      INNER JOIN address a ON u.id = a.user_id\n      WHERE u.id\n      \u003cforeach collection=\"ids\" separator=\",\" item=\"id\" open=\"IN (\" close=\")\"\u003e\n          #{id}\n      \u003c/foreach\u003e\n      AND a.city = #{city}\n  \u003c/select\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235312-je47zwh","Type":"NodeParagraph","Properties":{"id":"20241026235312-je47zwh","updated":"20241026235312"},"Children":[{"Type":"NodeText","Data":"可以看出其中最复杂的就是WHERE条件的编写，如果业务复杂一些，这里的SQL会更变态。"}]},{"ID":"20241026235313-1oq53px","Type":"NodeParagraph","Properties":{"id":"20241026235313-1oq53px","updated":"20241026235313"},"Children":[{"Type":"NodeText","Data":"但是基于自定义SQL结合Wrapper的玩法，我们就可以利用Wrapper来构建查询条件，然后手写SELECT及FROM部分，实现多表查询。"}]},{"ID":"20241026235314-5meflv3","Type":"NodeParagraph","Properties":{"id":"20241026235314-5meflv3","updated":"20241026235314"},"Children":[{"Type":"NodeText","Data":"查询条件这样来构建："}]},{"ID":"20241026235315-xpx4uin","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235315-xpx4uin","updated":"20241026235315"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testCustomJoinWrapper() {\n    // 1.准备自定义查询条件\n    QueryWrapper\u003cUser\u003e wrapper = new QueryWrapper\u003cUser\u003e()\n            .in(\"u.id\", List.of(1L, 2L, 4L))\n            .eq(\"a.city\", \"北京\");\n\n    // 2.调用mapper的自定义方法\n    List\u003cUser\u003e users = userMapper.queryUserByWrapper(wrapper);\n\n    users.forEach(System.out::println);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235316-k3c8ori","Type":"NodeParagraph","Properties":{"id":"20241026235316-k3c8ori","updated":"20241026235316"},"Children":[{"Type":"NodeText","Data":"然后在UserMapper中自定义方法："}]},{"ID":"20241026235317-uijuzie","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235317-uijuzie","updated":"20241026235317"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Select(\"SELECT u.* FROM user u INNER JOIN address a ON u.id = a.user_id ${ew.customSqlSegment}\")\nList\u003cUser\u003e queryUserByWrapper(@Param(\"ew\")QueryWrapper\u003cUser\u003e wrapper);\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235318-o0hq2y1","Type":"NodeParagraph","Properties":{"id":"20241026235318-o0hq2y1","updated":"20241026235318"},"Children":[{"Type":"NodeText","Data":"当然，也可以在"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UserMapper.xml"},{"Type":"NodeText","Data":"中写SQL："}]},{"ID":"20241026235319-x6eqiak","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WE1M","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235319-x6eqiak","updated":"20241026235319"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WE1M","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cselect id=\"queryUserByIdAndAddr\" resultType=\"com.itheima.mp.domain.po.User\"\u003e\n    SELECT * FROM user u INNER JOIN address a ON u.id = a.user_id ${ew.customSqlSegment}\n\u003c/select\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235320-ib2myxd","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235320-ib2myxd","updated":"20241026235320"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"2.3.Service接口"}]},{"ID":"20241026235321-yhkj5h9","Type":"NodeParagraph","Properties":{"id":"20241026235321-yhkj5h9","updated":"20241026235321"},"Children":[{"Type":"NodeText","Data":"MybatisPlus不仅提供了BaseMapper，还提供了通用的Service接口及默认实现，封装了一些常用的service模板方法。 通用接口为"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"IService"},{"Type":"NodeText","Data":"，默认实现为"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"ServiceImpl"},{"Type":"NodeText","Data":"，其中封装的方法可以分为以下几类："}]},{"ID":"20241026235322-96ph3dv","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235322-96ph3dv","updated":"20241026235322"},"Children":[{"ID":"20241026235323-s90ao9h","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235323-s90ao9h","updated":"20241026235323"},"Children":[{"ID":"20241026235324-5qd4wla","Type":"NodeParagraph","Properties":{"id":"20241026235324-5qd4wla","updated":"20241026235324"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"save"},{"Type":"NodeText","Data":"：新增"}]}]},{"ID":"20241026235325-1oji73o","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235325-1oji73o","updated":"20241026235325"},"Children":[{"ID":"20241026235326-wqtlohq","Type":"NodeParagraph","Properties":{"id":"20241026235326-wqtlohq","updated":"20241026235326"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"remove"},{"Type":"NodeText","Data":"：删除"}]}]},{"ID":"20241026235327-uw5swv6","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235327-uw5swv6","updated":"20241026235327"},"Children":[{"ID":"20241026235328-41qf2dy","Type":"NodeParagraph","Properties":{"id":"20241026235328-41qf2dy","updated":"20241026235328"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"update"},{"Type":"NodeText","Data":"：更新"}]}]},{"ID":"20241026235329-dfejtex","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235329-dfejtex","updated":"20241026235329"},"Children":[{"ID":"20241026235330-m4yka8g","Type":"NodeParagraph","Properties":{"id":"20241026235330-m4yka8g","updated":"20241026235330"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"get"},{"Type":"NodeText","Data":"：查询单个结果"}]}]},{"ID":"20241026235331-dr5ej1d","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235331-dr5ej1d","updated":"20241026235331"},"Children":[{"ID":"20241026235332-psixlm8","Type":"NodeParagraph","Properties":{"id":"20241026235332-psixlm8","updated":"20241026235332"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"list"},{"Type":"NodeText","Data":"：查询集合结果"}]}]},{"ID":"20241026235333-z0l004i","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235333-z0l004i","updated":"20241026235333"},"Children":[{"ID":"20241026235334-h337si0","Type":"NodeParagraph","Properties":{"id":"20241026235334-h337si0","updated":"20241026235334"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"count"},{"Type":"NodeText","Data":"：计数"}]}]},{"ID":"20241026235335-f4w2zvg","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235335-f4w2zvg","updated":"20241026235335"},"Children":[{"ID":"20241026235336-333yhpa","Type":"NodeParagraph","Properties":{"id":"20241026235336-333yhpa","updated":"20241026235336"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"page"},{"Type":"NodeText","Data":"：分页查询"}]}]}]},{"ID":"20241026235337-2j238uy","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235337-2j238uy","updated":"20241026235337"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2.3.1.CRUD"}]},{"ID":"20241026235338-dmjgdgo","Type":"NodeParagraph","Properties":{"id":"20241026235338-dmjgdgo","updated":"20241026235338"},"Children":[{"Type":"NodeText","Data":"我们先俩看下基本的CRUD接口。 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"新增"},{"Type":"NodeText","Data":"："}]},{"ID":"20241026235339-ac13mbk","Type":"NodeParagraph","Properties":{"id":"20241026235339-ac13mbk","updated":"20241026235339"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007816-20241027000203-opqnlqi.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235340-jbx9lpu","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235340-jbx9lpu","updated":"20241026235340"},"Children":[{"ID":"20241026235341-z3jtecw","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235341-z3jtecw","updated":"20241026235341"},"Children":[{"ID":"20241026235342-ykx6hua","Type":"NodeParagraph","Properties":{"id":"20241026235342-ykx6hua","updated":"20241026235342"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"save"},{"Type":"NodeText","Data":"是新增单个元素"}]}]},{"ID":"20241026235343-dmiewmz","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235343-dmiewmz","updated":"20241026235343"},"Children":[{"ID":"20241026235344-d5rf9ao","Type":"NodeParagraph","Properties":{"id":"20241026235344-d5rf9ao","updated":"20241026235344"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"saveBatch"},{"Type":"NodeText","Data":"是批量新增"}]}]},{"ID":"20241026235345-79pnura","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235345-79pnura","updated":"20241026235345"},"Children":[{"ID":"20241026235346-oop3f8q","Type":"NodeParagraph","Properties":{"id":"20241026235346-oop3f8q","updated":"20241026235346"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"saveOrUpdate"},{"Type":"NodeText","Data":"是根据id判断，如果数据存在就更新，不存在则新增"}]}]},{"ID":"20241026235347-vfgwauf","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235347-vfgwauf","updated":"20241026235347"},"Children":[{"ID":"20241026235348-fem5s67","Type":"NodeParagraph","Properties":{"id":"20241026235348-fem5s67","updated":"20241026235348"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"saveOrUpdateBatch"},{"Type":"NodeText","Data":"是批量的新增或修改"}]}]}]},{"ID":"20241026235349-3t233li","Type":"NodeParagraph","Properties":{"id":"20241026235349-3t233li","updated":"20241026235349"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"删除："}]},{"ID":"20241026235350-pq4o4rn","Type":"NodeParagraph","Properties":{"id":"20241026235350-pq4o4rn","updated":"20241026235350"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007817-20241027000203-dk5ap6k.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235351-bgckp69","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235351-bgckp69","updated":"20241026235351"},"Children":[{"ID":"20241026235352-vzjx6v4","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235352-vzjx6v4","updated":"20241026235352"},"Children":[{"ID":"20241026235353-sg7tvne","Type":"NodeParagraph","Properties":{"id":"20241026235353-sg7tvne","updated":"20241026235353"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"removeById"},{"Type":"NodeText","Data":"：根据id删除"}]}]},{"ID":"20241026235354-6lmcp1s","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235354-6lmcp1s","updated":"20241026235354"},"Children":[{"ID":"20241026235355-9imi7mu","Type":"NodeParagraph","Properties":{"id":"20241026235355-9imi7mu","updated":"20241026235355"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"removeByIds"},{"Type":"NodeText","Data":"：根据id批量删除"}]}]},{"ID":"20241026235356-k0rxo9i","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235356-k0rxo9i","updated":"20241026235356"},"Children":[{"ID":"20241026235357-drsrmgf","Type":"NodeParagraph","Properties":{"id":"20241026235357-drsrmgf","updated":"20241026235357"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"removeByMap"},{"Type":"NodeText","Data":"：根据Map中的键值对为条件删除"}]}]},{"ID":"20241026235358-stqgrrr","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235358-stqgrrr","updated":"20241026235358"},"Children":[{"ID":"20241026235359-1uoqjpf","Type":"NodeParagraph","Properties":{"id":"20241026235359-1uoqjpf","updated":"20241026235359"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"remove(Wrapper\u0026lt;T\u0026gt;)"},{"Type":"NodeText","Data":"：根据Wrapper条件删除"}]}]},{"ID":"20241026235360-ithb3co","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235360-ithb3co","updated":"20241026235360"},"Children":[{"ID":"20241026235361-vgw8kue","Type":"NodeParagraph","Properties":{"id":"20241026235361-vgw8kue","updated":"20241026235361"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"s code","TextMarkTextContent":"removeBatchByIds"},{"Type":"NodeText","Data":"：暂不支持"}]}]}]},{"ID":"20241026235362-law97ot","Type":"NodeParagraph","Properties":{"id":"20241026235362-law97ot","updated":"20241026235362"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"修改："}]},{"ID":"20241026235363-hjmdnpz","Type":"NodeParagraph","Properties":{"id":"20241026235363-hjmdnpz","updated":"20241026235363"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007818-20241027000203-wpnfh93.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235364-3aramsx","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235364-3aramsx","updated":"20241026235364"},"Children":[{"ID":"20241026235365-wpgu0hr","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235365-wpgu0hr","updated":"20241026235365"},"Children":[{"ID":"20241026235366-xk496hq","Type":"NodeParagraph","Properties":{"id":"20241026235366-xk496hq","updated":"20241026235366"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"updateById"},{"Type":"NodeText","Data":"：根据id修改"}]}]},{"ID":"20241026235367-d77kjs3","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235367-d77kjs3","updated":"20241026235367"},"Children":[{"ID":"20241026235368-mgv0yc8","Type":"NodeParagraph","Properties":{"id":"20241026235368-mgv0yc8","updated":"20241026235368"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"update(Wrapper\u0026lt;T\u0026gt;)"},{"Type":"NodeText","Data":"：根据"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UpdateWrapper"},{"Type":"NodeText","Data":"修改，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Wrapper"},{"Type":"NodeText","Data":"中包含"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"set"},{"Type":"NodeText","Data":"和"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"where"},{"Type":"NodeText","Data":"部分"}]}]},{"ID":"20241026235369-s4c2pjw","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235369-s4c2pjw","updated":"20241026235369"},"Children":[{"ID":"20241026235370-hsuy2ts","Type":"NodeParagraph","Properties":{"id":"20241026235370-hsuy2ts","updated":"20241026235370"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"update(T，Wrapper\u0026lt;T\u0026gt;)"},{"Type":"NodeText","Data":"：按照"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"T"},{"Type":"NodeText","Data":"内的数据修改与"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Wrapper"},{"Type":"NodeText","Data":"匹配到的数据"}]}]},{"ID":"20241026235371-oslyeeh","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235371-oslyeeh","updated":"20241026235371"},"Children":[{"ID":"20241026235372-2960ow6","Type":"NodeParagraph","Properties":{"id":"20241026235372-2960ow6","updated":"20241026235372"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"updateBatchById"},{"Type":"NodeText","Data":"：根据id批量修改"}]}]}]},{"ID":"20241026235373-ra1tp27","Type":"NodeParagraph","Properties":{"id":"20241026235373-ra1tp27","updated":"20241026235373"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"Get："}]},{"ID":"20241026235374-udtr4ji","Type":"NodeParagraph","Properties":{"id":"20241026235374-udtr4ji","updated":"20241026235374"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007819-20241027000203-lsej623.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235375-tmni8d1","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235375-tmni8d1","updated":"20241026235375"},"Children":[{"ID":"20241026235376-ry7bpzv","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235376-ry7bpzv","updated":"20241026235376"},"Children":[{"ID":"20241026235377-o4qfcwz","Type":"NodeParagraph","Properties":{"id":"20241026235377-o4qfcwz","updated":"20241026235377"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"getById"},{"Type":"NodeText","Data":"：根据id查询1条数据"}]}]},{"ID":"20241026235378-e1cv6hp","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235378-e1cv6hp","updated":"20241026235378"},"Children":[{"ID":"20241026235379-uu68vi5","Type":"NodeParagraph","Properties":{"id":"20241026235379-uu68vi5","updated":"20241026235379"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"getOne(Wrapper\u0026lt;T\u0026gt;)"},{"Type":"NodeText","Data":"：根据"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Wrapper"},{"Type":"NodeText","Data":"查询1条数据"}]}]},{"ID":"20241026235380-5xmkihg","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235380-5xmkihg","updated":"20241026235380"},"Children":[{"ID":"20241026235381-n9mccxk","Type":"NodeParagraph","Properties":{"id":"20241026235381-n9mccxk","updated":"20241026235381"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"getBaseMapper"},{"Type":"NodeText","Data":"：获取"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Service"},{"Type":"NodeText","Data":"内的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"BaseMapper"},{"Type":"NodeText","Data":"实现，某些时候需要直接调用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Mapper"},{"Type":"NodeText","Data":"内的自定义"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"SQL"},{"Type":"NodeText","Data":"时可以用这个方法获取到"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Mapper"}]}]}]},{"ID":"20241026235382-glt3c47","Type":"NodeParagraph","Properties":{"id":"20241026235382-glt3c47","updated":"20241026235382"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"List："}]},{"ID":"20241026235383-oxi60a9","Type":"NodeParagraph","Properties":{"id":"20241026235383-oxi60a9","updated":"20241026235383"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007820-20241027000203-6i8ptlu.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235384-ib27brd","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235384-ib27brd","updated":"20241026235384"},"Children":[{"ID":"20241026235385-se9jgfk","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235385-se9jgfk","updated":"20241026235385"},"Children":[{"ID":"20241026235386-dgstz7w","Type":"NodeParagraph","Properties":{"id":"20241026235386-dgstz7w","updated":"20241026235386"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"listByIds"},{"Type":"NodeText","Data":"：根据id批量查询"}]}]},{"ID":"20241026235387-e2nbx5t","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235387-e2nbx5t","updated":"20241026235387"},"Children":[{"ID":"20241026235388-397bw0j","Type":"NodeParagraph","Properties":{"id":"20241026235388-397bw0j","updated":"20241026235388"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"list(Wrapper\u0026lt;T\u0026gt;)"},{"Type":"NodeText","Data":"：根据Wrapper条件查询多条数据"}]}]},{"ID":"20241026235389-fzoakh6","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235389-fzoakh6","updated":"20241026235389"},"Children":[{"ID":"20241026235390-syerdxy","Type":"NodeParagraph","Properties":{"id":"20241026235390-syerdxy","updated":"20241026235390"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"list()"},{"Type":"NodeText","Data":"：查询所有"}]}]}]},{"ID":"20241026235391-uzv5nmk","Type":"NodeParagraph","Properties":{"id":"20241026235391-uzv5nmk","updated":"20241026235391"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"Count"},{"Type":"NodeText","Data":"："}]},{"ID":"20241026235392-vyhe95f","Type":"NodeParagraph","Properties":{"id":"20241026235392-vyhe95f","updated":"20241026235392"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007821-20241027000203-kvogpel.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235393-vrxcw5s","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235393-vrxcw5s","updated":"20241026235393"},"Children":[{"ID":"20241026235394-p6tbpcm","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235394-p6tbpcm","updated":"20241026235394"},"Children":[{"ID":"20241026235395-hjd8amr","Type":"NodeParagraph","Properties":{"id":"20241026235395-hjd8amr","updated":"20241026235395"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"count()"},{"Type":"NodeText","Data":"：统计所有数量"}]}]},{"ID":"20241026235396-srik778","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235396-srik778","updated":"20241026235396"},"Children":[{"ID":"20241026235397-641c61r","Type":"NodeParagraph","Properties":{"id":"20241026235397-641c61r","updated":"20241026235397"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"count(Wrapper\u0026lt;T\u0026gt;)"},{"Type":"NodeText","Data":"：统计符合"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Wrapper"},{"Type":"NodeText","Data":"条件的数据数量"}]}]}]},{"ID":"20241026235398-a5k48yk","Type":"NodeParagraph","Properties":{"id":"20241026235398-a5k48yk","updated":"20241026235398"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"getBaseMapper"},{"Type":"NodeText","Data":"： 当我们在service中要调用Mapper中自定义SQL时，就必须获取service对应的Mapper，就可以通过这个方法："}]},{"ID":"20241026235399-drmyaki","Type":"NodeParagraph","Properties":{"id":"20241026235399-drmyaki","updated":"20241026235399"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007822-20241027000203-q8vcfzl.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235400-sc5n86q","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235400-sc5n86q","updated":"20241026235400"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"2.3.2.基本用法"}]},{"ID":"20241026235401-6wnb1b8","Type":"NodeParagraph","Properties":{"id":"20241026235401-6wnb1b8","updated":"20241026235401"},"Children":[{"Type":"NodeText","Data":"由于"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Service"},{"Type":"NodeText","Data":"中经常需要定义与业务有关的自定义方法，因此我们不能直接使用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"IService"},{"Type":"NodeText","Data":"，而是自定义"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Service"},{"Type":"NodeText","Data":"接口，然后继承"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"IService"},{"Type":"NodeText","Data":"以拓展方法。同时，让自定义的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Service实现类"},{"Type":"NodeText","Data":"继承"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"ServiceImpl"},{"Type":"NodeText","Data":"，这样就不用自己实现"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"IService"},{"Type":"NodeText","Data":"中的接口了。"}]},{"ID":"20241026235402-ktn2109","Type":"NodeBlockquote","Properties":{"id":"20241026235402-ktn2109","updated":"20241026235402"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241026235403-l9msas5","Type":"NodeParagraph","Properties":{"id":"20241026235403-l9msas5","updated":"20241026235403"},"Children":[{"Type":"NodeText","Data":"看视频："}]},{"ID":"20241026235404-malj5wh","Type":"NodeParagraph","Properties":{"id":"20241026235404-malj5wh","updated":"20241026235404"},"Children":[{"Type":"NodeText","Data":"https://www.bilibili.com/video/BV1Xu411A7tL?p=8\u0026vd_source=8a230e3eb3e99863373e7c6b51f126b6"}]},{"ID":"20241026235405-5hxyd53","Type":"NodeParagraph","Properties":{"id":"20241026235405-5hxyd53","updated":"20241026235405"},"Children":[{"Type":"NodeText","Data":"https://www.bilibili.com/video/BV1Xu411A7tL?p=9\u0026vd_source=8a230e3eb3e99863373e7c6b51f126b6"}]}]},{"ID":"20241026235406-yng1ugl","Type":"NodeParagraph","Properties":{"id":"20241026235406-yng1ugl","updated":"20241026235406"},"Children":[{"Type":"NodeText","Data":"继承关系："}]},{"ID":"20241026235407-u9kn2gw","Type":"NodeParagraph","Properties":{"id":"20241026235407-u9kn2gw","updated":"20241026235407"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20231017145508245","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/image-20231017145508245-20241027000203-ais617o.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235408-ie8a4y9","Type":"NodeParagraph","Properties":{"id":"20241026235408-ie8a4y9","updated":"20241026235408"},"Children":[{"Type":"NodeText","Data":"首先，定义"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"IUserService"},{"Type":"NodeText","Data":"，继承"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"IService"},{"Type":"NodeText","Data":"："}]},{"ID":"20241026235409-c0n14rs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235409-c0n14rs","updated":"20241026235409"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.service;\n\nimport com.baomidou.mybatisplus.extension.service.IService;\nimport com.itheima.mp.domain.po.User;\n\npublic interface IUserService extends IService\u003cUser\u003e {\n    // 拓展自定义方法\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235410-et0y29x","Type":"NodeParagraph","Properties":{"id":"20241026235410-et0y29x","updated":"20241026235410"},"Children":[{"Type":"NodeText","Data":"然后，编写"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UserServiceImpl"},{"Type":"NodeText","Data":"类，继承"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"ServiceImpl"},{"Type":"NodeText","Data":"，实现"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UserService"},{"Type":"NodeText","Data":"："}]},{"ID":"20241026235411-5ksr4o1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235411-5ksr4o1","updated":"20241026235411"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.service.impl;\n\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\nimport com.itheima.mp.domain.po.User;\nimport com.itheima.mp.domain.po.service.UserService;\nimport com.itheima.mp.mapper.UserMapper;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class UserServiceImpl extends ServiceImpl\u003cUserMapper, User\u003e implements UserService {\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235412-1zy2k43","Type":"NodeParagraph","Properties":{"id":"20241026235412-1zy2k43","updated":"20241026235412"},"Children":[{"Type":"NodeText","Data":"项目结构如下："}]},{"ID":"20241026235413-d47fkkk","Type":"NodeParagraph","Properties":{"id":"20241026235413-d47fkkk","updated":"20241026235413"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007823-20241027000203-t3opa74.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235414-5kp4kn8","Type":"NodeParagraph","Properties":{"id":"20241026235414-5kp4kn8","updated":"20241026235414"},"Children":[{"Type":"NodeText","Data":"接下来，我们快速实现下面4个接口："}]},{"ID":"20241026235415-ok0vd30","Type":"NodeTable","Data":"| **编号** |    **接口**    | **请求方式** | **请求路径** | **请求参数** | **返回值** |\n| :------: | :------------: | :----------: | :----------: | :----------: | :--------: |\n|    1     |    新增用户    |     POST     |    /users    | 用户表单实体 |     无     |\n|    2     |    删除用户    |    DELETE    | /users/{id}  |    用户id    |     无     |\n|    3     | 根据id查询用户 |     GET      | /users/{id}  |    用户id    |   用户VO   |\n|    4     | 根据id批量查询 |     GET      |    /users    |  用户id集合  | 用户VO集合 |","TableAligns":[2,2,2,2,2,2],"Properties":{"id":"20241026235415-ok0vd30","updated":"20241026235415"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"编号"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"接口"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"请求方式"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"请求路径"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"请求参数"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"返回值"}]}]}]},{"Type":"NodeTableRow","TableAligns":[2,2,2,2,2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"1"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"新增用户"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"POST"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"/users"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"用户表单实体"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"无"}]}]},{"Type":"NodeTableRow","TableAligns":[2,2,2,2,2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"删除用户"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"DELETE"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"/users/{id}"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"用户id"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"无"}]}]},{"Type":"NodeTableRow","TableAligns":[2,2,2,2,2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"3"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"根据id查询用户"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"GET"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"/users/{id}"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"用户id"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"用户VO"}]}]},{"Type":"NodeTableRow","TableAligns":[2,2,2,2,2,2],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"4"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"根据id批量查询"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"GET"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"/users"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"用户id集合"}]},{"Type":"NodeTableCell","TableCellAlign":2,"Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"用户VO集合"}]}]}]},{"ID":"20241026235416-tepkzo9","Type":"NodeParagraph","Properties":{"id":"20241026235416-tepkzo9","updated":"20241026235416"},"Children":[{"Type":"NodeText","Data":"首先，我们在项目中引入几个依赖："}]},{"ID":"20241026235417-icdus07","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WE1M","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235417-icdus07","updated":"20241026235417"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WE1M","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003c!--swagger--\u003e\n\u003cdependency\u003e\n    \u003cgroupId\u003ecom.github.xiaoymin\u003c/groupId\u003e\n    \u003cartifactId\u003eknife4j-openapi2-spring-boot-starter\u003c/artifactId\u003e\n    \u003cversion\u003e4.1.0\u003c/version\u003e\n\u003c/dependency\u003e\n\u003c!--web--\u003e\n\u003cdependency\u003e\n    \u003cgroupId\u003eorg.springframework.boot\u003c/groupId\u003e\n    \u003cartifactId\u003espring-boot-starter-web\u003c/artifactId\u003e\n\u003c/dependency\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235418-6ff0yx4","Type":"NodeParagraph","Properties":{"id":"20241026235418-6ff0yx4","updated":"20241026235418"},"Children":[{"Type":"NodeText","Data":"然后需要配置swagger信息："}]},{"ID":"20241026235419-dkddw7m","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WUFNTA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235419-dkddw7m","updated":"20241026235419"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WUFNTA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"knife4j:\n  enable: true\n  openapi:\n    title: 用户管理接口文档\n    description: \"用户管理接口文档\"\n    email: zhanghuyi@itcast.cn\n    concat: 虎哥\n    url: https://www.itcast.cn\n    version: v1.0.0\n    group:\n      default:\n        group-name: default\n        api-rule: package\n        api-rule-resources:\n          - com.itheima.mp.controller\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235420-ffs7k4t","Type":"NodeParagraph","Properties":{"id":"20241026235420-ffs7k4t","updated":"20241026235420"},"Children":[{"Type":"NodeText","Data":"然后，接口需要两个实体："}]},{"ID":"20241026235421-9jbsjq2","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235421-9jbsjq2","updated":"20241026235421"},"Children":[{"ID":"20241026235422-b58s74j","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235422-b58s74j","updated":"20241026235422"},"Children":[{"ID":"20241026235423-szpmrkm","Type":"NodeParagraph","Properties":{"id":"20241026235423-szpmrkm","updated":"20241026235423"},"Children":[{"Type":"NodeText","Data":"UserFormDTO：代表新增时的用户表单"}]}]},{"ID":"20241026235424-0onjljx","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235424-0onjljx","updated":"20241026235424"},"Children":[{"ID":"20241026235425-nnbfd7z","Type":"NodeParagraph","Properties":{"id":"20241026235425-nnbfd7z","updated":"20241026235425"},"Children":[{"Type":"NodeText","Data":"UserVO：代表查询的返回结果"}]}]}]},{"ID":"20241026235426-lcztnfu","Type":"NodeParagraph","Properties":{"id":"20241026235426-lcztnfu","updated":"20241026235426"},"Children":[{"Type":"NodeText","Data":"首先是UserFormDTO："}]},{"ID":"20241026235427-68jrwqs","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235427-68jrwqs","updated":"20241026235427"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.domain.dto;\n\nimport com.baomidou.mybatisplus.annotation.TableField;\nimport com.baomidou.mybatisplus.extension.handlers.JacksonTypeHandler;\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.Data;\n\n@Data\n@ApiModel(description = \"用户表单实体\")\npublic class UserFormDTO {\n\n    @ApiModelProperty(\"id\")\n    private Long id;\n\n    @ApiModelProperty(\"用户名\")\n    private String username;\n\n    @ApiModelProperty(\"密码\")\n    private String password;\n\n    @ApiModelProperty(\"注册手机号\")\n    private String phone;\n\n    @ApiModelProperty(\"详细信息，JSON风格\")\n    private String info;\n\n    @ApiModelProperty(\"账户余额\")\n    private Integer balance;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235428-4zts65g","Type":"NodeParagraph","Properties":{"id":"20241026235428-4zts65g","updated":"20241026235428"},"Children":[{"Type":"NodeText","Data":"然后是UserVO："}]},{"ID":"20241026235429-va1bthr","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235429-va1bthr","updated":"20241026235429"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.domain.vo;\n\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.Data;\n\n@Data\n@ApiModel(description = \"用户VO实体\")\npublic class UserVO {\n    \n    @ApiModelProperty(\"用户id\")\n    private Long id;\n    \n    @ApiModelProperty(\"用户名\")\n    private String username;\n    \n    @ApiModelProperty(\"详细信息\")\n    private String info;\n\n    @ApiModelProperty(\"使用状态（1正常 2冻结）\")\n    private Integer status;\n    \n    @ApiModelProperty(\"账户余额\")\n    private Integer balance;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235430-2kxhdpg","Type":"NodeParagraph","Properties":{"id":"20241026235430-2kxhdpg","updated":"20241026235430"},"Children":[{"Type":"NodeText","Data":"最后，按照Restful风格编写Controller接口方法："}]},{"ID":"20241026235431-dkgv4ju","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235431-dkgv4ju","updated":"20241026235431"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.controller;\n\nimport cn.hutool.core.bean.BeanUtil;\nimport com.itheima.mp.domain.dto.UserFormDTO;\nimport com.itheima.mp.domain.po.User;\nimport com.itheima.mp.domain.vo.UserVO;\nimport com.itheima.mp.service.IUserService;\nimport io.swagger.annotations.Api;\nimport io.swagger.annotations.ApiOperation;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@Api(tags = \"用户管理接口\")\n@RequiredArgsConstructor\n@RestController\n@RequestMapping(\"users\")\npublic class UserController {\n\n    private final IUserService userService;\n\n    @PostMapping\n    @ApiOperation(\"新增用户\")\n    public void saveUser(@RequestBody UserFormDTO userFormDTO){\n        // 1.转换DTO为PO\n        User user = BeanUtil.copyProperties(userFormDTO, User.class);\n        // 2.新增\n        userService.save(user);\n    }\n\n    @DeleteMapping(\"/{id}\")\n    @ApiOperation(\"删除用户\")\n    public void removeUserById(@PathVariable(\"id\") Long userId){\n        userService.removeById(userId);\n    }\n\n    @GetMapping(\"/{id}\")\n    @ApiOperation(\"根据id查询用户\")\n    public UserVO queryUserById(@PathVariable(\"id\") Long userId){\n        // 1.查询用户\n        User user = userService.getById(userId);\n        // 2.处理vo\n        return BeanUtil.copyProperties(user, UserVO.class);\n    }\n\n    @GetMapping\n    @ApiOperation(\"根据id集合查询用户\")\n    public List\u003cUserVO\u003e queryUserByIds(@RequestParam(\"ids\") List\u003cLong\u003e ids){\n        // 1.查询用户\n        List\u003cUser\u003e users = userService.listByIds(ids);\n        // 2.处理vo\n        return BeanUtil.copyToList(users, UserVO.class);\n    }\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235432-bli9cjm","Type":"NodeParagraph","Properties":{"id":"20241026235432-bli9cjm","updated":"20241026235432"},"Children":[{"Type":"NodeText","Data":"可以看到上述接口都直接在controller即可实现，无需编写任何service代码，非常方便。"}]},{"ID":"20241026235433-4gza5er","Type":"NodeParagraph","Properties":{"id":"20241026235433-4gza5er","updated":"20241026235433"},"Children":[{"Type":"NodeText","Data":"不过，一些带有业务逻辑的接口则需要在service中自定义实现了。例如下面的需求："}]},{"ID":"20241026235434-nmutg8c","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235434-nmutg8c","updated":"20241026235434"},"Children":[{"ID":"20241026235435-kn1hl08","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235435-kn1hl08","updated":"20241026235435"},"Children":[{"ID":"20241026235436-ydanfw8","Type":"NodeParagraph","Properties":{"id":"20241026235436-ydanfw8","updated":"20241026235436"},"Children":[{"Type":"NodeText","Data":"根据id扣减用户余额"}]}]}]},{"ID":"20241026235437-k0vl106","Type":"NodeParagraph","Properties":{"id":"20241026235437-k0vl106","updated":"20241026235437"},"Children":[{"Type":"NodeText","Data":"这看起来是个简单修改功能，只要修改用户余额即可。但这个业务包含一些业务逻辑处理："}]},{"ID":"20241026235438-f1iap6o","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235438-f1iap6o","updated":"20241026235438"},"Children":[{"ID":"20241026235439-1f28joc","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235439-1f28joc","updated":"20241026235439"},"Children":[{"ID":"20241026235440-jvp4loz","Type":"NodeParagraph","Properties":{"id":"20241026235440-jvp4loz","updated":"20241026235440"},"Children":[{"Type":"NodeText","Data":"判断用户状态是否正常"}]}]},{"ID":"20241026235441-xc3t00x","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235441-xc3t00x","updated":"20241026235441"},"Children":[{"ID":"20241026235442-yhz5v3c","Type":"NodeParagraph","Properties":{"id":"20241026235442-yhz5v3c","updated":"20241026235442"},"Children":[{"Type":"NodeText","Data":"判断用户余额是否充足"}]}]}]},{"ID":"20241026235443-jyzydff","Type":"NodeParagraph","Properties":{"id":"20241026235443-jyzydff","updated":"20241026235443"},"Children":[{"Type":"NodeText","Data":"这些业务逻辑都要在service层来做，另外更新余额需要自定义SQL，要在mapper中来实现。因此，我们除了要编写controller以外，具体的业务还要在service和mapper中编写。"}]},{"ID":"20241026235444-3e94y3n","Type":"NodeParagraph","Properties":{"id":"20241026235444-3e94y3n","updated":"20241026235444"},"Children":[{"Type":"NodeText","Data":"首先在UserController中定义一个方法："}]},{"ID":"20241026235445-eadysn6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235445-eadysn6","updated":"20241026235445"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@PutMapping(\"{id}/deduction/{money}\")\n@ApiOperation(\"扣减用户余额\")\npublic void deductBalance(@PathVariable(\"id\") Long id, @PathVariable(\"money\")Integer money){\n    userService.deductBalance(id, money);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235446-9p937pf","Type":"NodeParagraph","Properties":{"id":"20241026235446-9p937pf","updated":"20241026235446"},"Children":[{"Type":"NodeText","Data":"然后是UserService接口："}]},{"ID":"20241026235447-5ghtzzf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235447-5ghtzzf","updated":"20241026235447"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.service;\n\nimport com.baomidou.mybatisplus.extension.service.IService;\nimport com.itheima.mp.domain.po.User;\n\npublic interface IUserService extends IService\u003cUser\u003e {\n    void deductBalance(Long id, Integer money);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235448-eee28i9","Type":"NodeParagraph","Properties":{"id":"20241026235448-eee28i9","updated":"20241026235448"},"Children":[{"Type":"NodeText","Data":"最后是UserServiceImpl实现类："}]},{"ID":"20241026235449-hsdtlxm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235449-hsdtlxm","updated":"20241026235449"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.service.impl;\n\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\nimport com.itheima.mp.domain.po.User;\nimport com.itheima.mp.mapper.UserMapper;\nimport com.itheima.mp.service.IUserService;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class UserServiceImpl extends ServiceImpl\u003cUserMapper, User\u003e implements IUserService {\n    @Override\n    public void deductBalance(Long id, Integer money) {\n        // 1.查询用户\n        User user = getById(id);\n        // 2.判断用户状态\n        if (user == null || user.getStatus() == 2) {\n            throw new RuntimeException(\"用户状态异常\");\n        }\n        // 3.判断用户余额\n        if (user.getBalance() \u003c money) {\n            throw new RuntimeException(\"用户余额不足\");\n        }\n        // 4.扣减余额\n        baseMapper.deductMoneyById(id, money);\n    }\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235450-y367ux2","Type":"NodeParagraph","Properties":{"id":"20241026235450-y367ux2","updated":"20241026235450"},"Children":[{"Type":"NodeText","Data":"最后是mapper："}]},{"ID":"20241026235451-y0q177j","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235451-y0q177j","updated":"20241026235451"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Update(\"UPDATE user SET balance = balance - #{money} WHERE id = #{id}\")\nvoid deductMoneyById(@Param(\"id\") Long id, @Param(\"money\") Integer money);\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235452-z4dn17v","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235452-z4dn17v","updated":"20241026235452"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"2.3.3.Lambda"}]},{"ID":"20241026235453-0k2b1r6","Type":"NodeParagraph","Properties":{"id":"20241026235453-0k2b1r6","updated":"20241026235453"},"Children":[{"Type":"NodeText","Data":"IService中还提供了Lambda功能来简化我们的复杂查询及更新功能。我们通过两个案例来学习一下。"}]},{"ID":"20241026235454-1bqunvn","Type":"NodeParagraph","Properties":{"id":"20241026235454-1bqunvn","updated":"20241026235454"},"Children":[{"Type":"NodeText","Data":"案例一：实现一个根据复杂条件查询用户的接口，查询条件如下："}]},{"ID":"20241026235455-ele2d64","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235455-ele2d64","updated":"20241026235455"},"Children":[{"ID":"20241026235456-k58jv75","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235456-k58jv75","updated":"20241026235456"},"Children":[{"ID":"20241026235457-q38zhsm","Type":"NodeParagraph","Properties":{"id":"20241026235457-q38zhsm","updated":"20241026235457"},"Children":[{"Type":"NodeText","Data":"name：用户名关键字，可以为空"}]}]},{"ID":"20241026235458-ppyh4f2","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235458-ppyh4f2","updated":"20241026235458"},"Children":[{"ID":"20241026235459-sln9x2t","Type":"NodeParagraph","Properties":{"id":"20241026235459-sln9x2t","updated":"20241026235459"},"Children":[{"Type":"NodeText","Data":"status：用户状态，可以为空"}]}]},{"ID":"20241026235460-hi70xal","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235460-hi70xal","updated":"20241026235460"},"Children":[{"ID":"20241026235461-a32hv4c","Type":"NodeParagraph","Properties":{"id":"20241026235461-a32hv4c","updated":"20241026235461"},"Children":[{"Type":"NodeText","Data":"minBalance：最小余额，可以为空"}]}]},{"ID":"20241026235462-l8n5jir","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235462-l8n5jir","updated":"20241026235462"},"Children":[{"ID":"20241026235463-yq286xs","Type":"NodeParagraph","Properties":{"id":"20241026235463-yq286xs","updated":"20241026235463"},"Children":[{"Type":"NodeText","Data":"maxBalance：最大余额，可以为空"}]}]}]},{"ID":"20241026235464-k8d1ir6","Type":"NodeParagraph","Properties":{"id":"20241026235464-k8d1ir6","updated":"20241026235464"},"Children":[{"Type":"NodeText","Data":"可以理解成一个用户的后台管理界面，管理员可以自己选择条件来筛选用户，因此上述条件不一定存在，需要做判断。"}]},{"ID":"20241026235465-4xvg3gv","Type":"NodeParagraph","Properties":{"id":"20241026235465-4xvg3gv","updated":"20241026235465"},"Children":[{"Type":"NodeText","Data":"我们首先需要定义一个查询条件实体，UserQuery实体："}]},{"ID":"20241026235466-2n4z7mf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235466-2n4z7mf","updated":"20241026235466"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.domain.query;\n\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.Data;\n\n@Data\n@ApiModel(description = \"用户查询条件实体\")\npublic class UserQuery {\n    @ApiModelProperty(\"用户名关键字\")\n    private String name;\n    @ApiModelProperty(\"用户状态：1-正常，2-冻结\")\n    private Integer status;\n    @ApiModelProperty(\"余额最小值\")\n    private Integer minBalance;\n    @ApiModelProperty(\"余额最大值\")\n    private Integer maxBalance;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235467-wpizszf","Type":"NodeParagraph","Properties":{"id":"20241026235467-wpizszf","updated":"20241026235467"},"Children":[{"Type":"NodeText","Data":"接下来我们在UserController中定义一个controller方法："}]},{"ID":"20241026235468-7d3zjn3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235468-7d3zjn3","updated":"20241026235468"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@GetMapping(\"/list\")\n@ApiOperation(\"根据id集合查询用户\")\npublic List\u003cUserVO\u003e queryUsers(UserQuery query){\n    // 1.组织条件\n    String username = query.getName();\n    Integer status = query.getStatus();\n    Integer minBalance = query.getMinBalance();\n    Integer maxBalance = query.getMaxBalance();\n    LambdaQueryWrapper\u003cUser\u003e wrapper = new QueryWrapper\u003cUser\u003e().lambda()\n            .like(username != null, User::getUsername, username)\n            .eq(status != null, User::getStatus, status)\n            .ge(minBalance != null, User::getBalance, minBalance)\n            .le(maxBalance != null, User::getBalance, maxBalance);\n    // 2.查询用户\n    List\u003cUser\u003e users = userService.list(wrapper);\n    // 3.处理vo\n    return BeanUtil.copyToList(users, UserVO.class);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235469-1tgsa4j","Type":"NodeParagraph","Properties":{"id":"20241026235469-1tgsa4j","updated":"20241026235469"},"Children":[{"Type":"NodeText","Data":"在组织查询条件的时候，我们加入了 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"username != null"},{"Type":"NodeText","Data":" 这样的参数，意思就是当条件成立时才会添加这个查询条件，类似Mybatis的mapper.xml文件中的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"\u0026lt;if\u0026gt;"},{"Type":"NodeText","Data":"标签。这样就实现了动态查询条件效果了。"}]},{"ID":"20241026235470-mgnc4rc","Type":"NodeParagraph","Properties":{"id":"20241026235470-mgnc4rc","updated":"20241026235470"},"Children":[{"Type":"NodeText","Data":"不过，上述条件构建的代码太麻烦了。 因此Service中对"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"LambdaQueryWrapper"},{"Type":"NodeText","Data":"和"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"LambdaUpdateWrapper"},{"Type":"NodeText","Data":"的用法进一步做了简化。"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"我们无需自己通过"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"new"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"的方式来创建"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"Wrapper"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"，而是直接调用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"lambdaQuery"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"和"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"lambdaUpdate"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"方法"},{"Type":"NodeText","Data":"："}]},{"ID":"20241026235471-jjzrfir","Type":"NodeParagraph","Properties":{"id":"20241026235471-jjzrfir","updated":"20241026235471"},"Children":[{"Type":"NodeText","Data":"基于Lambda查询："}]},{"ID":"20241026235472-j5lfgie","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235472-j5lfgie","updated":"20241026235472"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@GetMapping(\"/list\")\n@ApiOperation(\"根据id集合查询用户\")\npublic List\u003cUserVO\u003e queryUsers(UserQuery query){\n    // 1.组织条件\n    String username = query.getName();\n    Integer status = query.getStatus();\n    Integer minBalance = query.getMinBalance();\n    Integer maxBalance = query.getMaxBalance();\n    // 2.查询用户\n    List\u003cUser\u003e users = userService.lambdaQuery()\n            .like(username != null, User::getUsername, username)\n            .eq(status != null, User::getStatus, status)\n            .ge(minBalance != null, User::getBalance, minBalance)\n            .le(maxBalance != null, User::getBalance, maxBalance)\n            .list();\n    // 3.处理vo\n    return BeanUtil.copyToList(users, UserVO.class);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235473-m5j63s4","Type":"NodeParagraph","Properties":{"id":"20241026235473-m5j63s4","updated":"20241026235473"},"Children":[{"Type":"NodeText","Data":"可以发现lambdaQuery方法中除了可以构建条件，还需要在链式编程的最后添加一个"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"list()"},{"Type":"NodeText","Data":"，这是在告诉MP我们的调用结果需要是一个list集合。这里不仅可以用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"list()"},{"Type":"NodeText","Data":"，可选的方法有："}]},{"ID":"20241026235474-x5ot5a7","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235474-x5ot5a7","updated":"20241026235474"},"Children":[{"ID":"20241026235475-vfxu41d","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235475-vfxu41d","updated":"20241026235475"},"Children":[{"ID":"20241026235476-fg59yya","Type":"NodeParagraph","Properties":{"id":"20241026235476-fg59yya","updated":"20241026235476"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":".one()"},{"Type":"NodeText","Data":"：最多1个结果"}]}]},{"ID":"20241026235477-zjleu6e","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235477-zjleu6e","updated":"20241026235477"},"Children":[{"ID":"20241026235478-2af09ag","Type":"NodeParagraph","Properties":{"id":"20241026235478-2af09ag","updated":"20241026235478"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":".list()"},{"Type":"NodeText","Data":"：返回集合结果"}]}]},{"ID":"20241026235479-qzog79w","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235479-qzog79w","updated":"20241026235479"},"Children":[{"ID":"20241026235480-lu55yva","Type":"NodeParagraph","Properties":{"id":"20241026235480-lu55yva","updated":"20241026235480"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":".count()"},{"Type":"NodeText","Data":"：返回计数结果"}]}]}]},{"ID":"20241026235481-yjvnnql","Type":"NodeParagraph","Properties":{"id":"20241026235481-yjvnnql","updated":"20241026235481"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"MybatisPlus会根据链式编程的最后一个方法来判断最终的返回结果。"}]},{"ID":"20241026235482-nc0qbxw","Type":"NodeParagraph","Properties":{"id":"20241026235482-nc0qbxw","updated":"20241026235482"},"Children":[{"Type":"NodeText","Data":"与lambdaQuery方法类似，IService中的lambdaUpdate方法可以非常方便的实现复杂更新业务。"}]},{"ID":"20241026235483-cpn2xfx","Type":"NodeParagraph","Properties":{"id":"20241026235483-cpn2xfx","updated":"20241026235483"},"Children":[{"Type":"NodeText","Data":"例如下面的需求："}]},{"ID":"20241026235484-lcq693i","Type":"NodeBlockquote","Properties":{"id":"20241026235484-lcq693i","updated":"20241026235484"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241026235485-jz77xsd","Type":"NodeParagraph","Properties":{"id":"20241026235485-jz77xsd","updated":"20241026235485"},"Children":[{"Type":"NodeText","Data":"需求：改造根据id修改用户余额的接口，要求如下"}]},{"ID":"20241026235486-ikh38hh","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235486-ikh38hh","updated":"20241026235486"},"Children":[{"ID":"20241026235487-artz4fv","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235487-artz4fv","updated":"20241026235487"},"Children":[{"ID":"20241026235488-v95bz8m","Type":"NodeParagraph","Properties":{"id":"20241026235488-v95bz8m","updated":"20241026235488"},"Children":[{"Type":"NodeText","Data":"如果扣减后余额为0，则将用户status修改为冻结状态（2）"}]}]}]}]},{"ID":"20241026235489-bvdd991","Type":"NodeParagraph","Properties":{"id":"20241026235489-bvdd991","updated":"20241026235489"},"Children":[{"Type":"NodeText","Data":"也就是说我们在扣减用户余额时，需要对用户剩余余额做出判断，如果发现剩余余额为0，则应该将status修改为2，这就是说update语句的set部分是动态的。"}]},{"ID":"20241026235490-qyrk2jj","Type":"NodeParagraph","Properties":{"id":"20241026235490-qyrk2jj","updated":"20241026235490"},"Children":[{"Type":"NodeText","Data":"实现如下："}]},{"ID":"20241026235491-at9ppii","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235491-at9ppii","updated":"20241026235491"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Override\n@Transactional\npublic void deductBalance(Long id, Integer money) {\n    // 1.查询用户\n    User user = getById(id);\n    // 2.校验用户状态\n    if (user == null || user.getStatus() == 2) {\n        throw new RuntimeException(\"用户状态异常！\");\n    }\n    // 3.校验余额是否充足\n    if (user.getBalance() \u003c money) {\n        throw new RuntimeException(\"用户余额不足！\");\n    }\n    // 4.扣减余额 update tb_user set balance = balance - ?\n    int remainBalance = user.getBalance() - money;\n    lambdaUpdate()\n            .set(User::getBalance, remainBalance) // 更新余额\n            .set(remainBalance == 0, User::getStatus, 2) // 动态判断，是否更新status\n            .eq(User::getId, id)\n            .eq(User::getBalance, user.getBalance()) // 乐观锁\n            .update();\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235492-n96mbfk","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235492-n96mbfk","updated":"20241026235492"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"2.3.4.批量新增"}]},{"ID":"20241026235493-n2q0ygm","Type":"NodeParagraph","Properties":{"id":"20241026235493-n2q0ygm","updated":"20241026235493"},"Children":[{"Type":"NodeText","Data":"IService中的批量新增功能使用起来非常方便，但有一点注意事项，我们先来测试一下。 首先我们测试逐条插入数据："}]},{"ID":"20241026235494-4f69fv8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235494-4f69fv8","updated":"20241026235494"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testSaveOneByOne() {\n    long b = System.currentTimeMillis();\n    for (int i = 1; i \u003c= 100000; i++) {\n        userService.save(buildUser(i));\n    }\n    long e = System.currentTimeMillis();\n    System.out.println(\"耗时：\" + (e - b));\n}\n\nprivate User buildUser(int i) {\n    User user = new User();\n    user.setUsername(\"user_\" + i);\n    user.setPassword(\"123\");\n    user.setPhone(\"\" + (18688190000L + i));\n    user.setBalance(2000);\n    user.setInfo(\"{\\\"age\\\": 24, \\\"intro\\\": \\\"英文老师\\\", \\\"gender\\\": \\\"female\\\"}\");\n    user.setCreateTime(LocalDateTime.now());\n    user.setUpdateTime(user.getCreateTime());\n    return user;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235495-ym3ouqc","Type":"NodeParagraph","Properties":{"id":"20241026235495-ym3ouqc","updated":"20241026235495"},"Children":[{"Type":"NodeText","Data":"执行结果如下："}]},{"ID":"20241026235496-kb3xfd5","Type":"NodeParagraph","Properties":{"id":"20241026235496-kb3xfd5","updated":"20241026235496"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007824-20241027000203-ih1evd7.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235497-vtqx7rc","Type":"NodeParagraph","Properties":{"id":"20241026235497-vtqx7rc","updated":"20241026235497"},"Children":[{"Type":"NodeText","Data":"可以看到速度非常慢。"}]},{"ID":"20241026235498-q3i3p9z","Type":"NodeParagraph","Properties":{"id":"20241026235498-q3i3p9z","updated":"20241026235498"},"Children":[{"Type":"NodeText","Data":"然后再试试MybatisPlus的批处理："}]},{"ID":"20241026235499-lbhartw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235499-lbhartw","updated":"20241026235499"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testSaveBatch() {\n    // 准备10万条数据\n    List\u003cUser\u003e list = new ArrayList\u003c\u003e(1000);\n    long b = System.currentTimeMillis();\n    for (int i = 1; i \u003c= 100000; i++) {\n        list.add(buildUser(i));\n        // 每1000条批量插入一次\n        if (i % 1000 == 0) {\n            userService.saveBatch(list);\n            list.clear();\n        }\n    }\n    long e = System.currentTimeMillis();\n    System.out.println(\"耗时：\" + (e - b));\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235500-n9ss60n","Type":"NodeParagraph","Properties":{"id":"20241026235500-n9ss60n","updated":"20241026235500"},"Children":[{"Type":"NodeText","Data":"执行最终耗时如下："}]},{"ID":"20241026235501-12yjich","Type":"NodeParagraph","Properties":{"id":"20241026235501-12yjich","updated":"20241026235501"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007825-20241027000203-edwd29e.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235502-4b5hdxc","Type":"NodeParagraph","Properties":{"id":"20241026235502-4b5hdxc","updated":"20241026235502"},"Children":[{"Type":"NodeText","Data":"可以看到使用了批处理以后，比逐条新增效率提高了10倍左右，性能还是不错的。"}]},{"ID":"20241026235503-0yjwi09","Type":"NodeParagraph","Properties":{"id":"20241026235503-0yjwi09","updated":"20241026235503"},"Children":[{"Type":"NodeText","Data":"不过，我们简单查看一下"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"MybatisPlus"},{"Type":"NodeText","Data":"源码："}]},{"ID":"20241026235504-7yu6hc0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235504-7yu6hc0","updated":"20241026235504"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Transactional(rollbackFor = Exception.class)\n@Override\npublic boolean saveBatch(Collection\u003cT\u003e entityList, int batchSize) {\n    String sqlStatement = getSqlStatement(SqlMethod.INSERT_ONE);\n    return executeBatch(entityList, batchSize, (sqlSession, entity) -\u003e sqlSession.insert(sqlStatement, entity));\n}\n// ...SqlHelper\npublic static \u003cE\u003e boolean executeBatch(Class\u003c?\u003e entityClass, Log log, Collection\u003cE\u003e list, int batchSize, BiConsumer\u003cSqlSession, E\u003e consumer) {\n    Assert.isFalse(batchSize \u003c 1, \"batchSize must not be less than one\");\n    return !CollectionUtils.isEmpty(list) \u0026\u0026 executeBatch(entityClass, log, sqlSession -\u003e {\n        int size = list.size();\n        int idxLimit = Math.min(batchSize, size);\n        int i = 1;\n        for (E element : list) {\n            consumer.accept(sqlSession, element);\n            if (i == idxLimit) {\n                sqlSession.flushStatements();\n                idxLimit = Math.min(idxLimit + batchSize, size);\n            }\n            i++;\n        }\n    });\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235505-8u93266","Type":"NodeParagraph","Properties":{"id":"20241026235505-8u93266","updated":"20241026235505"},"Children":[{"Type":"NodeText","Data":"可以发现其实"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"MybatisPlus"},{"Type":"NodeText","Data":"的批处理是基于"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PrepareStatement"},{"Type":"NodeText","Data":"的预编译模式，然后批量提交，最终在数据库执行时还是会有多条insert语句，逐条插入数据。SQL类似这样："}]},{"ID":"20241026235506-0skd5l1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"U1FM","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235506-0skd5l1","updated":"20241026235506"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"U1FM","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"Preparing: INSERT INTO user ( username, password, phone, info, balance, create_time, update_time ) VALUES ( ?, ?, ?, ?, ?, ?, ? )\nParameters: user_1, 123, 18688190001, \"\", 2000, 2023-07-01, 2023-07-01\nParameters: user_2, 123, 18688190002, \"\", 2000, 2023-07-01, 2023-07-01\nParameters: user_3, 123, 18688190003, \"\", 2000, 2023-07-01, 2023-07-01\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235507-5qu923t","Type":"NodeParagraph","Properties":{"id":"20241026235507-5qu923t","updated":"20241026235507"},"Children":[{"Type":"NodeText","Data":"而如果想要得到最佳性能，最好是将多条SQL合并为一条，像这样："}]},{"ID":"20241026235508-jcp8jlu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"U1FM","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235508-jcp8jlu","updated":"20241026235508"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"U1FM","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"INSERT INTO user ( username, password, phone, info, balance, create_time, update_time )\nVALUES \n(user_1, 123, 18688190001, \"\", 2000, 2023-07-01, 2023-07-01),\n(user_2, 123, 18688190002, \"\", 2000, 2023-07-01, 2023-07-01),\n(user_3, 123, 18688190003, \"\", 2000, 2023-07-01, 2023-07-01),\n(user_4, 123, 18688190004, \"\", 2000, 2023-07-01, 2023-07-01);\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235509-0e06dq1","Type":"NodeParagraph","Properties":{"id":"20241026235509-0e06dq1","updated":"20241026235509"},"Children":[{"Type":"NodeText","Data":"该怎么做呢？"}]},{"ID":"20241026235510-zbxi885","Type":"NodeParagraph","Properties":{"id":"20241026235510-zbxi885","updated":"20241026235510"},"Children":[{"Type":"NodeText","Data":"MySQL的客户端连接参数中有这样的一个参数："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"rewriteBatchedStatements"},{"Type":"NodeText","Data":"。顾名思义，就是重写批处理的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"statement"},{"Type":"NodeText","Data":"语句。参考文档："}]},{"ID":"20241026235511-xexpjb7","Type":"NodeParagraph","Properties":{"id":"20241026235511-xexpjb7","updated":"20241026235511"},"Children":[{"Type":"NodeText","Data":"https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-connp-props-performance-extensions.html#cj-conn-prop_rewriteBatchedStatements"}]},{"ID":"20241026235512-nr3k846","Type":"NodeParagraph","Properties":{"id":"20241026235512-nr3k846","updated":"20241026235512"},"Children":[{"Type":"NodeText","Data":"这个参数的默认值是false，我们需要修改连接参数，将其配置为true"}]},{"ID":"20241026235513-342z56m","Type":"NodeParagraph","Properties":{"id":"20241026235513-342z56m","updated":"20241026235513"},"Children":[{"Type":"NodeText","Data":"修改项目中的application.yml文件，在jdbc的url后面添加参数"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"\u0026amp;rewriteBatchedStatements=true"},{"Type":"NodeText","Data":":"}]},{"ID":"20241026235514-lczrncj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WUFNTA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235514-lczrncj","updated":"20241026235514"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WUFNTA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"spring:\n  datasource:\n    url: jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true\u0026characterEncoding=UTF-8\u0026autoReconnect=true\u0026serverTimezone=Asia/Shanghai\u0026rewriteBatchedStatements=true\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    username: root\n    password: MySQL123\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235515-yyhlkjb","Type":"NodeParagraph","Properties":{"id":"20241026235515-yyhlkjb","updated":"20241026235515"},"Children":[{"Type":"NodeText","Data":"再次测试插入10万条数据，可以发现速度有非常明显的提升："}]},{"ID":"20241026235516-rlkmceo","Type":"NodeParagraph","Properties":{"id":"20241026235516-rlkmceo","updated":"20241026235516"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007826-20241027000203-7d8a182.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235517-piigvt7","Type":"NodeParagraph","Properties":{"id":"20241026235517-piigvt7","updated":"20241026235517"},"Children":[{"Type":"NodeText","Data":"在"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"ClientPreparedStatement"},{"Type":"NodeText","Data":"的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"executeBatchInternal"},{"Type":"NodeText","Data":"中，有判断"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"rewriteBatchedStatements"},{"Type":"NodeText","Data":"值是否为true并重写SQL的功能："}]},{"ID":"20241026235518-d0ip8r8","Type":"NodeParagraph","Properties":{"id":"20241026235518-d0ip8r8","updated":"20241026235518"},"Children":[{"Type":"NodeText","Data":"最终，SQL被重写了："}]},{"ID":"20241026235519-aa7uaqw","Type":"NodeParagraph","Properties":{"id":"20241026235519-aa7uaqw","updated":"20241026235519"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007827-20241027000203-vgmpoxf.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235520-3zq8lky","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241026235520-3zq8lky","updated":"20241026235520"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.扩展功能"}]},{"ID":"20241026235521-8cnodoa","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235521-8cnodoa","updated":"20241026235521"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.1.代码生成"}]},{"ID":"20241026235522-3cytb30","Type":"NodeParagraph","Properties":{"id":"20241026235522-3cytb30","updated":"20241026235522"},"Children":[{"Type":"NodeText","Data":"在使用MybatisPlus以后，基础的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Mapper"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Service"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PO"},{"Type":"NodeText","Data":"代码相对固定，重复编写也比较麻烦。因此MybatisPlus官方提供了代码生成器根据数据库表结构生成"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PO"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Mapper"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Service"},{"Type":"NodeText","Data":"等相关代码。只不过代码生成器同样要编码使用，也很麻烦。"}]},{"ID":"20241026235523-m6vsneo","Type":"NodeParagraph","Properties":{"id":"20241026235523-m6vsneo","updated":"20241026235523"},"Children":[{"Type":"NodeText","Data":"这里推荐大家使用一款"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"MybatisPlus"},{"Type":"NodeText","Data":"的插件，它可以基于图形化界面完成"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"MybatisPlus"},{"Type":"NodeText","Data":"的代码生成，非常简单。"}]},{"ID":"20241026235524-4bfe9dl","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235524-4bfe9dl","updated":"20241026235524"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.1.1.安装插件"}]},{"ID":"20241026235525-6kxgnom","Type":"NodeParagraph","Properties":{"id":"20241026235525-6kxgnom","updated":"20241026235525"},"Children":[{"Type":"NodeText","Data":"在"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Idea"},{"Type":"NodeText","Data":"的plugins市场中搜索并安装"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"MyBatisPlus"},{"Type":"NodeText","Data":"插件："}]},{"ID":"20241026235526-362tmow","Type":"NodeParagraph","Properties":{"id":"20241026235526-362tmow","updated":"20241026235526"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007828-20241027000203-rsra1q7.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235527-q4wpow4","Type":"NodeParagraph","Properties":{"id":"20241026235527-q4wpow4","updated":"20241026235527"},"Children":[{"Type":"NodeText","Data":"然后重启你的Idea即可使用。"}]},{"ID":"20241026235528-kfj3ddp","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235528-kfj3ddp","updated":"20241026235528"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.1.2.使用"}]},{"ID":"20241026235529-v9sd59n","Type":"NodeParagraph","Properties":{"id":"20241026235529-v9sd59n","updated":"20241026235529"},"Children":[{"Type":"NodeText","Data":"刚好数据库中还有一张address表尚未生成对应的实体和mapper等基础代码。我们利用插件生成一下。 首先需要配置数据库地址，在Idea顶部菜单中，找到"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"other"},{"Type":"NodeText","Data":"，选择"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Config Database"},{"Type":"NodeText","Data":"："}]},{"ID":"20241026235530-0ysvucn","Type":"NodeParagraph","Properties":{"id":"20241026235530-0ysvucn","updated":"20241026235530"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007829-20241027000203-ujswjs4.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235531-34uwoz0","Type":"NodeParagraph","Properties":{"id":"20241026235531-34uwoz0","updated":"20241026235531"},"Children":[{"Type":"NodeText","Data":"在弹出的窗口中填写数据库连接的基本信息："}]},{"ID":"20241026235532-rr8ubfi","Type":"NodeParagraph","Properties":{"id":"20241026235532-rr8ubfi","updated":"20241026235532"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007830-20241027000203-krhd5rw.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235533-4oj41re","Type":"NodeParagraph","Properties":{"id":"20241026235533-4oj41re","updated":"20241026235533"},"Children":[{"Type":"NodeText","Data":"点击OK保存。"}]},{"ID":"20241026235534-55tdzvg","Type":"NodeParagraph","Properties":{"id":"20241026235534-55tdzvg","updated":"20241026235534"},"Children":[{"Type":"NodeText","Data":"然后再次点击Idea顶部菜单中的other，然后选择"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Code Generator"},{"Type":"NodeText","Data":":"}]},{"ID":"20241026235535-p3hmek4","Type":"NodeParagraph","Properties":{"id":"20241026235535-p3hmek4","updated":"20241026235535"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007831-20241027000203-5dnf5o7.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235536-zdhk0g6","Type":"NodeParagraph","Properties":{"id":"20241026235536-zdhk0g6","updated":"20241026235536"},"Children":[{"Type":"NodeText","Data":"在弹出的表单中填写信息："}]},{"ID":"20241026235537-2g2qxdp","Type":"NodeParagraph","Properties":{"id":"20241026235537-2g2qxdp","updated":"20241026235537"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007832-20241027000203-cx1d30r.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235538-23e7gj7","Type":"NodeParagraph","Properties":{"id":"20241026235538-23e7gj7","updated":"20241026235538"},"Children":[{"Type":"NodeText","Data":"最终，代码自动生成到指定的位置了："}]},{"ID":"20241026235539-r2z576y","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235539-r2z576y","updated":"20241026235539"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.2.静态工具"}]},{"ID":"20241026235540-tk5ge4j","Type":"NodeParagraph","Properties":{"id":"20241026235540-tk5ge4j","updated":"20241026235540"},"Children":[{"Type":"NodeText","Data":"有的时候Service之间也会相互调用，为了避免出现循环依赖问题，MybatisPlus提供一个静态工具类："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Db"},{"Type":"NodeText","Data":"，其中的一些静态方法与"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"IService"},{"Type":"NodeText","Data":"中方法签名基本一致，也可以帮助我们实现CRUD功能："}]},{"ID":"20241026235541-kwy3713","Type":"NodeParagraph","Properties":{"id":"20241026235541-kwy3713","updated":"20241026235541"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007933-20241027000203-7dn7d4m.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235542-kr29drk","Type":"NodeParagraph","Properties":{"id":"20241026235542-kr29drk","updated":"20241026235542"},"Children":[{"Type":"NodeText","Data":"示例："}]},{"ID":"20241026235543-m8fkc8t","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235543-m8fkc8t","updated":"20241026235543"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testDbGet() {\n    User user = Db.getById(1L, User.class);\n    System.out.println(user);\n}\n\n@Test\nvoid testDbList() {\n    // 利用Db实现复杂条件查询\n    List\u003cUser\u003e list = Db.lambdaQuery(User.class)\n            .like(User::getUsername, \"o\")\n            .ge(User::getBalance, 1000)\n            .list();\n    list.forEach(System.out::println);\n}\n\n@Test\nvoid testDbUpdate() {\n    Db.lambdaUpdate(User.class)\n            .set(User::getBalance, 2000)\n            .eq(User::getUsername, \"Rose\");\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235544-njx1e11","Type":"NodeParagraph","Properties":{"id":"20241026235544-njx1e11","updated":"20241026235544"},"Children":[{"Type":"NodeText","Data":"需求：改造根据id用户查询的接口，查询用户的同时返回用户收货地址列表"}]},{"ID":"20241026235545-ofujy3c","Type":"NodeParagraph","Properties":{"id":"20241026235545-ofujy3c","updated":"20241026235545"},"Children":[{"Type":"NodeText","Data":"首先，我们要添加一个收货地址的VO对象："}]},{"ID":"20241026235546-jqi1ma1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235546-jqi1ma1","updated":"20241026235546"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.domain.vo;\n\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.Data;\n\n@Data\n@ApiModel(description = \"收货地址VO\")\npublic class AddressVO{\n\n    @ApiModelProperty(\"id\")\n    private Long id;\n\n    @ApiModelProperty(\"用户ID\")\n    private Long userId;\n\n    @ApiModelProperty(\"省\")\n    private String province;\n\n    @ApiModelProperty(\"市\")\n    private String city;\n\n    @ApiModelProperty(\"县/区\")\n    private String town;\n\n    @ApiModelProperty(\"手机\")\n    private String mobile;\n\n    @ApiModelProperty(\"详细地址\")\n    private String street;\n\n    @ApiModelProperty(\"联系人\")\n    private String contact;\n\n    @ApiModelProperty(\"是否是默认 1默认 0否\")\n    private Boolean isDefault;\n\n    @ApiModelProperty(\"备注\")\n    private String notes;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235547-hitpb1o","Type":"NodeParagraph","Properties":{"id":"20241026235547-hitpb1o","updated":"20241026235547"},"Children":[{"Type":"NodeText","Data":"然后，改造原来的UserVO，添加一个地址属性："}]},{"ID":"20241026235548-82m1f2f","Type":"NodeParagraph","Properties":{"id":"20241026235548-82m1f2f","updated":"20241026235548"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007934-20241027000203-d0jro7j.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235549-tn775dm","Type":"NodeParagraph","Properties":{"id":"20241026235549-tn775dm","updated":"20241026235549"},"Children":[{"Type":"NodeText","Data":"接下来，修改UserController中根据id查询用户的业务接口："}]},{"ID":"20241026235550-5cathl5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235550-5cathl5","updated":"20241026235550"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@GetMapping(\"/{id}\")\n@ApiOperation(\"根据id查询用户\")\npublic UserVO queryUserById(@PathVariable(\"id\") Long userId){\n    // 基于自定义service方法查询\n    return userService.queryUserAndAddressById(userId);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235551-7jc25ya","Type":"NodeParagraph","Properties":{"id":"20241026235551-7jc25ya","updated":"20241026235551"},"Children":[{"Type":"NodeText","Data":"由于查询业务复杂，所以要在service层来实现。首先在IUserService中定义方法："}]},{"ID":"20241026235552-4ac5qzg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235552-4ac5qzg","updated":"20241026235552"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.service;\n\nimport com.baomidou.mybatisplus.extension.service.IService;\nimport com.itheima.mp.domain.po.User;\nimport com.itheima.mp.domain.vo.UserVO;\n\npublic interface IUserService extends IService\u003cUser\u003e {\n    void deduct(Long id, Integer money);\n\n    UserVO queryUserAndAddressById(Long userId);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235553-vhxj9yy","Type":"NodeParagraph","Properties":{"id":"20241026235553-vhxj9yy","updated":"20241026235553"},"Children":[{"Type":"NodeText","Data":"然后，在UserServiceImpl中实现该方法："}]},{"ID":"20241026235554-m40b6xe","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235554-m40b6xe","updated":"20241026235554"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Override\npublic UserVO queryUserAndAddressById(Long userId) {\n    // 1.查询用户\n    User user = getById(userId);\n    if (user == null) {\n        return null;\n    }\n    // 2.查询收货地址\n    List\u003cAddress\u003e addresses = Db.lambdaQuery(Address.class)\n            .eq(Address::getUserId, userId)\n            .list();\n    // 3.处理vo\n    UserVO userVO = BeanUtil.copyProperties(user, UserVO.class);\n    userVO.setAddresses(BeanUtil.copyToList(addresses, AddressVO.class));\n    return userVO;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235555-lqugl68","Type":"NodeParagraph","Properties":{"id":"20241026235555-lqugl68","updated":"20241026235555"},"Children":[{"Type":"NodeText","Data":"在查询地址时，我们采用了Db的静态方法，因此避免了注入AddressService，减少了循环依赖的风险。"}]},{"ID":"20241026235556-bgjqklt","Type":"NodeParagraph","Properties":{"id":"20241026235556-bgjqklt","updated":"20241026235556"},"Children":[{"Type":"NodeText","Data":"再来实现一个功能："}]},{"ID":"20241026235557-r2sna0h","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":3,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235557-r2sna0h","updated":"20241026235557"},"Children":[{"ID":"20241026235558-grt27gr","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":3,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235558-grt27gr","updated":"20241026235558"},"Children":[{"ID":"20241026235559-f5dgpw9","Type":"NodeParagraph","Properties":{"id":"20241026235559-f5dgpw9","updated":"20241026235559"},"Children":[{"Type":"NodeText","Data":"根据id批量查询用户，并查询出用户对应的所有地址"}]}]}]},{"ID":"20241026235560-y9w7obl","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235560-y9w7obl","updated":"20241026235560"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.3.逻辑删除"}]},{"ID":"20241026235561-ywu9p5m","Type":"NodeParagraph","Properties":{"id":"20241026235561-ywu9p5m","updated":"20241026235561"},"Children":[{"Type":"NodeText","Data":"对于一些比较重要的数据，我们往往会采用逻辑删除的方案，即："}]},{"ID":"20241026235562-pr6krju","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235562-pr6krju","updated":"20241026235562"},"Children":[{"ID":"20241026235563-gr3ja3b","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235563-gr3ja3b","updated":"20241026235563"},"Children":[{"ID":"20241026235564-y5xc7g3","Type":"NodeParagraph","Properties":{"id":"20241026235564-y5xc7g3","updated":"20241026235564"},"Children":[{"Type":"NodeText","Data":"在表中添加一个字段标记数据是否被删除"}]}]},{"ID":"20241026235565-8w19tl1","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235565-8w19tl1","updated":"20241026235565"},"Children":[{"ID":"20241026235566-4qu5boo","Type":"NodeParagraph","Properties":{"id":"20241026235566-4qu5boo","updated":"20241026235566"},"Children":[{"Type":"NodeText","Data":"当删除数据时把标记置为true"}]}]},{"ID":"20241026235567-fa8odhe","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235567-fa8odhe","updated":"20241026235567"},"Children":[{"ID":"20241026235568-g3muwn6","Type":"NodeParagraph","Properties":{"id":"20241026235568-g3muwn6","updated":"20241026235568"},"Children":[{"Type":"NodeText","Data":"查询时过滤掉标记为true的数据"}]}]}]},{"ID":"20241026235569-6f9zxu2","Type":"NodeParagraph","Properties":{"id":"20241026235569-6f9zxu2","updated":"20241026235569"},"Children":[{"Type":"NodeText","Data":"一旦采用了逻辑删除，所有的查询和删除逻辑都要跟着变化，非常麻烦。"}]},{"ID":"20241026235570-gcy1ra2","Type":"NodeParagraph","Properties":{"id":"20241026235570-gcy1ra2","updated":"20241026235570"},"Children":[{"Type":"NodeText","Data":"为了解决这个问题，MybatisPlus就添加了对逻辑删除的支持。"}]},{"ID":"20241026235571-8n8oz58","Type":"NodeParagraph","Properties":{"id":"20241026235571-8n8oz58","updated":"20241026235571"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"注意"},{"Type":"NodeText","Data":"，只有MybatisPlus生成的SQL语句才支持自动的逻辑删除，自定义SQL需要自己手动处理逻辑删除。"}]},{"ID":"20241026235572-imnm5go","Type":"NodeParagraph","Properties":{"id":"20241026235572-imnm5go","updated":"20241026235572"},"Children":[{"Type":"NodeText","Data":"例如，我们给"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"address"},{"Type":"NodeText","Data":"表添加一个逻辑删除字段："}]},{"ID":"20241026235573-tz81nvd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"U1FM","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235573-tz81nvd","updated":"20241026235573"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"U1FM","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"alter table address add deleted bit default b'0' null comment '逻辑删除';\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235574-88s7flk","Type":"NodeParagraph","Properties":{"id":"20241026235574-88s7flk","updated":"20241026235574"},"Children":[{"Type":"NodeText","Data":"然后给"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Address"},{"Type":"NodeText","Data":"实体添加"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"deleted"},{"Type":"NodeText","Data":"字段："}]},{"ID":"20241026235575-au7jsxr","Type":"NodeParagraph","Properties":{"id":"20241026235575-au7jsxr","updated":"20241026235575"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007935-20241027000203-1knrij2.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235576-6kh5pat","Type":"NodeParagraph","Properties":{"id":"20241026235576-6kh5pat","updated":"20241026235576"},"Children":[{"Type":"NodeText","Data":"接下来，我们要在"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"application.yml"},{"Type":"NodeText","Data":"中配置逻辑删除字段："}]},{"ID":"20241026235577-ztnx6j7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WUFNTA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235577-ztnx6j7","updated":"20241026235577"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WUFNTA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"mybatis-plus:\n  global-config:\n    db-config:\n      logic-delete-field: deleted # 全局逻辑删除的实体字段名(since 3.3.0,配置后可以忽略不配置步骤2)\n      logic-delete-value: 1 # 逻辑已删除值(默认为 1)\n      logic-not-delete-value: 0 # 逻辑未删除值(默认为 0)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235578-qyvegkd","Type":"NodeParagraph","Properties":{"id":"20241026235578-qyvegkd","updated":"20241026235578"},"Children":[{"Type":"NodeText","Data":"测试： 首先，我们执行一个删除操作："}]},{"ID":"20241026235579-6d6l5ir","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235579-6d6l5ir","updated":"20241026235579"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testDeleteByLogic() {\n    // 删除方法与以前没有区别\n    addressService.removeById(59L);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235580-1239kc8","Type":"NodeParagraph","Properties":{"id":"20241026235580-1239kc8","updated":"20241026235580"},"Children":[{"Type":"NodeText","Data":"方法与普通删除一模一样，但是底层的SQL逻辑变了："}]},{"ID":"20241026235581-w68vbww","Type":"NodeParagraph","Properties":{"id":"20241026235581-w68vbww","updated":"20241026235581"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007936-20241027000203-hka69ux.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235582-gmz1eyu","Type":"NodeParagraph","Properties":{"id":"20241026235582-gmz1eyu","updated":"20241026235582"},"Children":[{"Type":"NodeText","Data":"查询一下试试："}]},{"ID":"20241026235583-wn24anl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235583-wn24anl","updated":"20241026235583"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testQuery() {\n    List\u003cAddress\u003e list = addressService.list();\n    list.forEach(System.out::println);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235584-l3s1hk6","Type":"NodeParagraph","Properties":{"id":"20241026235584-l3s1hk6","updated":"20241026235584"},"Children":[{"Type":"NodeText","Data":"会发现id为59的确实没有查询出来，而且SQL中也对逻辑删除字段做了判断："}]},{"ID":"20241026235585-rjdhbmj","Type":"NodeParagraph","Properties":{"id":"20241026235585-rjdhbmj","updated":"20241026235585"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007937-20241027000203-35godu9.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235586-4ia9xf3","Type":"NodeParagraph","Properties":{"id":"20241026235586-4ia9xf3","updated":"20241026235586"},"Children":[{"Type":"NodeText","Data":"综上， 开启了逻辑删除功能以后，我们就可以像普通删除一样做CRUD，基本不用考虑代码逻辑问题。还是非常方便的。"}]},{"ID":"20241026235587-70i79t8","Type":"NodeParagraph","Properties":{"id":"20241026235587-70i79t8","updated":"20241026235587"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"注意"},{"Type":"NodeText","Data":"： 逻辑删除本身也有自己的问题，比如："}]},{"ID":"20241026235588-xxv9d7n","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235588-xxv9d7n","updated":"20241026235588"},"Children":[{"ID":"20241026235589-1ktg0sa","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235589-1ktg0sa","updated":"20241026235589"},"Children":[{"ID":"20241026235590-x6k94bz","Type":"NodeParagraph","Properties":{"id":"20241026235590-x6k94bz","updated":"20241026235590"},"Children":[{"Type":"NodeText","Data":"会导致数据库表垃圾数据越来越多，从而影响查询效率"}]}]},{"ID":"20241026235591-p7johy0","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235591-p7johy0","updated":"20241026235591"},"Children":[{"ID":"20241026235592-vapflpw","Type":"NodeParagraph","Properties":{"id":"20241026235592-vapflpw","updated":"20241026235592"},"Children":[{"Type":"NodeText","Data":"SQL中全都需要对逻辑删除字段做判断，影响查询效率"}]}]}]},{"ID":"20241026235593-xnc3y9b","Type":"NodeParagraph","Properties":{"id":"20241026235593-xnc3y9b","updated":"20241026235593"},"Children":[{"Type":"NodeText","Data":"因此，我不太推荐采用逻辑删除功能，如果数据不能删除，可以采用把数据迁移到其它表的办法。"}]},{"ID":"20241026235594-5qna4gq","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235594-5qna4gq","updated":"20241026235594"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.3.通用枚举"}]},{"ID":"20241026235595-rv9i5cy","Type":"NodeParagraph","Properties":{"id":"20241026235595-rv9i5cy","updated":"20241026235595"},"Children":[{"Type":"NodeText","Data":"User类中有一个用户状态字段："}]},{"ID":"20241026235596-ifc3h5z","Type":"NodeParagraph","Properties":{"id":"20241026235596-ifc3h5z","updated":"20241026235596"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007938-20241027000203-hmk9j3f.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235597-3g7h3jv","Type":"NodeParagraph","Properties":{"id":"20241026235597-3g7h3jv","updated":"20241026235597"},"Children":[{"Type":"NodeText","Data":"像这种字段我们一般会定义一个枚举，做业务判断的时候就可以直接基于枚举做比较。但是我们数据库采用的是"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"int"},{"Type":"NodeText","Data":"类型，对应的PO也是"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Integer"},{"Type":"NodeText","Data":"。因此业务操作时必须手动把"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"枚举"},{"Type":"NodeText","Data":"与"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Integer"},{"Type":"NodeText","Data":"转换，非常麻烦。"}]},{"ID":"20241026235598-ik3i2qr","Type":"NodeParagraph","Properties":{"id":"20241026235598-ik3i2qr","updated":"20241026235598"},"Children":[{"Type":"NodeText","Data":"因此，MybatisPlus提供了一个处理枚举的类型转换器，可以帮我们"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"把枚举类型与数据库类型自动转换"},{"Type":"NodeText","Data":"。"}]},{"ID":"20241026235599-7zuh15f","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235599-7zuh15f","updated":"20241026235599"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.3.1.定义枚举"}]},{"ID":"20241026235600-7l56iwo","Type":"NodeParagraph","Properties":{"id":"20241026235600-7l56iwo","updated":"20241026235600"},"Children":[{"Type":"NodeText","Data":"我们定义一个用户状态的枚举："}]},{"ID":"20241026235601-e8z30ny","Type":"NodeParagraph","Properties":{"id":"20241026235601-e8z30ny","updated":"20241026235601"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007939-20241027000203-c4btk6h.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235602-n2usck2","Type":"NodeParagraph","Properties":{"id":"20241026235602-n2usck2","updated":"20241026235602"},"Children":[{"Type":"NodeText","Data":"代码如下："}]},{"ID":"20241026235603-9hzh1cc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235603-9hzh1cc","updated":"20241026235603"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.enums;\n\nimport com.baomidou.mybatisplus.annotation.EnumValue;\nimport lombok.Getter;\n\n@Getter\npublic enum UserStatus {\n    NORMAL(1, \"正常\"),\n    FREEZE(2, \"冻结\")\n    ;\n    private final int value;\n    private final String desc;\n\n    UserStatus(int value, String desc) {\n        this.value = value;\n        this.desc = desc;\n    }\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235604-xj397pr","Type":"NodeParagraph","Properties":{"id":"20241026235604-xj397pr","updated":"20241026235604"},"Children":[{"Type":"NodeText","Data":"然后把"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"User"},{"Type":"NodeText","Data":"类中的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"status"},{"Type":"NodeText","Data":"字段改为"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UserStatus"},{"Type":"NodeText","Data":" 类型："}]},{"ID":"20241026235605-t58mqoo","Type":"NodeParagraph","Properties":{"id":"20241026235605-t58mqoo","updated":"20241026235605"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007940-20241027000203-29rogbb.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235606-tbol0b4","Type":"NodeParagraph","Properties":{"id":"20241026235606-tbol0b4","updated":"20241026235606"},"Children":[{"Type":"NodeText","Data":"要让"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"MybatisPlus"},{"Type":"NodeText","Data":"处理枚举与数据库类型自动转换，我们必须告诉"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"MybatisPlus"},{"Type":"NodeText","Data":"，枚举中的哪个字段的值作为数据库值。 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"MybatisPlus"},{"Type":"NodeText","Data":"提供了"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"@EnumValue"},{"Type":"NodeText","Data":"注解来标记枚举属性："}]},{"ID":"20241026235607-d1x4k1o","Type":"NodeParagraph","Properties":{"id":"20241026235607-d1x4k1o","updated":"20241026235607"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007941-20241027000203-d86omt9.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235608-0addxo5","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235608-0addxo5","updated":"20241026235608"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.3.2.配置枚举处理器"}]},{"ID":"20241026235609-5cguy2z","Type":"NodeParagraph","Properties":{"id":"20241026235609-5cguy2z","updated":"20241026235609"},"Children":[{"Type":"NodeText","Data":"在application.yaml文件中添加配置："}]},{"ID":"20241026235610-9628dfq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WUFNTA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235610-9628dfq","updated":"20241026235610"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WUFNTA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"mybatis-plus:\n  configuration:\n    default-enum-type-handler: com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235611-nqn5xtf","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235611-nqn5xtf","updated":"20241026235611"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.3.3.测试"}]},{"ID":"20241026235612-w51fg4a","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235612-w51fg4a","updated":"20241026235612"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testService() {\n    List\u003cUser\u003e list = userService.list();\n    list.forEach(System.out::println);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235613-g852i2e","Type":"NodeParagraph","Properties":{"id":"20241026235613-g852i2e","updated":"20241026235613"},"Children":[{"Type":"NodeText","Data":"最终，查询出的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"User"},{"Type":"NodeText","Data":"类的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"status"},{"Type":"NodeText","Data":"字段会是枚举类型："}]},{"ID":"20241026235614-x925n7d","Type":"NodeParagraph","Properties":{"id":"20241026235614-x925n7d","updated":"20241026235614"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007942-20241027000203-j9y9b76.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235615-wdlpkv9","Type":"NodeParagraph","Properties":{"id":"20241026235615-wdlpkv9","updated":"20241026235615"},"Children":[{"Type":"NodeText","Data":"同时，为了使页面查询结果也是枚举格式，我们需要修改UserVO中的status属性："}]},{"ID":"20241026235616-yxyx0pv","Type":"NodeParagraph","Properties":{"id":"20241026235616-yxyx0pv","updated":"20241026235616"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007943-20241027000203-yzib443.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235617-p0wxutn","Type":"NodeParagraph","Properties":{"id":"20241026235617-p0wxutn","updated":"20241026235617"},"Children":[{"Type":"NodeText","Data":"并且，在UserStatus枚举中通过"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"@JsonValue"},{"Type":"NodeText","Data":"注解标记JSON序列化时展示的字段："}]},{"ID":"20241026235618-rz1bvgo","Type":"NodeParagraph","Properties":{"id":"20241026235618-rz1bvgo","updated":"20241026235618"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007944-20241027000203-qqtzysl.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235619-0n5v87m","Type":"NodeParagraph","Properties":{"id":"20241026235619-0n5v87m","updated":"20241026235619"},"Children":[{"Type":"NodeText","Data":"最后，在页面查询，结果如下："}]},{"ID":"20241026235620-600sw8s","Type":"NodeParagraph","Properties":{"id":"20241026235620-600sw8s","updated":"20241026235620"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007945-20241027000203-prck8er.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235621-f6pmld4","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235621-f6pmld4","updated":"20241026235621"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"3.4.JSON类型处理器"}]},{"ID":"20241026235622-4znelc4","Type":"NodeParagraph","Properties":{"id":"20241026235622-4znelc4","updated":"20241026235622"},"Children":[{"Type":"NodeText","Data":"数据库的user表中有一个"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"info"},{"Type":"NodeText","Data":"字段，是JSON类型："}]},{"ID":"20241026235623-tdzntst","Type":"NodeParagraph","Properties":{"id":"20241026235623-tdzntst","updated":"20241026235623"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007946-20241027000203-clmwwzw.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235624-zg1k7us","Type":"NodeParagraph","Properties":{"id":"20241026235624-zg1k7us","updated":"20241026235624"},"Children":[{"Type":"NodeText","Data":"格式像这样："}]},{"ID":"20241026235625-pwxibxv","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SlNPTg==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235625-pwxibxv","updated":"20241026235625"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SlNPTg==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"{\"age\": 20, \"intro\": \"佛系青年\", \"gender\": \"male\"}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235626-xwg3dtz","Type":"NodeParagraph","Properties":{"id":"20241026235626-xwg3dtz","updated":"20241026235626"},"Children":[{"Type":"NodeText","Data":"而目前"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"User"},{"Type":"NodeText","Data":"实体类中却是"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"String"},{"Type":"NodeText","Data":"类型："}]},{"ID":"20241026235627-94gkmi9","Type":"NodeParagraph","Properties":{"id":"20241026235627-94gkmi9","updated":"20241026235627"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007947-20241027000203-5hs1aoy.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235628-qurou2r","Type":"NodeParagraph","Properties":{"id":"20241026235628-qurou2r","updated":"20241026235628"},"Children":[{"Type":"NodeText","Data":"这样一来，我们要读取info中的属性时就非常不方便。如果要方便获取，info的类型最好是一个"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Map"},{"Type":"NodeText","Data":"或者实体类。"}]},{"ID":"20241026235629-q536vod","Type":"NodeParagraph","Properties":{"id":"20241026235629-q536vod","updated":"20241026235629"},"Children":[{"Type":"NodeText","Data":"而一旦我们把"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"info"},{"Type":"NodeText","Data":"改为"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"对象"},{"Type":"NodeText","Data":"类型，就需要在写入数据库时手动转为"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"String"},{"Type":"NodeText","Data":"，再读取数据库时，手动转换为"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"对象"},{"Type":"NodeText","Data":"，这会非常麻烦。"}]},{"ID":"20241026235630-uxm2grq","Type":"NodeParagraph","Properties":{"id":"20241026235630-uxm2grq","updated":"20241026235630"},"Children":[{"Type":"NodeText","Data":"因此MybatisPlus提供了很多特殊类型字段的类型处理器，解决特殊字段类型与数据库类型转换的问题。例如处理JSON就可以使用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"JacksonTypeHandler"},{"Type":"NodeText","Data":"处理器。"}]},{"ID":"20241026235631-y1u7ck2","Type":"NodeParagraph","Properties":{"id":"20241026235631-y1u7ck2","updated":"20241026235631"},"Children":[{"Type":"NodeText","Data":"接下来，我们就来看看这个处理器该如何使用。"}]},{"ID":"20241026235632-ic0c1y7","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235632-ic0c1y7","updated":"20241026235632"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.4.1.定义实体"}]},{"ID":"20241026235633-uxfrw3y","Type":"NodeParagraph","Properties":{"id":"20241026235633-uxfrw3y","updated":"20241026235633"},"Children":[{"Type":"NodeText","Data":"首先，我们定义一个单独实体类来与info字段的属性匹配："}]},{"ID":"20241026235634-qaaajq6","Type":"NodeParagraph","Properties":{"id":"20241026235634-qaaajq6","updated":"20241026235634"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007948-20241027000203-tr8udn6.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235635-vmivn5d","Type":"NodeParagraph","Properties":{"id":"20241026235635-vmivn5d","updated":"20241026235635"},"Children":[{"Type":"NodeText","Data":"代码如下："}]},{"ID":"20241026235636-ge3lvfe","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235636-ge3lvfe","updated":"20241026235636"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.domain.po;\n\nimport lombok.Data;\n\n@Data\npublic class UserInfo {\n    private Integer age;\n    private String intro;\n    private String gender;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235637-yka9e4h","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235637-yka9e4h","updated":"20241026235637"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.4.2.使用类型处理器"}]},{"ID":"20241026235638-98p6hff","Type":"NodeParagraph","Properties":{"id":"20241026235638-98p6hff","updated":"20241026235638"},"Children":[{"Type":"NodeText","Data":"接下来，将User类的info字段修改为UserInfo类型，并声明类型处理器："}]},{"ID":"20241026235639-9x2vpiv","Type":"NodeParagraph","Properties":{"id":"20241026235639-9x2vpiv","updated":"20241026235639"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007949-20241027000203-pzvmpvv.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235640-hizr5g8","Type":"NodeParagraph","Properties":{"id":"20241026235640-hizr5g8","updated":"20241026235640"},"Children":[{"Type":"NodeText","Data":"测试可以发现，所有数据都正确封装到UserInfo当中了："}]},{"ID":"20241026235641-ukrwxcj","Type":"NodeParagraph","Properties":{"id":"20241026235641-ukrwxcj","updated":"20241026235641"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007950-20241027000203-k0sagv0.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235642-t3bdgey","Type":"NodeParagraph","Properties":{"id":"20241026235642-t3bdgey","updated":"20241026235642"},"Children":[{"Type":"NodeText","Data":"同时，为了让页面返回的结果也以对象格式返回，我们要修改UserVO中的info字段："}]},{"ID":"20241026235643-mfdlq7z","Type":"NodeParagraph","Properties":{"id":"20241026235643-mfdlq7z","updated":"20241026235643"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162007951-20241027000203-tti22po.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235644-si9tyam","Type":"NodeParagraph","Properties":{"id":"20241026235644-si9tyam","updated":"20241026235644"},"Children":[{"Type":"NodeText","Data":"此时，在页面查询结果如下："}]},{"ID":"20241026235645-d4m7xwz","Type":"NodeParagraph","Properties":{"id":"20241026235645-d4m7xwz","updated":"20241026235645"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162008052-20241027000203-jtybyjt.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235646-xos7k54","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235646-xos7k54","updated":"20241026235646"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.5.配置加密（选学）"}]},{"ID":"20241026235647-mn7vot7","Type":"NodeParagraph","Properties":{"id":"20241026235647-mn7vot7","updated":"20241026235647"},"Children":[{"Type":"NodeText","Data":"目前我们配置文件中的很多参数都是明文，如果开发人员发生流动，很容易导致敏感信息的泄露。所以MybatisPlus支持配置文件的加密和解密功能。"}]},{"ID":"20241026235648-5bv6ahw","Type":"NodeParagraph","Properties":{"id":"20241026235648-5bv6ahw","updated":"20241026235648"},"Children":[{"Type":"NodeText","Data":"我们以数据库的用户名和密码为例。"}]},{"ID":"20241026235649-lxkyel7","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235649-lxkyel7","updated":"20241026235649"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3.5.1.生成秘钥"}]},{"ID":"20241026235650-xzofyhq","Type":"NodeParagraph","Properties":{"id":"20241026235650-xzofyhq","updated":"20241026235650"},"Children":[{"Type":"NodeText","Data":"首先，我们利用AES工具生成一个随机秘钥，然后对用户名、密码加密："}]},{"ID":"20241026235651-k8y2ajd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235651-k8y2ajd","updated":"20241026235651"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp;\n\nimport com.baomidou.mybatisplus.core.toolkit.AES;\nimport org.junit.jupiter.api.Test;\n\nclass MpDemoApplicationTests {\n    @Test\n    void contextLoads() {\n        // 生成 16 位随机 AES 密钥\n        String randomKey = AES.generateRandomKey();\n        System.out.println(\"randomKey = \" + randomKey);\n\n        // 利用密钥对用户名加密\n        String username = AES.encrypt(\"root\", randomKey);\n        System.out.println(\"username = \" + username);\n\n        // 利用密钥对用户名加密\n        String password = AES.encrypt(\"MySQL123\", randomKey);\n        System.out.println(\"password = \" + password);\n\n    }\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235652-o85e9ca","Type":"NodeParagraph","Properties":{"id":"20241026235652-o85e9ca","updated":"20241026235652"},"Children":[{"Type":"NodeText","Data":"打印结果如下："}]},{"ID":"20241026235653-xlkj1tt","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"U1FM","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235653-xlkj1tt","updated":"20241026235653"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"U1FM","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"randomKey = 6234633a66fb399f\nusername = px2bAbnUfiY8K/IgsKvscg==\npassword = FGvCSEaOuga3ulDAsxw68Q==\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235654-a84x5i3","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235654-a84x5i3","updated":"20241026235654"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.5.2.修改配置"}]},{"ID":"20241026235655-axlqw21","Type":"NodeParagraph","Properties":{"id":"20241026235655-axlqw21","updated":"20241026235655"},"Children":[{"Type":"NodeText","Data":"修改application.yaml文件，把jdbc的用户名、密码修改为刚刚加密生成的密文："}]},{"ID":"20241026235656-ppjin0q","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"WUFNTA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235656-ppjin0q","updated":"20241026235656"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"WUFNTA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"spring:\n  datasource:\n    url: jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true\u0026characterEncoding=UTF-8\u0026autoReconnect=true\u0026serverTimezone=Asia/Shanghai\u0026rewriteBatchedStatements=true\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    username: mpw:QWWVnk1Oal3258x5rVhaeQ== # 密文要以 mpw:开头\n    password: mpw:EUFmeH3cNAzdRGdOQcabWg== # 密文要以 mpw:开头\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235657-vqir4u2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235657-vqir4u2","updated":"20241026235657"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"3.5.3.测试"}]},{"ID":"20241026235658-f2aqnve","Type":"NodeParagraph","Properties":{"id":"20241026235658-f2aqnve","updated":"20241026235658"},"Children":[{"Type":"NodeText","Data":"在启动项目的时候，需要把刚才生成的秘钥添加到启动参数中，像这样："}]},{"ID":"20241026235659-ksbfr7h","Type":"NodeParagraph","Properties":{"id":"20241026235659-ksbfr7h","updated":"20241026235659"},"Children":[{"Type":"NodeText","Data":"--mpw.key=6234633a66fb399f"}]},{"ID":"20241026235660-exj8ps3","Type":"NodeParagraph","Properties":{"id":"20241026235660-exj8ps3","updated":"20241026235660"},"Children":[{"Type":"NodeText","Data":"单元测试的时候不能添加启动参数，所以要在测试类的注解上配置："}]},{"ID":"20241026235661-2d96vd4","Type":"NodeParagraph","Properties":{"id":"20241026235661-2d96vd4","updated":"20241026235661"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162008053-20241027000203-wwsznk3.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235662-62iqbo3","Type":"NodeParagraph","Properties":{"id":"20241026235662-62iqbo3","updated":"20241026235662"},"Children":[{"Type":"NodeText","Data":"然后随意运行一个单元测试，可以发现数据库查询正常。"}]},{"ID":"20241026235663-nsxl70c","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241026235663-nsxl70c","updated":"20241026235663"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"4.插件功能"}]},{"ID":"20241026235664-i0u78t0","Type":"NodeParagraph","Properties":{"id":"20241026235664-i0u78t0","updated":"20241026235664"},"Children":[{"Type":"NodeText","Data":"MybatisPlus提供了很多的插件功能，进一步拓展其功能。目前已有的插件有："}]},{"ID":"20241026235665-yhnug52","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235665-yhnug52","updated":"20241026235665"},"Children":[{"ID":"20241026235666-mwbs4ai","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235666-mwbs4ai","updated":"20241026235666"},"Children":[{"ID":"20241026235667-0thq8o4","Type":"NodeParagraph","Properties":{"id":"20241026235667-0thq8o4","updated":"20241026235667"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PaginationInnerInterceptor"},{"Type":"NodeText","Data":"：自动分页"}]}]},{"ID":"20241026235668-4658ha6","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235668-4658ha6","updated":"20241026235668"},"Children":[{"ID":"20241026235669-0p7r1e4","Type":"NodeParagraph","Properties":{"id":"20241026235669-0p7r1e4","updated":"20241026235669"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"TenantLineInnerInterceptor"},{"Type":"NodeText","Data":"：多租户"}]}]},{"ID":"20241026235670-7cbk3vb","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235670-7cbk3vb","updated":"20241026235670"},"Children":[{"ID":"20241026235671-gkn3dvx","Type":"NodeParagraph","Properties":{"id":"20241026235671-gkn3dvx","updated":"20241026235671"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"DynamicTableNameInnerInterceptor"},{"Type":"NodeText","Data":"：动态表名"}]}]},{"ID":"20241026235672-y5xj6dn","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235672-y5xj6dn","updated":"20241026235672"},"Children":[{"ID":"20241026235673-7ayfcnx","Type":"NodeParagraph","Properties":{"id":"20241026235673-7ayfcnx","updated":"20241026235673"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"OptimisticLockerInnerInterceptor"},{"Type":"NodeText","Data":"：乐观锁"}]}]},{"ID":"20241026235674-kkxvms0","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235674-kkxvms0","updated":"20241026235674"},"Children":[{"ID":"20241026235675-2t6j9m5","Type":"NodeParagraph","Properties":{"id":"20241026235675-2t6j9m5","updated":"20241026235675"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"IllegalSQLInnerInterceptor"},{"Type":"NodeText","Data":"：sql 性能规范"}]}]},{"ID":"20241026235676-iq1serd","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235676-iq1serd","updated":"20241026235676"},"Children":[{"ID":"20241026235677-070o7us","Type":"NodeParagraph","Properties":{"id":"20241026235677-070o7us","updated":"20241026235677"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"BlockAttackInnerInterceptor"},{"Type":"NodeText","Data":"：防止全表更新与删除"}]}]}]},{"ID":"20241026235678-ir9zgjc","Type":"NodeParagraph","Properties":{"id":"20241026235678-ir9zgjc","updated":"20241026235678"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"注意："},{"Type":"NodeText","Data":" 使用多个分页插件的时候需要注意插件定义顺序，建议使用顺序如下："}]},{"ID":"20241026235679-x3anr3m","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235679-x3anr3m","updated":"20241026235679"},"Children":[{"ID":"20241026235680-xdfbynz","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235680-xdfbynz","updated":"20241026235680"},"Children":[{"ID":"20241026235681-746zwbk","Type":"NodeParagraph","Properties":{"id":"20241026235681-746zwbk","updated":"20241026235681"},"Children":[{"Type":"NodeText","Data":"多租户,动态表名"}]}]},{"ID":"20241026235682-lnpnfv5","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235682-lnpnfv5","updated":"20241026235682"},"Children":[{"ID":"20241026235683-vcxp34t","Type":"NodeParagraph","Properties":{"id":"20241026235683-vcxp34t","updated":"20241026235683"},"Children":[{"Type":"NodeText","Data":"分页,乐观锁"}]}]},{"ID":"20241026235684-aswwzkq","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235684-aswwzkq","updated":"20241026235684"},"Children":[{"ID":"20241026235685-qc1ni3t","Type":"NodeParagraph","Properties":{"id":"20241026235685-qc1ni3t","updated":"20241026235685"},"Children":[{"Type":"NodeText","Data":"sql 性能规范,防止全表更新与删除"}]}]}]},{"ID":"20241026235686-7ve6uqi","Type":"NodeParagraph","Properties":{"id":"20241026235686-7ve6uqi","updated":"20241026235686"},"Children":[{"Type":"NodeText","Data":"这里我们以分页插件为里来学习插件的用法。"}]},{"ID":"20241026235687-h7kt42v","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235687-h7kt42v","updated":"20241026235687"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"4.1.分页插件"}]},{"ID":"20241026235688-b6rb2fg","Type":"NodeParagraph","Properties":{"id":"20241026235688-b6rb2fg","updated":"20241026235688"},"Children":[{"Type":"NodeText","Data":"在未引入分页插件的情况下，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"MybatisPlus"},{"Type":"NodeText","Data":"是不支持分页功能的，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"IService"},{"Type":"NodeText","Data":"和"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"BaseMapper"},{"Type":"NodeText","Data":"中的分页方法都无法正常起效。 所以，我们必须配置分页插件。"}]},{"ID":"20241026235689-hyqqrgy","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235689-hyqqrgy","updated":"20241026235689"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"4.1.1.配置分页插件"}]},{"ID":"20241026235690-9v6ls62","Type":"NodeParagraph","Properties":{"id":"20241026235690-9v6ls62","updated":"20241026235690"},"Children":[{"Type":"NodeText","Data":"在项目中新建一个配置类："}]},{"ID":"20241026235691-h82t7c6","Type":"NodeParagraph","Properties":{"id":"20241026235691-h82t7c6","updated":"20241026235691"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162008054-20241027000203-h5dndav.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235692-wy0dfdv","Type":"NodeParagraph","Properties":{"id":"20241026235692-wy0dfdv","updated":"20241026235692"},"Children":[{"Type":"NodeText","Data":"其代码如下："}]},{"ID":"20241026235693-ozaezma","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235693-ozaezma","updated":"20241026235693"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.config;\n\nimport com.baomidou.mybatisplus.annotation.DbType;\nimport com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;\nimport com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class MybatisConfig {\n\n    @Bean\n    public MybatisPlusInterceptor mybatisPlusInterceptor() {\n        // 初始化核心插件\n        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();\n        // 添加分页插件\n        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));\n        return interceptor;\n    }\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235694-eswyrt1","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235694-eswyrt1","updated":"20241026235694"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"4.1.2.分页API"}]},{"ID":"20241026235695-89ncycs","Type":"NodeParagraph","Properties":{"id":"20241026235695-89ncycs","updated":"20241026235695"},"Children":[{"Type":"NodeText","Data":"编写一个分页查询的测试："}]},{"ID":"20241026235696-1r70u9e","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235696-1r70u9e","updated":"20241026235696"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Test\nvoid testPageQuery() {\n    // 1.分页查询，new Page()的两个参数分别是：页码、每页大小\n    Page\u003cUser\u003e p = userService.page(new Page\u003c\u003e(2, 2));\n    // 2.总条数\n    System.out.println(\"total = \" + p.getTotal());\n    // 3.总页数\n    System.out.println(\"pages = \" + p.getPages());\n    // 4.数据\n    List\u003cUser\u003e records = p.getRecords();\n    records.forEach(System.out::println);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235697-8hev39v","Type":"NodeParagraph","Properties":{"id":"20241026235697-8hev39v","updated":"20241026235697"},"Children":[{"Type":"NodeText","Data":"运行的SQL如下："}]},{"ID":"20241026235698-xoyyxut","Type":"NodeParagraph","Properties":{"id":"20241026235698-xoyyxut","updated":"20241026235698"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162008055-20241027000203-a23gyn0.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235699-lipj5z2","Type":"NodeParagraph","Properties":{"id":"20241026235699-lipj5z2","updated":"20241026235699"},"Children":[{"Type":"NodeText","Data":"这里用到了分页参数，Page，即可以支持分页参数，也可以支持排序参数。常见的API如下："}]},{"ID":"20241026235700-y5hef0k","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235700-y5hef0k","updated":"20241026235700"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"int pageNo = 1, pageSize = 5;\n// 分页参数\nPage\u003cUser\u003e page = Page.of(pageNo, pageSize);\n// 排序参数, 通过OrderItem来指定\npage.addOrder(new OrderItem(\"balance\", false));\n\nuserService.page(page);\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235701-fyv4uqn","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241026235701-fyv4uqn","updated":"20241026235701"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"4.2.通用分页实体"}]},{"ID":"20241026235702-e88m6oz","Type":"NodeParagraph","Properties":{"id":"20241026235702-e88m6oz","updated":"20241026235702"},"Children":[{"Type":"NodeText","Data":"现在要实现一个用户分页查询的接口，接口规范如下："}]},{"ID":"20241026235703-6nk3u9q","Type":"NodeTable","Data":"| **参数** | **说明**                                                     |\n| -------- | ------------------------------------------------------------ |\n| 请求方式 | GET                                                          |\n| 请求路径 | /users/page                                                  |\n| 请求参数 | `{    \"pageNo\": 1,    \"pageSize\": 5,    \"sortBy\": \"balance\",    \"isAsc\": false,    \"name\": \"o\",    \"status\": 1 }` |\n| 返回值   | `{    \"total\": 100006,    \"pages\": 50003,    \"list\": [        {            \"id\": 1685100878975279298,            \"username\": \"user_9****\",            \"info\": {                \"age\": 24,                \"intro\": \"英文老师\",                \"gender\": \"female\"            },            \"status\": \"正常\",            \"balance\": 2000        }    ] }` |\n| 特殊说明 | 如果排序字段为空，默认按照更新时间排序排序字段不为空，则按照排序字段排序 |","TableAligns":[0,0],"Properties":{"id":"20241026235703-6nk3u9q","updated":"20241026235703"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"参数"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"说明"}]}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"请求方式"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"GET"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"请求路径"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"/users/page"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"请求参数"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"{    \u0026quot;pageNo\u0026quot;: 1,    \u0026quot;pageSize\u0026quot;: 5,    \u0026quot;sortBy\u0026quot;: \u0026quot;balance\u0026quot;,    \u0026quot;isAsc\u0026quot;: false,    \u0026quot;name\u0026quot;: \u0026quot;o\u0026quot;,    \u0026quot;status\u0026quot;: 1 }"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"返回值"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"{    \u0026quot;total\u0026quot;: 100006,    \u0026quot;pages\u0026quot;: 50003,    \u0026quot;list\u0026quot;: [        {            \u0026quot;id\u0026quot;: 1685100878975279298,            \u0026quot;username\u0026quot;: \u0026quot;user_9****\u0026quot;,            \u0026quot;info\u0026quot;: {                \u0026quot;age\u0026quot;: 24,                \u0026quot;intro\u0026quot;: \u0026quot;英文老师\u0026quot;,                \u0026quot;gender\u0026quot;: \u0026quot;female\u0026quot;            },            \u0026quot;status\u0026quot;: \u0026quot;正常\u0026quot;,            \u0026quot;balance\u0026quot;: 2000        }    ] }"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"特殊说明"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"如果排序字段为空，默认按照更新时间排序排序字段不为空，则按照排序字段排序"}]}]}]},{"ID":"20241026235704-k4oda2s","Type":"NodeParagraph","Properties":{"id":"20241026235704-k4oda2s","updated":"20241026235704"},"Children":[{"Type":"NodeText","Data":"这里需要定义3个实体："}]},{"ID":"20241026235705-dddeyhw","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235705-dddeyhw","updated":"20241026235705"},"Children":[{"ID":"20241026235706-veg3l1u","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235706-veg3l1u","updated":"20241026235706"},"Children":[{"ID":"20241026235707-b5sn0g2","Type":"NodeParagraph","Properties":{"id":"20241026235707-b5sn0g2","updated":"20241026235707"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UserQuery"},{"Type":"NodeText","Data":"：分页查询条件的实体，包含分页、排序参数、过滤条件"}]}]},{"ID":"20241026235708-w1yvwp9","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235708-w1yvwp9","updated":"20241026235708"},"Children":[{"ID":"20241026235709-0hm2yuf","Type":"NodeParagraph","Properties":{"id":"20241026235709-0hm2yuf","updated":"20241026235709"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PageDTO"},{"Type":"NodeText","Data":"：分页结果实体，包含总条数、总页数、当前页数据"}]}]},{"ID":"20241026235710-6x7lx04","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235710-6x7lx04","updated":"20241026235710"},"Children":[{"ID":"20241026235711-pvukp8a","Type":"NodeParagraph","Properties":{"id":"20241026235711-pvukp8a","updated":"20241026235711"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UserVO"},{"Type":"NodeText","Data":"：用户页面视图实体"}]}]}]},{"ID":"20241026235712-vyzieqz","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235712-vyzieqz","updated":"20241026235712"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"4.2.1.实体"}]},{"ID":"20241026235713-re0ur7a","Type":"NodeParagraph","Properties":{"id":"20241026235713-re0ur7a","updated":"20241026235713"},"Children":[{"Type":"NodeText","Data":"由于UserQuery之前已经定义过了，并且其中已经包含了过滤条件，具体代码如下："}]},{"ID":"20241026235714-o3z7pjp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235714-o3z7pjp","updated":"20241026235714"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.domain.query;\n\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.Data;\n\n@Data\n@ApiModel(description = \"用户查询条件实体\")\npublic class UserQuery {\n    @ApiModelProperty(\"用户名关键字\")\n    private String name;\n    @ApiModelProperty(\"用户状态：1-正常，2-冻结\")\n    private Integer status;\n    @ApiModelProperty(\"余额最小值\")\n    private Integer minBalance;\n    @ApiModelProperty(\"余额最大值\")\n    private Integer maxBalance;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235715-f410cnp","Type":"NodeParagraph","Properties":{"id":"20241026235715-f410cnp","updated":"20241026235715"},"Children":[{"Type":"NodeText","Data":"其中缺少的仅仅是分页条件，而分页条件不仅仅用户分页查询需要，以后其它业务也都有分页查询的需求。因此建议将分页查询条件单独定义为一个"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PageQuery"},{"Type":"NodeText","Data":"实体："}]},{"ID":"20241026235716-akl2qvg","Type":"NodeParagraph","Properties":{"id":"20241026235716-akl2qvg","updated":"20241026235716"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162008056-20241027000203-p9xzy1m.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235717-bjghx7k","Type":"NodeParagraph","Properties":{"id":"20241026235717-bjghx7k","updated":"20241026235717"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PageQuery"},{"Type":"NodeText","Data":"是前端提交的查询参数，一般包含四个属性："}]},{"ID":"20241026235718-xhtx0rp","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235718-xhtx0rp","updated":"20241026235718"},"Children":[{"ID":"20241026235719-4gmfwo3","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235719-4gmfwo3","updated":"20241026235719"},"Children":[{"ID":"20241026235720-d19s1sk","Type":"NodeParagraph","Properties":{"id":"20241026235720-d19s1sk","updated":"20241026235720"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"pageNo"},{"Type":"NodeText","Data":"：页码"}]}]},{"ID":"20241026235721-m3ykrhh","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235721-m3ykrhh","updated":"20241026235721"},"Children":[{"ID":"20241026235722-jdak6rd","Type":"NodeParagraph","Properties":{"id":"20241026235722-jdak6rd","updated":"20241026235722"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"pageSize"},{"Type":"NodeText","Data":"：每页数据条数"}]}]},{"ID":"20241026235723-j3i1k81","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235723-j3i1k81","updated":"20241026235723"},"Children":[{"ID":"20241026235724-rc5iq2s","Type":"NodeParagraph","Properties":{"id":"20241026235724-rc5iq2s","updated":"20241026235724"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"sortBy"},{"Type":"NodeText","Data":"：排序字段"}]}]},{"ID":"20241026235725-3rmcfql","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241026235725-3rmcfql","updated":"20241026235725"},"Children":[{"ID":"20241026235726-a9zh6aj","Type":"NodeParagraph","Properties":{"id":"20241026235726-a9zh6aj","updated":"20241026235726"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"isAsc"},{"Type":"NodeText","Data":"：是否升序"}]}]}]},{"ID":"20241026235727-ho2i10q","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235727-ho2i10q","updated":"20241026235727"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Data\n@ApiModel(description = \"分页查询实体\")\npublic class PageQuery {\n    @ApiModelProperty(\"页码\")\n    private Integer pageNo;\n    @ApiModelProperty(\"页码\")\n    private Integer pageSize;\n    @ApiModelProperty(\"排序字段\")\n    private String sortBy;\n    @ApiModelProperty(\"是否升序\")\n    private Boolean isAsc;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235728-y0t810s","Type":"NodeParagraph","Properties":{"id":"20241026235728-y0t810s","updated":"20241026235728"},"Children":[{"Type":"NodeText","Data":"然后，让我们的UserQuery继承这个实体："}]},{"ID":"20241026235729-rzc5gz7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235729-rzc5gz7","updated":"20241026235729"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.domain.query;\n\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\n@EqualsAndHashCode(callSuper = true)\n@Data\n@ApiModel(description = \"用户查询条件实体\")\npublic class UserQuery extends PageQuery {\n    @ApiModelProperty(\"用户名关键字\")\n    private String name;\n    @ApiModelProperty(\"用户状态：1-正常，2-冻结\")\n    private Integer status;\n    @ApiModelProperty(\"余额最小值\")\n    private Integer minBalance;\n    @ApiModelProperty(\"余额最大值\")\n    private Integer maxBalance;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235730-1jj6wvv","Type":"NodeParagraph","Properties":{"id":"20241026235730-1jj6wvv","updated":"20241026235730"},"Children":[{"Type":"NodeText","Data":"返回值的用户实体沿用之前定一个"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UserVO"},{"Type":"NodeText","Data":"实体："}]},{"ID":"20241026235731-bh4esw5","Type":"NodeParagraph","Properties":{"id":"20241026235731-bh4esw5","updated":"20241026235731"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162008057-20241027000203-l90xgfc.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235732-hxy05po","Type":"NodeParagraph","Properties":{"id":"20241026235732-hxy05po","updated":"20241026235732"},"Children":[{"Type":"NodeText","Data":"最后，则是分页实体PageDTO:"}]},{"ID":"20241026235733-xpmulmv","Type":"NodeParagraph","Properties":{"id":"20241026235733-xpmulmv","updated":"20241026235733"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162008058-20241027000203-c0g9npn.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235734-6b2wwo9","Type":"NodeParagraph","Properties":{"id":"20241026235734-6b2wwo9","updated":"20241026235734"},"Children":[{"Type":"NodeText","Data":"代码如下："}]},{"ID":"20241026235735-34noglh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235735-34noglh","updated":"20241026235735"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.domain.dto;\n\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.Data;\n\nimport java.util.List;\n\n@Data\n@ApiModel(description = \"分页结果\")\npublic class PageDTO\u003cT\u003e {\n    @ApiModelProperty(\"总条数\")\n    private Long total;\n    @ApiModelProperty(\"总页数\")\n    private Long pages;\n    @ApiModelProperty(\"集合\")\n    private List\u003cT\u003e list;\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235736-y5yngx0","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235736-y5yngx0","updated":"20241026235736"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"4.2.2.开发接口"}]},{"ID":"20241026235737-bun6el8","Type":"NodeParagraph","Properties":{"id":"20241026235737-bun6el8","updated":"20241026235737"},"Children":[{"Type":"NodeText","Data":"我们在"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"UserController"},{"Type":"NodeText","Data":"中定义分页查询用户的接口："}]},{"ID":"20241026235738-9rpsodg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235738-9rpsodg","updated":"20241026235738"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.controller;\n\nimport com.itheima.mp.domain.dto.PageDTO;\nimport com.itheima.mp.domain.query.PageQuery;\nimport com.itheima.mp.domain.vo.UserVO;\nimport com.itheima.mp.service.UserService;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"users\")\n@RequiredArgsConstructor\npublic class UserController {\n\n    private final UserService userService;\n\n    @GetMapping(\"/page\")\n    public PageDTO\u003cUserVO\u003e queryUsersPage(UserQuery query){\n        return userService.queryUsersPage(query);\n    }\n\n    // 。。。 略\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235739-99xhf4w","Type":"NodeParagraph","Properties":{"id":"20241026235739-99xhf4w","updated":"20241026235739"},"Children":[{"Type":"NodeText","Data":"然后在"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"IUserService"},{"Type":"NodeText","Data":"中创建"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"queryUsersPage"},{"Type":"NodeText","Data":"方法："}]},{"ID":"20241026235740-5nmoeq2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235740-5nmoeq2","updated":"20241026235740"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"PageDTO\u003cUserVO\u003e queryUsersPage(PageQuery query);\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235741-8b3bf5n","Type":"NodeParagraph","Properties":{"id":"20241026235741-8b3bf5n","updated":"20241026235741"},"Children":[{"Type":"NodeText","Data":"接下来，在UserServiceImpl中实现该方法："}]},{"ID":"20241026235742-ikmwlom","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235742-ikmwlom","updated":"20241026235742"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Override\npublic PageDTO\u003cUserVO\u003e queryUsersPage(PageQuery query) {\n    // 1.构建条件\n    // 1.1.分页条件\n    Page\u003cUser\u003e page = Page.of(query.getPageNo(), query.getPageSize());\n    // 1.2.排序条件\n    if (query.getSortBy() != null) {\n        page.addOrder(new OrderItem(query.getSortBy(), query.getIsAsc()));\n    }else{\n        // 默认按照更新时间排序\n        page.addOrder(new OrderItem(\"update_time\", false));\n    }\n    // 2.查询\n    page(page);\n    // 3.数据非空校验\n    List\u003cUser\u003e records = page.getRecords();\n    if (records == null || records.size() \u003c= 0) {\n        // 无数据，返回空结果\n        return new PageDTO\u003c\u003e(page.getTotal(), page.getPages(), Collections.emptyList());\n    }\n    // 4.有数据，转换\n    List\u003cUserVO\u003e list = BeanUtil.copyToList(records, UserVO.class);\n    // 5.封装返回\n    return new PageDTO\u003cUserVO\u003e(page.getTotal(), page.getPages(), list);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235743-uc1k6op","Type":"NodeParagraph","Properties":{"id":"20241026235743-uc1k6op","updated":"20241026235743"},"Children":[{"Type":"NodeText","Data":"启动项目，在页面查看："}]},{"ID":"20241026235744-1b7yr25","Type":"NodeParagraph","Properties":{"id":"20241026235744-1b7yr25","updated":"20241026235744"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162008059-20241027000203-ctlgmou.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235745-catpqbd","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235745-catpqbd","updated":"20241026235745"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"4.2.3.改造PageQuery实体"}]},{"ID":"20241026235746-saalo05","Type":"NodeParagraph","Properties":{"id":"20241026235746-saalo05","updated":"20241026235746"},"Children":[{"Type":"NodeText","Data":"在刚才的代码中，从"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PageQuery"},{"Type":"NodeText","Data":"到"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"MybatisPlus"},{"Type":"NodeText","Data":"的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Page"},{"Type":"NodeText","Data":"之间转换的过程还是比较麻烦的。"}]},{"ID":"20241026235747-5fut5id","Type":"NodeParagraph","Properties":{"id":"20241026235747-5fut5id","updated":"20241026235747"},"Children":[{"Type":"NodeText","Data":"我们完全可以在"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PageQuery"},{"Type":"NodeText","Data":"这个实体中定义一个工具方法，简化开发。 像这样："}]},{"ID":"20241026235748-gt769r8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235748-gt769r8","updated":"20241026235748"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.domain.query;\n\nimport com.baomidou.mybatisplus.core.metadata.OrderItem;\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\nimport lombok.Data;\n\n@Data\npublic class PageQuery {\n    private Integer pageNo;\n    private Integer pageSize;\n    private String sortBy;\n    private Boolean isAsc;\n\n    public \u003cT\u003e  Page\u003cT\u003e toMpPage(OrderItem ... orders){\n        // 1.分页条件\n        Page\u003cT\u003e p = Page.of(pageNo, pageSize);\n        // 2.排序条件\n        // 2.1.先看前端有没有传排序字段\n        if (sortBy != null) {\n            p.addOrder(new OrderItem(sortBy, isAsc));\n            return p;\n        }\n        // 2.2.再看有没有手动指定排序字段\n        if(orders != null){\n            p.addOrder(orders);\n        }\n        return p;\n    }\n\n    public \u003cT\u003e Page\u003cT\u003e toMpPage(String defaultSortBy, boolean isAsc){\n        return this.toMpPage(new OrderItem(defaultSortBy, isAsc));\n    }\n\n    public \u003cT\u003e Page\u003cT\u003e toMpPageDefaultSortByCreateTimeDesc() {\n        return toMpPage(\"create_time\", false);\n    }\n\n    public \u003cT\u003e Page\u003cT\u003e toMpPageDefaultSortByUpdateTimeDesc() {\n        return toMpPage(\"update_time\", false);\n    }\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235749-udog6d3","Type":"NodeParagraph","Properties":{"id":"20241026235749-udog6d3","updated":"20241026235749"},"Children":[{"Type":"NodeText","Data":"这样我们在开发也时就可以省去对从"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PageQuery"},{"Type":"NodeText","Data":"到"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Page"},{"Type":"NodeText","Data":"的的转换："}]},{"ID":"20241026235750-dm7a7h0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235750-dm7a7h0","updated":"20241026235750"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"// 1.构建条件\nPage\u003cUser\u003e page = query.toMpPageDefaultSortByCreateTimeDesc();\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235751-fcd2kfn","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241026235751-fcd2kfn","updated":"20241026235751"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"4.2.4.改造PageDTO实体"}]},{"ID":"20241026235752-kenqkkx","Type":"NodeParagraph","Properties":{"id":"20241026235752-kenqkkx","updated":"20241026235752"},"Children":[{"Type":"NodeText","Data":"在查询出分页结果后，数据的非空校验，数据的vo转换都是模板代码，编写起来很麻烦。"}]},{"ID":"20241026235753-519oe9p","Type":"NodeParagraph","Properties":{"id":"20241026235753-519oe9p","updated":"20241026235753"},"Children":[{"Type":"NodeText","Data":"我们完全可以将其封装到PageDTO的工具方法中，简化整个过程："}]},{"ID":"20241026235754-n10f6i1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235754-n10f6i1","updated":"20241026235754"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"package com.itheima.mp.domain.dto;\n\nimport cn.hutool.core.bean.BeanUtil;\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class PageDTO\u003cV\u003e {\n    private Long total;\n    private Long pages;\n    private List\u003cV\u003e list;\n\n    /**\n     * 返回空分页结果\n     * @param p MybatisPlus的分页结果\n     * @param \u003cV\u003e 目标VO类型\n     * @param \u003cP\u003e 原始PO类型\n     * @return VO的分页对象\n     */\n    public static \u003cV, P\u003e PageDTO\u003cV\u003e empty(Page\u003cP\u003e p){\n        return new PageDTO\u003c\u003e(p.getTotal(), p.getPages(), Collections.emptyList());\n    }\n\n    /**\n     * 将MybatisPlus分页结果转为 VO分页结果\n     * @param p MybatisPlus的分页结果\n     * @param voClass 目标VO类型的字节码\n     * @param \u003cV\u003e 目标VO类型\n     * @param \u003cP\u003e 原始PO类型\n     * @return VO的分页对象\n     */\n    public static \u003cV, P\u003e PageDTO\u003cV\u003e of(Page\u003cP\u003e p, Class\u003cV\u003e voClass) {\n        // 1.非空校验\n        List\u003cP\u003e records = p.getRecords();\n        if (records == null || records.size() \u003c= 0) {\n            // 无数据，返回空结果\n            return empty(p);\n        }\n        // 2.数据转换\n        List\u003cV\u003e vos = BeanUtil.copyToList(records, voClass);\n        // 3.封装返回\n        return new PageDTO\u003c\u003e(p.getTotal(), p.getPages(), vos);\n    }\n\n    /**\n     * 将MybatisPlus分页结果转为 VO分页结果，允许用户自定义PO到VO的转换方式\n     * @param p MybatisPlus的分页结果\n     * @param convertor PO到VO的转换函数\n     * @param \u003cV\u003e 目标VO类型\n     * @param \u003cP\u003e 原始PO类型\n     * @return VO的分页对象\n     */\n    public static \u003cV, P\u003e PageDTO\u003cV\u003e of(Page\u003cP\u003e p, Function\u003cP, V\u003e convertor) {\n        // 1.非空校验\n        List\u003cP\u003e records = p.getRecords();\n        if (records == null || records.size() \u003c= 0) {\n            // 无数据，返回空结果\n            return empty(p);\n        }\n        // 2.数据转换\n        List\u003cV\u003e vos = records.stream().map(convertor).collect(Collectors.toList());\n        // 3.封装返回\n        return new PageDTO\u003c\u003e(p.getTotal(), p.getPages(), vos);\n    }\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235755-6z9jnlb","Type":"NodeParagraph","Properties":{"id":"20241026235755-6z9jnlb","updated":"20241026235755"},"Children":[{"Type":"NodeText","Data":"最终，业务层的代码可以简化为："}]},{"ID":"20241026235756-81o17km","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235756-81o17km","updated":"20241026235756"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Override\npublic PageDTO\u003cUserVO\u003e queryUserByPage(PageQuery query) {\n    // 1.构建条件\n    Page\u003cUser\u003e page = query.toMpPageDefaultSortByCreateTimeDesc();\n    // 2.查询\n    page(page);\n    // 3.封装返回\n    return PageDTO.of(page, UserVO.class);\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235757-zrny1yz","Type":"NodeParagraph","Properties":{"id":"20241026235757-zrny1yz","updated":"20241026235757"},"Children":[{"Type":"NodeText","Data":"如果是希望自定义PO到VO的转换过程，可以这样做："}]},{"ID":"20241026235758-i960jce","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"SmF2YQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241026235758-i960jce","updated":"20241026235758"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"SmF2YQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"@Override\npublic PageDTO\u003cUserVO\u003e queryUserByPage(PageQuery query) {\n    // 1.构建条件\n    Page\u003cUser\u003e page = query.toMpPageDefaultSortByCreateTimeDesc();\n    // 2.查询\n    page(page);\n    // 3.封装返回\n    return PageDTO.of(page, user -\u003e {\n        // 拷贝属性到VO\n        UserVO vo = BeanUtil.copyProperties(user, UserVO.class);\n        // 用户名脱敏\n        String username = vo.getUsername();\n        vo.setUsername(username.substring(0, username.length() - 2) + \"**\");\n        return vo;\n    });\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241026235759-gqlwfq1","Type":"NodeParagraph","Properties":{"id":"20241026235759-gqlwfq1","updated":"20241026235759"},"Children":[{"Type":"NodeText","Data":"最终查询的结果如下："}]},{"ID":"20241026235760-qphyf7r","Type":"NodeParagraph","Properties":{"id":"20241026235760-qphyf7r","updated":"20241026235760"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/169626162008060-20241027000203-hdox1xz.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241026235761-7z3idzc","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241026235761-7z3idzc","updated":"20241026235761"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"5.作业"}]},{"ID":"20241026235762-gsyugwx","Type":"NodeParagraph","Properties":{"id":"20241026235762-gsyugwx","updated":"20241026235762"},"Children":[{"Type":"NodeText","Data":"尝试改造项目一中的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Service"},{"Type":"NodeText","Data":"层和"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Mapper"},{"Type":"NodeText","Data":"层实现，用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"MybatisPlus"},{"Type":"NodeText","Data":"代替单表的CRUD"}]}]}