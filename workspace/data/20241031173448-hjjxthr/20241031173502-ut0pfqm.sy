{"ID":"20241031173502-ut0pfqm","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241031173502-ut0pfqm","title":"nginx反向代理、负载均衡入门","type":"doc","updated":"20241102232318"},"Children":[{"ID":"20241102105253-qx1uphs","Type":"NodeParagraph","Properties":{"id":"20241102105253-qx1uphs","updated":"20241102105253"},"Children":[{"Type":"NodeText","Data":"我们思考一个问题："},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"前端发送的请求，是如何请求到后端服务的？"}]},{"ID":"20241102105253-4ekzmbl","Type":"NodeParagraph","Properties":{"id":"20241102105253-4ekzmbl","updated":"20241102105253"},"Children":[{"Type":"NodeText","Data":"前端请求地址："},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"http://localhost/api/employee/login","TextMarkTextContent":"http://localhost/api/employee/login"}]},{"ID":"20241102105253-cdcpcqw","Type":"NodeParagraph","Properties":{"id":"20241102105253-cdcpcqw","updated":"20241102105253"},"Children":[{"Type":"NodeText","Data":"后端接口地址："},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"http://localhost:8080/admin/employee/login","TextMarkTextContent":"http://localhost:8080/admin/employee/login"}]},{"ID":"20241102105444-uxlz2qo","Type":"NodeParagraph","Properties":{"id":"20241102105444-uxlz2qo","updated":"20241102105444"}},{"ID":"20241102105342-0r3j3xp","Type":"NodeParagraph","Properties":{"id":"20241102105342-0r3j3xp","updated":"20241102105419"},"Children":[{"Type":"NodeText","Data":"前端请求地址在浏览器f12，查看网络请求中可以看到："}]},{"ID":"20241102105425-w3185j9","Type":"NodeParagraph","Properties":{"id":"20241102105425-w3185j9","updated":"20241102232239"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"min-width: calc(100% - 0.1em);"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241102105425-kmkafey.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"min-width: calc(100% - 0.1em);\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241102105427-gctirx9","Type":"NodeParagraph","Properties":{"id":"20241102105427-gctirx9","updated":"20241102105441"},"Children":[{"Type":"NodeText","Data":"而后端接口地址在："}]},{"ID":"20241102105450-brb2ezs","Type":"NodeParagraph","Properties":{"id":"20241102105450-brb2ezs","updated":"20241102232240"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"min-width: calc(100% - 0.1em);","style":"width: 642px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241102105450-c8k1ugu.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 642px;\" parent-style=\"min-width: calc(100% - 0.1em);\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241102105451-01yw2jo","Type":"NodeParagraph","Properties":{"id":"20241102105451-01yw2jo","updated":"20241102105459"},"Children":[{"Type":"NodeText","Data":"很明显，两个地址不一致，那是如何请求到后端服务的呢？"}]},{"ID":"20241102105506-yimkbf6","Type":"NodeParagraph","Properties":{"id":"20241102105506-yimkbf6","updated":"20241102232241"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"min-width: calc(100% - 0.1em);"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241102105506-cyfwjap.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"min-width: calc(100% - 0.1em);\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241102105453-v5zte50","Type":"NodeParagraph","Properties":{"id":"20241102105453-v5zte50","updated":"20241102105453"}},{"ID":"20241102105516-onfqwc4","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241102105516-onfqwc4","updated":"20241102232253"},"Children":[{"Type":"NodeText","Data":"nginx反向代理"}]},{"ID":"20241102105532-rrmajvk","Type":"NodeParagraph","Properties":{"id":"20241102105532-rrmajvk","updated":"20241102105532"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"nginx 反向代理"},{"Type":"NodeText","Data":"，就是将前端发送的动态请求由 nginx 转发到后端服务器"}]},{"ID":"20241102105611-86ti8e7","Type":"NodeParagraph","Properties":{"id":"20241102105611-86ti8e7","updated":"20241102232253"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"min-width: calc(100% - 0.1em);","style":"width: 951px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241102105611-ld5tsa2.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 951px;\" parent-style=\"min-width: calc(100% - 0.1em);\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241102105532-5vqptir","Type":"NodeParagraph","Properties":{"id":"20241102105532-5vqptir","updated":"20241102105532"},"Children":[{"Type":"NodeText","Data":"那为什么不直接通过浏览器直接请求后台服务端，需要通过nginx反向代理呢？"}]},{"ID":"20241102105622-bgi430z","Type":"NodeParagraph","Properties":{"id":"20241102105622-bgi430z","updated":"20241102105622"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"nginx 反向代理的好处："}]},{"ID":"20241102105622-9qzr62n","Type":"NodeList","ListData":{},"Properties":{"id":"20241102105622-9qzr62n","updated":"20241102105638"},"Children":[{"ID":"20241102105622-hui526k","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241102105622-hui526k","updated":"20241102105632"},"Children":[{"ID":"20241102105622-z3vxvjp","Type":"NodeParagraph","Properties":{"id":"20241102105622-z3vxvjp","updated":"20241102105632"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"提高访问速度"},{"Type":"NodeText","Data":"\n因为nginx本身可以进行缓存，如果访问的同一接口，并且做了数据缓存，nginx就直接可把数据返回，不需要真正地访问服务端，从而提高访问速度。"}]}]},{"ID":"20241102105622-tucxnx8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241102105622-tucxnx8","updated":"20241102105635"},"Children":[{"ID":"20241102105622-it6kg66","Type":"NodeParagraph","Properties":{"id":"20241102105622-it6kg66","updated":"20241102105635"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"进行负载均衡"},{"Type":"NodeText","Data":"\n所谓负载均衡,就是把大量的请求按照我们指定的方式均衡的分配给集群中的每台服务器。"}]}]},{"ID":"20241102105622-w4g0sqd","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241102105622-w4g0sqd","updated":"20241102105638"},"Children":[{"ID":"20241102105622-aansl63","Type":"NodeParagraph","Properties":{"id":"20241102105622-aansl63","updated":"20241102105638"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"保证后端服务安全"},{"Type":"NodeText","Data":"\n因为一般后台服务地址不会暴露，所以使用浏览器不能直接访问，可以把nginx作为请求访问的入口，请求到达nginx后转发到具体的服务中，从而保证后端服务的安全。"}]}]}]},{"ID":"20241102231125-4c6rdyl","Type":"NodeParagraph","Properties":{"id":"20241102231125-4c6rdyl","updated":"20241102232027"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"parent-style":"min-width: calc(100% - 0.1em);","style":"width: 389px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241102231125-8rz4vvf.png"},{"Type":"NodeLinkSpace"},{"Type":"NodeLinkTitle","Data":"隐藏后端接口"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 389px;\" parent-style=\"min-width: calc(100% - 0.1em);\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241102231130-fk8telr","Type":"NodeParagraph","Properties":{"id":"20241102231130-fk8telr","updated":"20241102231130"}},{"ID":"20241102231140-mrph5ok","Type":"NodeParagraph","Properties":{"id":"20241102231140-mrph5ok","updated":"20241102231140"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"nginx 反向代理的配置方式："}]},{"ID":"20241102231140-zmo5t0v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241102231140-zmo5t0v","updated":"20241102231140"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bmdpbng="},{"Type":"NodeCodeBlockCode","Data":"server{\n    listen 80;\n    server_name localhost;\n  \n    location /api/{\n        proxy_pass http://localhost:8080/admin/; #反向代理\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241102231140-qmboom5","Type":"NodeParagraph","Properties":{"id":"20241102231140-qmboom5","updated":"20241102231140"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"proxy_pass："},{"Type":"NodeText","Data":"该指令是用来设置代理服务器的地址，可以是主机名称，IP地址加端口号等形式。"}]},{"ID":"20241102231140-gdisnd9","Type":"NodeParagraph","Properties":{"id":"20241102231140-gdisnd9","updated":"20241102231224"},"Children":[{"Type":"NodeText","Data":"如上代码的含义是："},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"监听80端口号"},{"Type":"NodeText","Data":"， 然后当我们访问 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:80/api/../.."},{"Type":"NodeText","Data":"​这样的接口的时候，它会通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"location /api/ {}"},{"Type":"NodeText","Data":"​ 这样的反向代理到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:8080/admin/"},{"Type":"NodeText","Data":"​上来。"}]},{"ID":"20241102231532-as14w17","Type":"NodeParagraph","Properties":{"id":"20241102231532-as14w17","updated":"20241102231532"}},{"ID":"20241102231557-c24v3m0","Type":"NodeParagraph","Properties":{"id":"20241102231557-c24v3m0","updated":"20241102231557"},"Children":[{"Type":"NodeText","Data":"接下来，进到nginx-1.20.2"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"\\"}]},{"Type":"NodeText","Data":"conf，打开nginx配置"}]},{"ID":"20241102231557-3gdyp2j","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241102231557-3gdyp2j","updated":"20241102231557"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"# 反向代理,处理管理端发送的请求\nlocation /api/ {\n    proxy_pass   http://localhost:8080/admin/;\n    #proxy_pass   http://webservers/admin/;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241102231557-031kl34","Type":"NodeParagraph","Properties":{"id":"20241102231557-031kl34","updated":"20241102231557"},"Children":[{"Type":"NodeText","Data":"当在访问"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"http://localhost/api/employee/login","TextMarkTextContent":"http://localhost/api/employee/login"},{"Type":"NodeText","Data":"，nginx接收到请求后转到"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"http://localhost:8080/admin/","TextMarkTextContent":"http://localhost:8080/admin/"},{"Type":"NodeText","Data":"，故最终的请求地址为"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"http://localhost:8080/admin/employee/login","TextMarkTextContent":"http://localhost:8080/admin/employee/login"},{"Type":"NodeText","Data":"，和后台服务的访问地址一致。"}]},{"ID":"20241102231614-4ezu9av","Type":"NodeParagraph","Properties":{"id":"20241102231614-4ezu9av","updated":"20241102231614"}},{"ID":"20241102231614-mxiicfc","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241102231614-mxiicfc","updated":"20241102231914"},"Children":[{"Type":"NodeText","Data":"nginx负载均衡"}]},{"ID":"20241102231642-wqe10zg","Type":"NodeParagraph","Properties":{"id":"20241102231642-wqe10zg","updated":"20241102231642"},"Children":[{"Type":"NodeText","Data":"当如果服务以集群的方式进行部署时，那nginx在转发请求到服务器时就需要做相应的负载均衡。其实，负载均衡从本质上来说也是基于反向代理来实现的，最终都是转发请求。"}]},{"ID":"20241102231653-ht66wfv","Type":"NodeParagraph","Properties":{"id":"20241102231653-ht66wfv","updated":"20241102231653"}},{"ID":"20241102231642-mr3423z","Type":"NodeParagraph","Properties":{"id":"20241102231642-mr3423z","updated":"20241102231642"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"nginx 负载均衡的配置方式："}]},{"ID":"20241102231642-vpgrlv5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241102231642-vpgrlv5","updated":"20241102231702"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bmdpbng="},{"Type":"NodeCodeBlockCode","Data":"upstream webservers{\n    server 192.168.100.128:8080;\n    server 192.168.100.129:8080;\n}\nserver{\n    listen 80;\n    server_name localhost;\n  \n    location /api/{\n        proxy_pass http://webservers/admin;#负载均衡\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241102231642-066md8h","Type":"NodeParagraph","Properties":{"id":"20241102231642-066md8h","updated":"20241102231642"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"upstream："},{"Type":"NodeText","Data":"如果代理服务器是一组服务器的话，我们可以使用upstream指令配置后端服务器组。"}]},{"ID":"20241102231642-qk37xbq","Type":"NodeParagraph","Properties":{"id":"20241102231642-qk37xbq","updated":"20241102231739"},"Children":[{"Type":"NodeText","Data":"如上代码的含义是：监听"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"80"},{"Type":"NodeText","Data":"​端口号， 然后当我们访问 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:80/api/../.."},{"Type":"NodeText","Data":"​这样的接口的时候，它会通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"location /api/ {}"},{"Type":"NodeText","Data":"​ 这样的反向代理到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://webservers/admin"},{"Type":"NodeText","Data":"​，根据"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"webservers"},{"Type":"NodeText","Data":"​名称找到一组服务器，根据设置的负载均衡策略(默认是轮询)转发到具体的服务器。"}]},{"ID":"20241102231642-m726uu6","Type":"NodeParagraph","Properties":{"id":"20241102231642-m726uu6","updated":"20241102231642"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"注："},{"Type":"NodeText","Data":"upstream后面的名称可自定义，但要上下保持一致。"}]},{"ID":"20241102231749-ya3jzb7","Type":"NodeParagraph","Properties":{"id":"20241102231749-ya3jzb7","updated":"20241102231749"}},{"ID":"20241102231807-qph4n3d","Type":"NodeParagraph","Properties":{"id":"20241102231807-qph4n3d","updated":"20241102231807"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"nginx 负载均衡策略："}]},{"ID":"20241102231807-icmvbgi","Type":"NodeTable","TableAligns":[2,2],"Properties":{"colgroup":"width: 162px;|width: 812px;","id":"20241102231807-icmvbgi","updated":"20241102231807"},"Children":[{"Type":"NodeTableHead","Data":"thead","Children":[{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"th","TableCellAlign":2,"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"名称"}]},{"Type":"NodeTableCell","Data":"th","TableCellAlign":2,"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"说明"}]}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"轮询"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"默认方式"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"weight"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"权重方式，默认为1，权重越高，被分配的客户端请求就越多"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"ip"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"_"}]},{"Type":"NodeText","Data":"hash"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"依据ip分配方式，这样每个访客可以固定访问一个后端服务"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"least"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"_"}]},{"Type":"NodeText","Data":"conn"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"依据最少连接方式，把请求优先分配给连接数少的后端服务"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"url"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"_"}]},{"Type":"NodeText","Data":"hash"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"依据url分配方式，这样相同的url会被分配到同一个后端服务"}]}]},{"Type":"NodeTableRow","Data":"tr","Children":[{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"fair"}]},{"Type":"NodeTableCell","Data":"td","TableCellAlign":2,"Children":[{"Type":"NodeText","Data":"依据响应时间方式，响应时间短的服务将会被优先分配"}]}]}]},{"ID":"20241102231807-q32uo0n","Type":"NodeParagraph","Properties":{"id":"20241102231807-q32uo0n","updated":"20241102231807"},"Children":[{"Type":"NodeText","Data":"具体配置方式："}]},{"ID":"20241102231807-bmfu65v","Type":"NodeParagraph","Properties":{"id":"20241102231807-bmfu65v","updated":"20241102231807"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"轮询："}]},{"ID":"20241102231807-v39vyr5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241102231807-v39vyr5","updated":"20241102231840"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bmdpbng="},{"Type":"NodeCodeBlockCode","Data":"upstream webservers{\n    server 192.168.100.128:8080;\n    server 192.168.100.129:8080;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241102231807-r68oslv","Type":"NodeParagraph","Properties":{"id":"20241102231807-r68oslv","updated":"20241102231807"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"weight:"}]},{"ID":"20241102231807-z39qsez","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241102231807-z39qsez","updated":"20241102231854"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bmdpbng="},{"Type":"NodeCodeBlockCode","Data":"upstream webservers{\n    server 192.168.100.128:8080 weight=90;\n    server 192.168.100.129:8080 weight=10;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241102231807-4e8j682","Type":"NodeParagraph","Properties":{"id":"20241102231807-4e8j682","updated":"20241102231807"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"ip_hash:"}]},{"ID":"20241102231807-dviyyqi","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241102231807-dviyyqi","updated":"20241102231857"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bmdpbng="},{"Type":"NodeCodeBlockCode","Data":"upstream webservers{\n    ip_hash;\n    server 192.168.100.128:8080;\n    server 192.168.100.129:8080;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241102231807-h7i2ja2","Type":"NodeParagraph","Properties":{"id":"20241102231807-h7i2ja2","updated":"20241102231807"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"least_conn:"}]},{"ID":"20241102231807-is7y6jo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241102231807-is7y6jo","updated":"20241102231901"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bmdpbng="},{"Type":"NodeCodeBlockCode","Data":"upstream webservers{\n    least_conn;\n    server 192.168.100.128:8080;\n    server 192.168.100.129:8080;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241102231807-7nurd2h","Type":"NodeParagraph","Properties":{"id":"20241102231807-7nurd2h","updated":"20241102231807"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"url_hash:"}]},{"ID":"20241102231807-apjqb6z","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241102231807-apjqb6z","updated":"20241102231904"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bmdpbng="},{"Type":"NodeCodeBlockCode","Data":"upstream webservers{\n    hash \u0026request_uri;\n    server 192.168.100.128:8080;\n    server 192.168.100.129:8080;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241102231807-7efhmcu","Type":"NodeParagraph","Properties":{"id":"20241102231807-7efhmcu","updated":"20241102231807"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"fair:"}]},{"ID":"20241102231807-oc8sbeu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241102231807-oc8sbeu","updated":"20241102231907"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bmdpbng="},{"Type":"NodeCodeBlockCode","Data":"upstream webservers{\n    server 192.168.100.128:8080;\n    server 192.168.100.129:8080;\n    fair;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241102231914-30c4ut2","Type":"NodeParagraph","Properties":{"id":"20241102231914-30c4ut2","updated":"20241102231914"}}]}