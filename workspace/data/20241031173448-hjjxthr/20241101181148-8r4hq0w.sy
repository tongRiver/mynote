{"ID":"20241101181148-8r4hq0w","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241101181148-8r4hq0w","title":"跨域问题-api解决方案","type":"doc","updated":"20241101234607"},"Children":[{"ID":"20241101195836-5hh8tym","Type":"NodeParagraph","Properties":{"id":"20241101195836-5hh8tym","updated":"20241101195850"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"tag","TextMarkTextContent":"跨域问题"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241101181258-umag2ny","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241101181258-umag2ny","updated":"20241101192241"},"Children":[{"Type":"NodeText","Data":"前端解决方案"}]},{"ID":"20241101181148-ezx6d4i","Type":"NodeParagraph","Properties":{"id":"20241101181148-ezx6d4i","updated":"20241101181148"},"Children":[{"Type":"NodeText","Data":"好的，我详细解释一下通过"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api"},{"Type":"NodeText","Data":"​路径解决跨域问题的过程。"}]},{"ID":"20241101181231-u6u9fni","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241101181231-u6u9fni","updated":"20241101181333"},"Children":[{"Type":"NodeText","Data":"背景知识：跨域问题"}]},{"ID":"20241101181231-zrcls6w","Type":"NodeParagraph","Properties":{"id":"20241101181231-zrcls6w","updated":"20241101181231"},"Children":[{"Type":"NodeText","Data":"跨域问题是由于浏览器的同源策略引起的。同源策略是针对 Web 应用的一种安全机制，限制一个源（协议、域名和端口都相同）加载或请求另一个源的资源。当你的前端应用需要访问不同源的API，比如从 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:3000"},{"Type":"NodeText","Data":"​ 请求 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://api.example.com"},{"Type":"NodeText","Data":"​，就可能触发跨域问题。"}]},{"ID":"20241101181333-rnrk9jy","Type":"NodeParagraph","Properties":{"id":"20241101181333-rnrk9jy","updated":"20241101181333"}},{"ID":"20241101181231-txje2j2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241101181231-txje2j2","updated":"20241101181704"},"Children":[{"Type":"NodeText","Data":"使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api"},{"Type":"NodeText","Data":"​路径解决跨域问题"}]},{"ID":"20241101181231-jklawo8","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241101181231-jklawo8","updated":"20241101181704"},"Children":[{"Type":"NodeText","Data":"1. 在开发环境中使用代理"}]},{"ID":"20241101181231-oswr2ja","Type":"NodeParagraph","Properties":{"id":"20241101181231-oswr2ja","updated":"20241101181341"},"Children":[{"Type":"NodeText","Data":"在"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"开发环境"},{"Type":"NodeText","Data":"中，前端应用通常通过本地服务器运行，如 Webpack Dev Server、Vite 或 Create React App 的开发服务器。这些工具允许我们配置代理。"}]},{"ID":"20241101181231-qkz2h1l","Type":"NodeList","ListData":{},"Properties":{"id":"20241101181231-qkz2h1l","updated":"20241101181651"},"Children":[{"ID":"20241101181231-94kzo5p","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101181231-94kzo5p","updated":"20241101181231"},"Children":[{"ID":"20241101181231-t5ww9in","Type":"NodeParagraph","Properties":{"id":"20241101181231-t5ww9in","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20241101181409"},"Children":[{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"strong","TextMarkTextContent":"为什么需要代理？"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeText","Data":"本地开发时，前端应用通常运行在例如 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"http://localhost:3000"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​ 上，而后端 API 可能运行在不同的端口或地址，比如 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"http://localhost:5000"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​。直接请求后端API会触发跨域问题。"}]}]},{"ID":"20241101181231-l4s6xgh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101181231-l4s6xgh","updated":"20241101181231"},"Children":[{"ID":"20241101181231-lrkws4v","Type":"NodeParagraph","Properties":{"id":"20241101181231-lrkws4v","updated":"20241101181231"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"如何配置代理？"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeText","Data":"比如在 webpack 中，你可以在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"webpack.config.js"},{"Type":"NodeText","Data":"​ 中配置 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"devServer"},{"Type":"NodeText","Data":"​："}]},{"ID":"20241101181231-0myjyz0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101181231-0myjyz0","updated":"20241101181231"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"module.exports = {\n  // ...其他配置\n  devServer: {\n    proxy: {\n      '/api': {\n        target: 'http://localhost:5000',\n        pathRewrite: {'^/api' : ''},\n        changeOrigin: true,\n      }\n    }\n  }\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101181231-ssrjbmc","Type":"NodeParagraph","Properties":{"id":"20241101181231-ssrjbmc","updated":"20241101181231"},"Children":[{"Type":"NodeText","Data":"这样，任何请求 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:3000/api/users"},{"Type":"NodeText","Data":"​ 的请求事实上会被代理服务器转发到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:5000/users"},{"Type":"NodeText","Data":"​。由于是同一个开发服务器发起的请求，这就不会触发跨域问题。"}]}]},{"ID":"20241101181635-gu5smx5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101181635-gu5smx5","updated":"20241101181651"},"Children":[{"ID":"20241101181635-vd9r2ei","Type":"NodeParagraph","Properties":{"id":"20241101181635-vd9r2ei","updated":"20241101181651"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在我们熟悉的vue项目中"}]},{"ID":"20241101181646-s2n5khz","Type":"NodeParagraph","Properties":{"id":"20241101181646-s2n5khz","updated":"20241101181646"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241101181646-cznpdr5.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]}]}]},{"ID":"20241101181704-vf5ih53","Type":"NodeParagraph","Properties":{"id":"20241101181704-vf5ih53","updated":"20241101181704"}},{"ID":"20241101181231-w6t2oox","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241101181231-w6t2oox","updated":"20241101182847"},"Children":[{"Type":"NodeText","Data":"2. 在生产环境使用反向代理（如 Nginx）"}]},{"ID":"20241101181231-59h1za6","Type":"NodeList","ListData":{},"Properties":{"id":"20241101181231-59h1za6","updated":"20241101181231"},"Children":[{"ID":"20241101181231-j0dtb9l","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101181231-j0dtb9l","updated":"20241101181231"},"Children":[{"ID":"20241101181231-jd6c3p5","Type":"NodeParagraph","Properties":{"id":"20241101181231-jd6c3p5","updated":"20241101181231"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"什么是反向代理？"},{"Type":"NodeBr","Data":"br"},{"Type":"NodeText","Data":"如 Nginx 或 Apache 这样的服务器可以被配置为反向代理服务器。它们负责接收客户端的请求然后将它们转发给后台的API服务器。"}]}]},{"ID":"20241101181231-apnpk1o","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101181231-apnpk1o","updated":"20241101181231"},"Children":[{"ID":"20241101181231-tfkckq5","Type":"NodeParagraph","Properties":{"id":"20241101181231-tfkckq5","updated":"20241101181231"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"具体实现方法："},{"Type":"NodeBr","Data":"br"},{"Type":"NodeText","Data":"举个例子，在 Nginx 中可以这样配置："}]},{"ID":"20241101181231-zkc34km","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101181231-zkc34km","updated":"20241101181231"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bmdpbng="},{"Type":"NodeCodeBlockCode","Data":"server {\n    listen 80;\n    server_name yourdomain.com;\n\n    location /api {\n        proxy_pass http://api.backend.server;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n    location / {\n        root /path/to/your/frontend/build;\n        try_files $uri $uri/ /index.html;\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101181231-7dji340","Type":"NodeParagraph","Properties":{"id":"20241101181231-7dji340","updated":"20241101181231"},"Children":[{"Type":"NodeText","Data":"在这里，用户请求 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://yourdomain.com/api/something"},{"Type":"NodeText","Data":"​ 会被 Nginx 拦截并转发到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://api.backend.server/something"},{"Type":"NodeText","Data":"​。这对于客户端来说仍然是同一域名的请求。"}]}]}]},{"ID":"20241101182847-j45dfp8","Type":"NodeParagraph","Properties":{"id":"20241101182847-j45dfp8","updated":"20241101182847"}},{"ID":"20241101181231-91o4ka5","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241101181231-91o4ka5","updated":"20241101191956"},"Children":[{"Type":"NodeText","Data":"3. 后端CORS配置"}]},{"ID":"20241101181231-cxno2jv","Type":"NodeList","ListData":{},"Properties":{"id":"20241101181231-cxno2jv","updated":"20241101181231"},"Children":[{"ID":"20241101181231-c8bi69q","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101181231-c8bi69q","updated":"20241101181231"},"Children":[{"ID":"20241101181231-dycgpdj","Type":"NodeParagraph","Properties":{"id":"20241101181231-dycgpdj","updated":"20241101181231"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"CORS是什么？"},{"Type":"NodeText","Data":"\n跨域资源共享（CORS）是一个允许某个源的请求被另一个源接受的机制，通过在服务器上设置HTTP头来实现的。"}]}]},{"ID":"20241101181231-khh1wiv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101181231-khh1wiv","updated":"20241101181231"},"Children":[{"ID":"20241101181231-nugtzyp","Type":"NodeParagraph","Properties":{"id":"20241101181231-nugtzyp","updated":"20241101181231"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"启用 CORS："},{"Type":"NodeText","Data":"\n如果你可以对 API 服务器进行配置，你可以选择在服务器上启用 CORS，使它接受跨域请求。例如，通过设置正确的响应头："}]},{"ID":"20241101181231-jrvip17","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101181231-jrvip17","updated":"20241101181231"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHR0cA=="},{"Type":"NodeCodeBlockCode","Data":"Access-Control-Allow-Origin: http://yourdomain.com\nAccess-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, Authorization\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241101181231-57plqk9","Type":"NodeParagraph","Properties":{"id":"20241101181231-57plqk9","updated":"20241101181231"},"Children":[{"Type":"NodeText","Data":"通过以上的方案，前端应用可以在开发阶段和生产环境中安全地解决跨域问题。通过配置开发服务器代理和生产环境的反向代理，前端应用可以在不直接暴露真实 API 服务器地址的情况下安全地调用 API。"}]},{"ID":"20241101191955-ars08rt","Type":"NodeParagraph","Properties":{"id":"20241101191955-ars08rt","updated":"20241101191955"}},{"ID":"20241101191956-xleddty","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241101191956-xleddty","updated":"20241101194544"},"Children":[{"Type":"NodeText","Data":"整体流程"}]},{"ID":"20241101192010-2wothsk","Type":"NodeParagraph","Properties":{"id":"20241101192010-2wothsk","updated":"20241101192010"},"Children":[{"Type":"NodeText","Data":"在开发环境中，这是使用代理解决跨域问题的一个典型做法。具体流程如下："}]},{"ID":"20241101192010-vj1vpus","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101192010-vj1vpus","updated":"20241101192036"},"Children":[{"ID":"20241101192010-md6pam1","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101192010-md6pam1","updated":"20241101192036"},"Children":[{"ID":"20241101192010-r5jw19i","Type":"NodeParagraph","Properties":{"id":"20241101192010-r5jw19i","updated":"20241101192010"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"前端请求"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101192010-mj5uz86","Type":"NodeList","ListData":{},"Properties":{"id":"20241101192010-mj5uz86","updated":"20241101192036"},"Children":[{"ID":"20241101192010-suqn8jy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101192010-suqn8jy","updated":"20241101192010"},"Children":[{"ID":"20241101192010-kq7f988","Type":"NodeParagraph","Properties":{"id":"20241101192010-kq7f988","updated":"20241101192010"},"Children":[{"Type":"NodeText","Data":"你的前端应用在浏览器中运行，并通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:3000"},{"Type":"NodeText","Data":"​ 提供服务。"}]}]},{"ID":"20241101192010-aafkgz3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101192010-aafkgz3","updated":"20241101192036"},"Children":[{"ID":"20241101192010-ddhyqqp","Type":"NodeParagraph","Properties":{"id":"20241101192010-ddhyqqp","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20241101192036"},"Children":[{"Type":"NodeText","Data":"当前端代码需要调用后端API时，比如获取用户数据，你发起一个请求到 "},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);"},"TextMarkType":"code","TextMarkTextContent":"http://localhost:3000/api/users"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);\"}"},{"Type":"NodeText","Data":"​。"}]}]}]}]},{"ID":"20241101192010-1bd0gja","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241101192010-1bd0gja","updated":"20241101192010"},"Children":[{"ID":"20241101192010-l5v0s9b","Type":"NodeParagraph","Properties":{"id":"20241101192010-l5v0s9b","updated":"20241101192010"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"代理服务器转发"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101192010-vvyfxui","Type":"NodeList","ListData":{},"Properties":{"id":"20241101192010-vvyfxui","updated":"20241101192010"},"Children":[{"ID":"20241101192010-w26qi56","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101192010-w26qi56","updated":"20241101192010"},"Children":[{"ID":"20241101192010-6sghqoc","Type":"NodeParagraph","Properties":{"id":"20241101192010-6sghqoc","updated":"20241101192010"},"Children":[{"Type":"NodeText","Data":"在开发服务器中（例如使用 Webpack Dev Server、Vite 等），你已经配置了代理规则。"}]}]},{"ID":"20241101192010-e36l63w","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101192010-e36l63w","updated":"20241101192010"},"Children":[{"ID":"20241101192010-99vjd76","Type":"NodeParagraph","Properties":{"id":"20241101192010-99vjd76","updated":"20241101192010"},"Children":[{"Type":"NodeText","Data":"这个开发服务器收到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:3000/api/users"},{"Type":"NodeText","Data":"​ 的请求，根据代理配置，它会将请求转发到后端服务器上，比如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:5000/users"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241101192010-v09lxce","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101192010-v09lxce","updated":"20241101192010"},"Children":[{"ID":"20241101192010-cye309d","Type":"NodeParagraph","Properties":{"id":"20241101192010-cye309d","updated":"20241101192010"},"Children":[{"Type":"NodeText","Data":"这里的路径重写也会根据配置进行调整，比如去掉 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api"},{"Type":"NodeText","Data":"​ 前缀，准确匹配后端的路由。"}]}]}]}]},{"ID":"20241101192010-dkg5xa3","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241101192010-dkg5xa3","updated":"20241101192010"},"Children":[{"ID":"20241101192010-tx7ji5d","Type":"NodeParagraph","Properties":{"id":"20241101192010-tx7ji5d","updated":"20241101192010"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"后端处理请求"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101192010-kk41sif","Type":"NodeList","ListData":{},"Properties":{"id":"20241101192010-kk41sif","updated":"20241101192010"},"Children":[{"ID":"20241101192010-vfh6304","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101192010-vfh6304","updated":"20241101192010"},"Children":[{"ID":"20241101192010-otu3vt6","Type":"NodeParagraph","Properties":{"id":"20241101192010-otu3vt6","updated":"20241101192010"},"Children":[{"Type":"NodeText","Data":"后端服务器（运行在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:5000"},{"Type":"NodeText","Data":"​）收到转发过来的请求，执行相应的逻辑，比如查询数据库，处理业务逻辑，然后返回结果给开发服务器。"}]}]}]}]},{"ID":"20241101192010-c2v764r","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241101192010-c2v764r","updated":"20241101192010"},"Children":[{"ID":"20241101192010-nekmp76","Type":"NodeParagraph","Properties":{"id":"20241101192010-nekmp76","updated":"20241101192010"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"开发服务器响应前端"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101192010-osqwg9n","Type":"NodeList","ListData":{},"Properties":{"id":"20241101192010-osqwg9n","updated":"20241101192010"},"Children":[{"ID":"20241101192010-gb5r08c","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101192010-gb5r08c","updated":"20241101192010"},"Children":[{"ID":"20241101192010-9lcn5kf","Type":"NodeParagraph","Properties":{"id":"20241101192010-9lcn5kf","updated":"20241101192010"},"Children":[{"Type":"NodeText","Data":"开发服务器再将后端返回的响应结果传递回前端，也就是浏览器，使得你的前端应用可以继续处理这些数据。"}]}]}]}]}]},{"ID":"20241101192010-ghpphbt","Type":"NodeParagraph","Properties":{"id":"20241101192010-ghpphbt","updated":"20241101192149"},"Children":[{"Type":"NodeText","Data":"这种方法的好处是，"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"浏览器只认为请求有一个来源，即前端项目自己的开发服务器 ("},{"Type":"NodeTextMark","TextMarkType":"code mark","TextMarkTextContent":"localhost:3000"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":")"},{"Type":"NodeText","Data":"，这避免了"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"跨域限制"},{"Type":"NodeText","Data":"，同时"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"隐藏了后端服务的实际位置和端口"},{"Type":"NodeText","Data":"。"}]},{"ID":"20241101192010-df79gtk","Type":"NodeParagraph","Properties":{"id":"20241101192010-df79gtk","updated":"20241101192010"},"Children":[{"Type":"NodeText","Data":"在生产环境中，则通常通过配置 Nginx 或 Apache 作为反向代理来实现类似的功能。代理服务器将请求根据路径规则转发到实际的后端服务地址上，而对外暴露的仍然是同一个域（如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://yourdomain.com"},{"Type":"NodeText","Data":"​），从而解决跨域问题。"}]},{"ID":"20241101192248-fx5rnua","Type":"NodeParagraph","Properties":{"id":"20241101192248-fx5rnua","updated":"20241101192248"}},{"ID":"20241101194521-ma9glhr","Type":"NodeParagraph","Properties":{"id":"20241101194521-ma9glhr","updated":"20241101194544"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241101194521-p22ad80.png"},{"Type":"NodeLinkSpace"},{"Type":"NodeLinkTitle","Data":"前端解决跨域问题方案"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241101192249-jbb77lp","Type":"NodeParagraph","Properties":{"id":"20241101192249-jbb77lp","updated":"20241101192249"}},{"ID":"20241101192249-y2lu9hm","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241101192249-y2lu9hm","updated":"20241101234607"},"Children":[{"Type":"NodeText","Data":"项目代码详解🤔"}]},{"ID":"20241101194606-xah6iys","Type":"NodeParagraph","Properties":{"id":"20241101194606-xah6iys","updated":"20241101234607"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"tag","TextMarkTextContent":"vea前端模版"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241101195726-8d9cycj","Type":"NodeParagraph","Properties":{"id":"20241101195726-8d9cycj","updated":"20241101195726"}},{"ID":"20241101195956-n2o8t7f","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241101195956-n2o8t7f","updated":"20241101200523"},"Children":[{"Type":"NodeText","Data":"网络请求部分"}]},{"ID":"20241101200127-ofklnlf","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241101200127-ofklnlf","updated":"20241101200523"},"Children":[{"Type":"NodeText","Data":"request.js"}]},{"ID":"20241101200000-k1rnxkq","Type":"NodeParagraph","Properties":{"id":"20241101200000-k1rnxkq","updated":"20241101200523"},"Children":[{"Type":"NodeText","Data":"首先在"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​中定义和配置了一个 Axios 实例，用来发起 HTTP 请求："}]},{"ID":"20241101200045-ops49k1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","id":"20241101200045-ops49k1","updated":"20241101200301"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"import axios from 'axios'\nimport store from '@/store'\nimport Router from '@/router'\nimport { removeToken,getToken } from '@/utils/auth'\n\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\n  withCredentials: true,\n  timeout: 500000\n})\n\n\n// axios请求拦截器\nservice.interceptors.request.use(\n  config =\u003e {\n    let token = getToken();\n    if(token){\n      config.headers['token'] = token;\n    }\n    return config;\n  },\n  error =\u003e {\n    console.log(error)\n    return Promise.reject(error)\n  }\n)\n\n\n//axios响应拦截器\nservice.interceptors.response.use(res=\u003e{\n    if (res.data.status === 500 \u0026\u0026 res.data.message === 'NOT_LOGIN') {// 返回登录页面\n        console.log('用户未登录, 直接跳转至登录页面');\n        removeToken();\n        Router.replace('/login');\n        return res;\n      } else {\n        return res;\n      }\n    },\n\n    error =\u003e {\n      console.log('err' + error)\n      let { message } = error;\n      if (message == \"Network Error\") {\n        message = \"后端接口连接异常\";\n      }\n      else if (message.includes(\"timeout\")) {\n        message = \"系统接口请求超时\";\n      }\n      else if (message.includes(\"Request failed with status code\")) {\n        message = \"系统接口\" + message.substr(message.length - 3) + \"异常\";\n      }\n      return Promise.reject(error)\n\n})\n\nexport default service\n\n// service.request()\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101200058-itgkabo","Type":"NodeParagraph","Properties":{"id":"20241101200058-itgkabo","updated":"20241101200058"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​ 文件中定义了一个经过自定义配置和拦截器设置的 Axios 实例，这个实例被用来发起 HTTP 请求。它主要用于处理你的 Vue 项目中的所有网络请求，简化请求和响应的处理逻辑，提高代码的可维护性。以下是这个文件的重要组成部分和作用解析，以及如何使用这个 Axios 实例。"}]},{"ID":"20241101200058-c1fmywz","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241101200058-c1fmywz","updated":"20241101200058"},"Children":[{"Type":"NodeText","Data":"主要组成部分及其作用"}]},{"ID":"20241101200058-ztak6a0","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101200058-ztak6a0","updated":"20241101200058"},"Children":[{"ID":"20241101200058-0tctltu","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101200058-0tctltu","updated":"20241101200058"},"Children":[{"ID":"20241101200058-ehshsfd","Type":"NodeParagraph","Properties":{"id":"20241101200058-ehshsfd","updated":"20241101200058"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Axios 实例创建"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101200058-g8qn1ga","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101200058-g8qn1ga","updated":"20241101200058"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"const service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API,\n  withCredentials: true,\n  timeout: 500000\n})\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101200058-l2lv968","Type":"NodeList","ListData":{},"Properties":{"id":"20241101200058-l2lv968","updated":"20241101200058"},"Children":[{"ID":"20241101200058-39dxi8a","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200058-39dxi8a","updated":"20241101200058"},"Children":[{"ID":"20241101200058-h4yxcia","Type":"NodeParagraph","Properties":{"id":"20241101200058-h4yxcia","updated":"20241101200058"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baseURL"},{"Type":"NodeText","Data":"​: 设置基础URL，通常是接口的公共部分前缀。这可以在项目的环境文件中配置（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".env*"},{"Type":"NodeText","Data":"​），例如开发和生产环境中的不同URL。"}]}]},{"ID":"20241101200058-5w3b9ky","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200058-5w3b9ky","updated":"20241101200058"},"Children":[{"ID":"20241101200058-lookknc","Type":"NodeParagraph","Properties":{"id":"20241101200058-lookknc","updated":"20241101200058"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"withCredentials"},{"Type":"NodeText","Data":"​: 允许跨域请求携带凭证（如cookies）。"}]}]},{"ID":"20241101200058-5jv4fe6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200058-5jv4fe6","updated":"20241101200058"},"Children":[{"ID":"20241101200058-lqi15bx","Type":"NodeParagraph","Properties":{"id":"20241101200058-lqi15bx","updated":"20241101200058"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"timeout"},{"Type":"NodeText","Data":"​: 请求超时时间，单位毫秒。"}]}]}]}]},{"ID":"20241101200058-l9vsdmv","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241101200058-l9vsdmv","updated":"20241101200058"},"Children":[{"ID":"20241101200058-85m4tmp","Type":"NodeParagraph","Properties":{"id":"20241101200058-85m4tmp","updated":"20241101200058"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"请求拦截器"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101200058-ztesg95","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101200058-ztesg95","updated":"20241101200058"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"service.interceptors.request.use(\n  config =\u003e {\n    let token = getToken();\n    if(token){\n      config.headers['token'] = token;\n    }\n    return config;\n  },\n  error =\u003e {\n    return Promise.reject(error)\n  }\n)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101200058-m3v2367","Type":"NodeList","ListData":{},"Properties":{"id":"20241101200058-m3v2367","updated":"20241101200058"},"Children":[{"ID":"20241101200058-f2kucga","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200058-f2kucga","updated":"20241101200058"},"Children":[{"ID":"20241101200058-w8rag27","Type":"NodeParagraph","Properties":{"id":"20241101200058-w8rag27","updated":"20241101200058"},"Children":[{"Type":"NodeText","Data":"每次请求前调用，允许在请求发送之前对请求进行一些操作，比如在请求头中加入令牌（Token）来进行身份验证。"}]}]},{"ID":"20241101200058-1nfihl7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200058-1nfihl7","updated":"20241101200058"},"Children":[{"ID":"20241101200058-htdtij4","Type":"NodeParagraph","Properties":{"id":"20241101200058-htdtij4","updated":"20241101200058"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"getToken()"},{"Type":"NodeText","Data":"​: 从本地存储或其他存储介质获取用户的令牌。"}]}]},{"ID":"20241101200058-4xbbst3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200058-4xbbst3","updated":"20241101200058"},"Children":[{"ID":"20241101200058-hgorgja","Type":"NodeParagraph","Properties":{"id":"20241101200058-hgorgja","updated":"20241101200058"},"Children":[{"Type":"NodeText","Data":"请求出错时，直接返回错误。"}]}]}]}]},{"ID":"20241101200058-xn2chwo","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241101200058-xn2chwo","updated":"20241101200058"},"Children":[{"ID":"20241101200058-942ylrd","Type":"NodeParagraph","Properties":{"id":"20241101200058-942ylrd","updated":"20241101200058"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"响应拦截器"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101200058-wpqbyrd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101200058-wpqbyrd","updated":"20241101200058"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"service.interceptors.response.use(\n  res =\u003e {\n    if (res.data.status === 500 \u0026\u0026 res.data.message === 'NOT_LOGIN') {\n      removeToken();\n      Router.replace('/login');\n      return res;\n    } else {\n      return res;\n    }\n  },\n  error =\u003e {\n    let { message } = error;\n    if (message == \"Network Error\") {\n      message = \"后端接口连接异常\";\n    }\n    else if (message.includes(\"timeout\")) {\n      message = \"系统接口请求超时\";\n    }\n    else if (message.includes(\"Request failed with status code\")) {\n      message = \"系统接口\" + message.substr(message.length - 3) + \"异常\";\n    }\n    return Promise.reject(error)\n  }\n)\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101200058-47gy47r","Type":"NodeList","ListData":{},"Properties":{"id":"20241101200058-47gy47r","updated":"20241101200058"},"Children":[{"ID":"20241101200058-k5qhvxw","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200058-k5qhvxw","updated":"20241101200058"},"Children":[{"ID":"20241101200058-92qgifh","Type":"NodeParagraph","Properties":{"id":"20241101200058-92qgifh","updated":"20241101200058"},"Children":[{"Type":"NodeText","Data":"处理响应数据。在此实例中，主要是检查是否未登录，如果未登录，则移除Token并重定向到登录界面。"}]}]},{"ID":"20241101200058-sitpgit","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200058-sitpgit","updated":"20241101200058"},"Children":[{"ID":"20241101200058-w2avh4k","Type":"NodeParagraph","Properties":{"id":"20241101200058-w2avh4k","updated":"20241101200058"},"Children":[{"Type":"NodeText","Data":"处理错误，如网络错误、请求超时、请求失败等，并为不同的错误提供自定义的错误信息。"}]}]}]}]}]},{"ID":"20241101200112-ilhvm2i","Type":"NodeParagraph","Properties":{"id":"20241101200112-ilhvm2i","updated":"20241101200112"}},{"ID":"20241101200058-fzelv3k","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241101200058-fzelv3k","updated":"20241101201509"},"Children":[{"Type":"NodeText","Data":"如何使用这个 Axios 实例"}]},{"ID":"20241101200058-mcqdug1","Type":"NodeParagraph","Properties":{"id":"20241101200058-mcqdug1","updated":"20241101200058"},"Children":[{"Type":"NodeText","Data":"当你需要进行 HTTP 请求时，只需要使用这个经过配置的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​ 实例。以下是一些基本用法："}]},{"ID":"20241101200058-zp9b79t","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101200058-zp9b79t","updated":"20241101200058"},"Children":[{"ID":"20241101200058-vk0yz52","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101200058-vk0yz52","updated":"20241101200058"},"Children":[{"ID":"20241101200058-yco9au2","Type":"NodeParagraph","Properties":{"id":"20241101200058-yco9au2","updated":"20241101200058"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"GET 请求"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101200058-6pheum0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101200058-6pheum0","updated":"20241101200058"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"service.get('/endpoint', { params: { key: 'value' } })\n  .then(response =\u003e {\n    console.log(response.data);\n  })\n  .catch(error =\u003e {\n    console.error(error);\n  });\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241101200058-5tcxt7o","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241101200058-5tcxt7o","updated":"20241101200058"},"Children":[{"ID":"20241101200058-ysixklt","Type":"NodeParagraph","Properties":{"id":"20241101200058-ysixklt","updated":"20241101200058"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"POST 请求"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101200058-islgvs3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101200058-islgvs3","updated":"20241101200058"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"service.post('/endpoint', { key: 'value' })\n  .then(response =\u003e {\n    console.log(response.data);\n  })\n  .catch(error =\u003e {\n    console.error(error);\n  });\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241101200058-zcs2t83","Type":"NodeParagraph","Properties":{"id":"20241101200058-zcs2t83","updated":"20241101200058"},"Children":[{"Type":"NodeText","Data":"通过这样配置，所有请求都会自动附带上设置好的基础URL、超时时间、凭证等，并且在请求发送之前和响应回来之后进行预处理。这种封装方式简化了每次请求都要做的相同操作，使代码更加整洁和易于维护。"}]},{"ID":"20241101200010-os67z4s","Type":"NodeParagraph","Properties":{"id":"20241101200010-os67z4s","updated":"20241101200010"}},{"ID":"20241101200712-a1fn8k7","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241101200712-a1fn8k7","updated":"20241101215059"},"Children":[{"Type":"NodeText","Data":"api包下的js"}]},{"ID":"20241101200336-9907i55","Type":"NodeParagraph","Properties":{"id":"20241101200336-9907i55","updated":"20241101201527"},"Children":[{"Type":"NodeText","Data":"那我们的项目中是如何使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​中定义的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​的呢？就在api目录下的所有请求接口中："}]},{"ID":"20241101200752-uq6qln3","Type":"NodeParagraph","Properties":{"id":"20241101200752-uq6qln3","updated":"20241101200752"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 376px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241101200752-h32vn0o.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 376px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241101200011-lk8udze","Type":"NodeParagraph","Properties":{"id":"20241101200011-lk8udze","updated":"20241101201533"},"Children":[{"Type":"NodeText","Data":"例如"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"activity.js"},{"Type":"NodeText","Data":"​中："}]},{"ID":"20241101200818-calw0mf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101200818-calw0mf","updated":"20241101201419"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"import request from '@/utils/request'\n\n/**\n * 活动条件分页查询接口\n */\nexport function page(name,place,org,begin,end,page,pageSize) {\n  return request({\n    url: '/admin/act/page?name='+name+'\u0026place='+place+'\u0026org='+org+'\u0026begin='+begin+'\u0026end='+end+'\u0026page='+page+'\u0026pageSize='+pageSize,\n    method: 'get'\n  })\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101201443-zgowte5","Type":"NodeParagraph","Properties":{"id":"20241101201443-zgowte5","updated":"20241101215059"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"介绍"}]},{"ID":"20241101200839-toc9w98","Type":"NodeParagraph","Properties":{"id":"20241101200839-toc9w98","updated":"20241101200839"},"Children":[{"Type":"NodeText","Data":"是的，你这样的用法是完全可以的。这种方式利用了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"axios"},{"Type":"NodeText","Data":"​ 实例的灵活性，通过简单的封装，可以直接进行 HTTP 请求，同时也保持了代码的可读性和可维护性。你在这里通过一个名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"page"},{"Type":"NodeText","Data":"​ 的函数来包装请求，这样的做法有几个优点："}]},{"ID":"20241101200839-q8xr2uc","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101200839-q8xr2uc","updated":"20241101200839"},"Children":[{"ID":"20241101200839-w6l5zsd","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101200839-w6l5zsd","updated":"20241101200839"},"Children":[{"ID":"20241101200839-43gvkf5","Type":"NodeParagraph","Properties":{"id":"20241101200839-43gvkf5","updated":"20241101200839"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"代码简洁"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101200839-lzbxs0s","Type":"NodeList","ListData":{},"Properties":{"id":"20241101200839-lzbxs0s","updated":"20241101200839"},"Children":[{"ID":"20241101200839-pl40arc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200839-pl40arc","updated":"20241101200839"},"Children":[{"ID":"20241101200839-875di6z","Type":"NodeParagraph","Properties":{"id":"20241101200839-875di6z","updated":"20241101200839"},"Children":[{"Type":"NodeText","Data":"封装请求函数后，以后在项目中需要调用这个接口时，只需调用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"page"},{"Type":"NodeText","Data":"​ 函数，传递相应的参数即可，避免在各处重复拼接请求路径。"}]}]}]}]},{"ID":"20241101200839-wt0v8vc","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241101200839-wt0v8vc","updated":"20241101200839"},"Children":[{"ID":"20241101200839-xwl0e8m","Type":"NodeParagraph","Properties":{"id":"20241101200839-xwl0e8m","updated":"20241101200839"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"参数清晰"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101200839-dv8emvd","Type":"NodeList","ListData":{},"Properties":{"id":"20241101200839-dv8emvd","updated":"20241101200839"},"Children":[{"ID":"20241101200839-7ntjd2e","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200839-7ntjd2e","updated":"20241101200839"},"Children":[{"ID":"20241101200839-s2tzef8","Type":"NodeParagraph","Properties":{"id":"20241101200839-s2tzef8","updated":"20241101200839"},"Children":[{"Type":"NodeText","Data":"通过函数参数来传递请求所需的查询条件，这样可以清晰直观地看到这个接口需要哪些参数。"}]}]}]}]},{"ID":"20241101200839-fskthux","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241101200839-fskthux","updated":"20241101200839"},"Children":[{"ID":"20241101200839-pu70dmd","Type":"NodeParagraph","Properties":{"id":"20241101200839-pu70dmd","updated":"20241101200839"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"可维护性"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101200839-b3vymke","Type":"NodeList","ListData":{},"Properties":{"id":"20241101200839-b3vymke","updated":"20241101200839"},"Children":[{"ID":"20241101200839-ms3o2t5","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200839-ms3o2t5","updated":"20241101200839"},"Children":[{"ID":"20241101200839-5h6h9p5","Type":"NodeParagraph","Properties":{"id":"20241101200839-5h6h9p5","updated":"20241101200839"},"Children":[{"Type":"NodeText","Data":"如果接口路径或者请求方式需要更改，只需更新 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"page"},{"Type":"NodeText","Data":"​ 函数内部的实现即可，不需要在项目中各个调用此接口的地方逐一修改。"}]}]}]}]},{"ID":"20241101200839-nrfnegf","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241101200839-nrfnegf","updated":"20241101200839"},"Children":[{"ID":"20241101200839-1nhjpqa","Type":"NodeParagraph","Properties":{"id":"20241101200839-1nhjpqa","updated":"20241101200839"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"统一管理"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101200839-83ya9u5","Type":"NodeList","ListData":{},"Properties":{"id":"20241101200839-83ya9u5","updated":"20241101200839"},"Children":[{"ID":"20241101200839-04x6tab","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200839-04x6tab","updated":"20241101200839"},"Children":[{"ID":"20241101200839-gokiqg0","Type":"NodeParagraph","Properties":{"id":"20241101200839-gokiqg0","updated":"20241101200839"},"Children":[{"Type":"NodeText","Data":"根据功能模块将不同的 API 请求封装为多个函数，使项目结构更加清晰，便于后续开发维护。"}]}]}]}]}]},{"ID":"20241101201557-25oav9s","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241101201557-25oav9s","updated":"20241101201606"},"Children":[{"Type":"NodeText","Data":"小优化😄"}]},{"ID":"20241101200839-ollj4uv","Type":"NodeParagraph","Properties":{"id":"20241101200839-ollj4uv","updated":"20241101200839"},"Children":[{"Type":"NodeText","Data":"下面是一些关键点说明："}]},{"ID":"20241101200839-hq3js4q","Type":"NodeList","ListData":{},"Properties":{"id":"20241101200839-hq3js4q","updated":"20241101200839"},"Children":[{"ID":"20241101200839-1mhuijr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200839-1mhuijr","updated":"20241101200839"},"Children":[{"ID":"20241101200839-ims9bf7","Type":"NodeParagraph","Properties":{"id":"20241101200839-ims9bf7","updated":"20241101200839"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"URL 拼接"},{"Type":"NodeText","Data":": 你在 URL 中使用字符串拼接的方式来附加查询参数，这在简单场景下没问题，但需要注意特殊字符的处理，比如空格、\u0026等字符。通常可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"URLSearchParams"},{"Type":"NodeText","Data":"​ 或者 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"qs"},{"Type":"NodeText","Data":"​（query-string）来处理。"}]}]},{"ID":"20241101200839-p92zj64","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101200839-p92zj64","updated":"20241101200839"},"Children":[{"ID":"20241101200839-w6lwrfg","Type":"NodeParagraph","Properties":{"id":"20241101200839-w6lwrfg","updated":"20241101200839"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"函数参数说明"},{"Type":"NodeText","Data":":"}]},{"ID":"20241101200839-2uoyk3v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101200839-2uoyk3v","updated":"20241101200839"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"export function page(name, place, org, begin, end, page, pageSize) {\n return request({\n   url: '/admin/act/page',\n   method: 'get',\n   params: { name, place, org, begin, end, page, pageSize } // 推荐这种方式\n })\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101200839-typg849","Type":"NodeParagraph","Properties":{"id":"20241101200839-typg849","updated":"20241101200839"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"params"},{"Type":"NodeText","Data":"​ 属性来传递查询参数，更加整洁和安全地构建 URL。"}]}]}]},{"ID":"20241101200839-0m7n8x6","Type":"NodeParagraph","Properties":{"id":"20241101200839-0m7n8x6","updated":"20241101200839"},"Children":[{"Type":"NodeText","Data":"这种方式让 API 请求的管理变得更为简单和模块化，提高了整个应用的健壮性。如果项目变复杂，这种封装方式还有利于错误处理、数据解析和重用能力的增强。"}]},{"ID":"20241101195726-ve7832k","Type":"NodeParagraph","Properties":{"id":"20241101195726-ve7832k","updated":"20241101195726"}},{"ID":"20241101192249-xj44vxj","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241101192249-xj44vxj","updated":"20241101202033"},"Children":[{"Type":"NodeText","Data":"代码解释"}]},{"ID":"20241101201740-k5r9a8t","Type":"NodeBlockquote","Properties":{"id":"20241101201740-k5r9a8t","updated":"20241101201742"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241101201741-4o3x66v","Type":"NodeParagraph","Properties":{"id":"20241101201741-4o3x66v","updated":"20241101201742"},"Children":[{"Type":"NodeText","Data":"但是我有点没看懂，这里的request在刚刚的request.js中没有定义呀，刚刚定义的是service吧，这里为什么可以用request({ })这样？"}]}]},{"ID":"20241101201747-1lbaf2p","Type":"NodeParagraph","Properties":{"id":"20241101201747-1lbaf2p","updated":"20241101201747"}},{"ID":"20241101201336-2udf8p8","Type":"NodeParagraph","Properties":{"id":"20241101201336-2udf8p8","updated":"20241101201336"},"Children":[{"Type":"NodeText","Data":"你提到的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request"},{"Type":"NodeText","Data":"​ 实际是从 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​ 导出的默认实例。按照 JavaScript 模块系统的规则，当一个模块导出一个默认对象时，在导入时可以使用任何名称来引用这个默认导出。在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​ 中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​ 是通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"export default"},{"Type":"NodeText","Data":"​ 导出的，所以在其他文件中导入时可以命名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request"},{"Type":"NodeText","Data":"​ 或任意其他名称。"}]},{"ID":"20241101201336-t3b47e1","Type":"NodeParagraph","Properties":{"id":"20241101201336-t3b47e1","updated":"20241101201336"},"Children":[{"Type":"NodeText","Data":"详细解释"}]},{"ID":"20241101201336-30xpghl","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101201336-30xpghl","updated":"20241101201807"},"Children":[{"ID":"20241101201336-rrjjtjo","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101201336-rrjjtjo","updated":"20241101201336"},"Children":[{"ID":"20241101201336-29165xi","Type":"NodeParagraph","Properties":{"id":"20241101201336-29165xi","updated":"20241101201336"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"strong code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​ "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"文件"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101201336-b9ui6it","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101201336-b9ui6it","updated":"20241101201336"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"const service = axios.create({\n  // ... other configurations\n});\n\n// ... interceptors and other configurations\n\nexport default service;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101201336-ijmvy2t","Type":"NodeParagraph","Properties":{"id":"20241101201336-ijmvy2t","updated":"20241101201336"},"Children":[{"Type":"NodeText","Data":"在这里，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​ 被定义为一个通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"axios.create()"},{"Type":"NodeText","Data":"​ 创建的 Axios 实例，并且被作为默认导出。因此，当你导入这个模块时，没有必要使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​ 作为导入名，你可以用任何名字来引用它。"}]}]},{"ID":"20241101201336-vrsm5vj","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241101201336-vrsm5vj","updated":"20241101201336"},"Children":[{"ID":"20241101201336-zdyktqu","Type":"NodeParagraph","Properties":{"id":"20241101201336-zdyktqu","updated":"20241101201336"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在其他模块中导入"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101201336-dm8cfaz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101201336-dm8cfaz","updated":"20241101201336"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"import request from '@/utils/request';\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101201336-v42c8v9","Type":"NodeParagraph","Properties":{"id":"20241101201336-v42c8v9","updated":"20241101201336"},"Children":[{"Type":"NodeText","Data":"由于 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​ 导出了一个默认对象，所以你可以在导入时使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request"},{"Type":"NodeText","Data":"​ 作为变量名。这只是一个变量名，与 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​ 中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​ 实例是同一个对象。这样 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request"},{"Type":"NodeText","Data":"​ 变量实际上是在引用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​ 实例。"}]}]},{"ID":"20241101201336-cm76wz3","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241101201336-cm76wz3","updated":"20241101201807"},"Children":[{"ID":"20241101201336-ynnnb6x","Type":"NodeParagraph","Properties":{"id":"20241101201336-ynnnb6x","updated":"20241101201336"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"实际使用"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101201336-zhwx1f8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101201336-zhwx1f8","updated":"20241101201336"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"export function page(name, place, org, begin, end, page, pageSize) {\n  return request({\n    url: '/admin/act/page',\n    method: 'get',\n    params: { name, place, org, begin, end, page, pageSize }\n  });\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101201336-37bx5wl","Type":"NodeParagraph","Properties":{"id":"20241101201336-37bx5wl","updated":"20241101201807"},"Children":[{"Type":"NodeText","Data":"在上面的代码中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request"},{"Type":"NodeText","Data":"​ 被当作一个函数使用，因为"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"它是"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"code mark","TextMarkTextContent":"axios.create()"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"返回的 Axios 实例"},{"Type":"NodeText","Data":"。这样的实例有许多方法，比如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".get()"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".post()"},{"Type":"NodeText","Data":"​, "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".delete()"},{"Type":"NodeText","Data":"​, 还有一个通用的接口 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request(config)"},{"Type":"NodeText","Data":"​ 可以用来处理各种请求配置。"}]}]}]},{"ID":"20241101201336-6f0k1xm","Type":"NodeParagraph","Properties":{"id":"20241101201336-6f0k1xm","updated":"20241101201336"},"Children":[{"Type":"NodeText","Data":"总结"}]},{"ID":"20241101201336-imhhiuu","Type":"NodeList","ListData":{},"Properties":{"id":"20241101201336-imhhiuu","updated":"20241101201336"},"Children":[{"ID":"20241101201336-4jx88ou","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101201336-4jx88ou","updated":"20241101201336"},"Children":[{"ID":"20241101201336-9xryyvo","Type":"NodeParagraph","Properties":{"id":"20241101201336-9xryyvo","updated":"20241101201336"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"默认导出与导入"},{"Type":"NodeText","Data":"："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​ 使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"export default"},{"Type":"NodeText","Data":"​ 导出了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​ 实例。在导入的时候，你可以随意命名，只要保持导入方式是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"import XXX from '...'"},{"Type":"NodeText","Data":"​， "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"XXX"},{"Type":"NodeText","Data":"​ 就代表该默认导出的内容。"}]}]},{"ID":"20241101201336-beof1k8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101201336-beof1k8","updated":"20241101201336"},"Children":[{"ID":"20241101201336-1ela0wx","Type":"NodeParagraph","Properties":{"id":"20241101201336-1ela0wx","updated":"20241101201336"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"可灵活命名"},{"Type":"NodeText","Data":"：在使用默认导出功能的时候，可以根据模块上下文为导入内容选择合适的名称。"}]}]}]},{"ID":"20241101201336-g134w6o","Type":"NodeParagraph","Properties":{"id":"20241101201336-g134w6o","updated":"20241101201336"},"Children":[{"Type":"NodeText","Data":"这就是为什么可以在调用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request()"},{"Type":"NodeText","Data":"​ 时，实现对 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​ 中 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"service"},{"Type":"NodeText","Data":"​ 实例功能的访问。"}]},{"ID":"20241101192250-wikevz0","Type":"NodeParagraph","Properties":{"id":"20241101192250-wikevz0","updated":"20241101192250"}},{"ID":"20241101202017-swgtr3c","Type":"NodeParagraph","Properties":{"id":"20241101202017-swgtr3c","updated":"20241101202017"}},{"ID":"20241101202019-wbpubwx","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241101202019-wbpubwx","updated":"20241101203011"},"Children":[{"Type":"NodeText","Data":"在vue组件中使用"}]},{"ID":"20241101202109-rgwet95","Type":"NodeBlockquote","Properties":{"id":"20241101202109-rgwet95","updated":"20241101202132"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241101202132-n2yrela","Type":"NodeParagraph","Properties":{"id":"20241101202132-n2yrela","updated":"20241101202132"},"Children":[{"Type":"NodeText","Data":"当我想使用这些接口的时候，直接使用函数并传入请求参数，然后用.then回调就可以了"}]}]},{"ID":"20241101202204-loy3cez","Type":"NodeParagraph","Properties":{"id":"20241101202204-loy3cez","updated":"20241101202204"}},{"ID":"20241101202151-z23yr65","Type":"NodeParagraph","Properties":{"id":"20241101202151-z23yr65","updated":"20241101202151"},"Children":[{"Type":"NodeText","Data":"是的，当你需要使用这些封装的接口函数时，可以直接调用这些函数并传入所需的参数，然后使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".then()"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".catch()"},{"Type":"NodeText","Data":"​ 处理返回的 Promise。这是一个典型的方式来处理异步操作的结果。"}]},{"ID":"20241101202151-snu8e26","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241101202151-snu8e26","updated":"20241101203011"},"Children":[{"Type":"NodeText","Data":"使用方法示例"}]},{"ID":"20241101202151-xgy0njj","Type":"NodeParagraph","Properties":{"id":"20241101202151-xgy0njj","updated":"20241101202151"},"Children":[{"Type":"NodeText","Data":"假设你已经按照之前介绍的方式封装好了一个函数，例如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"page()"},{"Type":"NodeText","Data":"​，你可以这样使用它："}]},{"ID":"20241101202151-mdousr4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101202151-mdousr4","updated":"20241101202151"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"// 调用 page 函数，并传入对应的参数\npage('活动名称', '活动地点', '组织者', '开始时间', '结束时间', 1, 10)\n  .then(response =\u003e {\n    // 成功处理响应，response.data 可以访问到返回的数据\n    console.log('数据获取成功:', response.data);\n  })\n  .catch(error =\u003e {\n    // 错误处理\n    console.error('请求发生错误:', error);\n  });\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101202151-hqd2cnj","Type":"NodeParagraph","Properties":{"id":"20241101202151-hqd2cnj","updated":"20241101202151"},"Children":[{"Type":"NodeText","Data":"解释："}]},{"ID":"20241101202151-qfmi4dp","Type":"NodeList","ListData":{},"Properties":{"id":"20241101202151-qfmi4dp","updated":"20241101202151"},"Children":[{"ID":"20241101202151-js3s67u","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101202151-js3s67u","updated":"20241101202151"},"Children":[{"ID":"20241101202151-ggj5tfb","Type":"NodeParagraph","Properties":{"id":"20241101202151-ggj5tfb","updated":"20241101202151"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"调用封装函数"},{"Type":"NodeText","Data":"：你调用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"page()"},{"Type":"NodeText","Data":"​ 函数时需要传入该接口需要的所有参数。"}]}]},{"ID":"20241101202151-w3lge53","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101202151-w3lge53","updated":"20241101202151"},"Children":[{"ID":"20241101202151-6z5jw8i","Type":"NodeParagraph","Properties":{"id":"20241101202151-6z5jw8i","updated":"20241101202151"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"处理响应"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101202151-8go1js5","Type":"NodeList","ListData":{},"Properties":{"id":"20241101202151-8go1js5","updated":"20241101202151"},"Children":[{"ID":"20241101202151-igw6who","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101202151-igw6who","updated":"20241101202151"},"Children":[{"ID":"20241101202151-62ssxnt","Type":"NodeParagraph","Properties":{"id":"20241101202151-62ssxnt","updated":"20241101202151"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"then(response =\u0026gt; {...})"},{"Type":"NodeText","Data":"​：当请求成功且服务器返回一个有效的响应时，进入这个处理函数。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"response"},{"Type":"NodeText","Data":"​ 对象包含很多有用的信息，如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"response.data"},{"Type":"NodeText","Data":"​ 是服务端返回的数据。"}]}]}]}]},{"ID":"20241101202151-9y1hg8o","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101202151-9y1hg8o","updated":"20241101202151"},"Children":[{"ID":"20241101202151-0k0nnik","Type":"NodeParagraph","Properties":{"id":"20241101202151-0k0nnik","updated":"20241101202151"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"处理错误"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101202151-2q5hgnt","Type":"NodeList","ListData":{},"Properties":{"id":"20241101202151-2q5hgnt","updated":"20241101202151"},"Children":[{"ID":"20241101202151-v49wmxh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101202151-v49wmxh","updated":"20241101202151"},"Children":[{"ID":"20241101202151-nm5kyby","Type":"NodeParagraph","Properties":{"id":"20241101202151-nm5kyby","updated":"20241101202151"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"catch(error =\u0026gt; {...})"},{"Type":"NodeText","Data":"​：当请求过程发生错误时（无网络、服务器返回错误状态码等），进入这个处理函数。"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"error"},{"Type":"NodeText","Data":"​ 对象包含错误的详细信息。"}]}]}]}]}]},{"ID":"20241101202151-si91cj5","Type":"NodeParagraph","Properties":{"id":"20241101202151-si91cj5","updated":"20241101202151"},"Children":[{"Type":"NodeText","Data":"建议"}]},{"ID":"20241101202151-nuvbdrv","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101202151-nuvbdrv","updated":"20241101202151"},"Children":[{"ID":"20241101202151-b9kdksd","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101202151-b9kdksd","updated":"20241101202151"},"Children":[{"ID":"20241101202151-uzvymsx","Type":"NodeParagraph","Properties":{"id":"20241101202151-uzvymsx","updated":"20241101202151"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"参数校验"},{"Type":"NodeText","Data":"：在调用函数时，确保参数按照预期的顺序和类型传递。"}]}]},{"ID":"20241101202151-zkmdb6e","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241101202151-zkmdb6e","updated":"20241101202151"},"Children":[{"ID":"20241101202151-zr21ir2","Type":"NodeParagraph","Properties":{"id":"20241101202151-zr21ir2","updated":"20241101202151"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"响应结构"},{"Type":"NodeText","Data":"：熟悉服务器返回的响应结构，以便正确地解析 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"response.data"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241101202151-8pusxvd","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241101202151-8pusxvd","updated":"20241101202151"},"Children":[{"ID":"20241101202151-e82iqtc","Type":"NodeParagraph","Properties":{"id":"20241101202151-e82iqtc","updated":"20241101202151"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"错误处理"},{"Type":"NodeText","Data":"：在项目中对错误处理有统一的策略，比如通过提示用户或记录日志，以便及时发现和解决问题。"}]}]}]},{"ID":"20241101202151-m9ph2s6","Type":"NodeParagraph","Properties":{"id":"20241101202151-m9ph2s6","updated":"20241101202151"},"Children":[{"Type":"NodeText","Data":"这样，封装好的函数就统一了 API 请求的接口和错误处理逻辑，提高了代码的重用性和一致性。"}]},{"ID":"20241101202145-6sjjz71","Type":"NodeParagraph","Properties":{"id":"20241101202145-6sjjz71","updated":"20241101202145"}},{"ID":"20241101202240-sc1s1ib","Type":"NodeParagraph","Properties":{"id":"20241101202240-sc1s1ib","updated":"20241101202249"},"Children":[{"Type":"NodeText","Data":"在我们的项目中，也是这样使用的："}]},{"ID":"20241101202551-rotoda0","Type":"NodeParagraph","Properties":{"id":"20241101202551-rotoda0","updated":"20241101202551"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241101202551-tpckyhr.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241101192250-wgvp6iu","Type":"NodeParagraph","Properties":{"id":"20241101192250-wgvp6iu","updated":"20241101192250"}},{"ID":"20241101203011-bgefdtz","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241101203011-bgefdtz","updated":"20241101215006"},"Children":[{"Type":"NodeText","Data":"URL的前面部分在哪里？"}]},{"ID":"20241101203033-snftwqj","Type":"NodeBlockquote","Properties":{"id":"20241101203033-snftwqj","updated":"20241101203915"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241101203034-hv4bx3g","Type":"NodeParagraph","Properties":{"id":"20241101203034-hv4bx3g","updated":"20241101203915"},"Children":[{"Type":"NodeText","Data":"但是我好奇的是，后端的地址是在哪定义的，刚刚在"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​中，自定义了"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baseURL"},{"Type":"NodeText","Data":"​，也就是"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baseURL: process.env.VUE_APP_BASE_API"},{"Type":"NodeText","Data":"​，但实际上"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VUE_APP_BASE_API"},{"Type":"NodeText","Data":"​在"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".env.development"},{"Type":"NodeText","Data":"​中定义的是这样"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VUE_APP_BASE_API = '/api'"},{"Type":"NodeText","Data":"​，那么后端地址在哪里定义的呢？？"}]}]},{"ID":"20241101214944-f3vb2tm","Type":"NodeParagraph","Properties":{"id":"20241101214944-f3vb2tm","updated":"20241101214944"}},{"ID":"20241101203031-ouiwmt2","Type":"NodeParagraph","Properties":{"id":"20241101203031-ouiwmt2","updated":"20241101214955"},"Children":[{"Type":"NodeText","Data":"在现代前后端分离的开发环境中，前端的接口请求通常是通过代理或静态配置的方式来访问后端服务。在你描述的情境中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VUE_APP_BASE_API"},{"Type":"NodeText","Data":"​ 设置为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api'"},{"Type":"NodeText","Data":"​，这表示在开发环境中，你的前端应用实际上是"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"通过代理来访问后端接口的"},{"Type":"NodeText","Data":"。"}]},{"ID":"20241101203031-e1e4ry3","Type":"NodeParagraph","Properties":{"id":"20241101203031-e1e4ry3","updated":"20241101203031"},"Children":[{"Type":"NodeText","Data":"以下是详细解释："}]},{"ID":"20241101203031-m55bypl","Type":"NodeParagraph","Properties":{"id":"20241101203031-m55bypl","updated":"20241101214922"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"1、"},{"Type":"NodeTextMark","TextMarkType":"code strong","TextMarkTextContent":"baseURL"},{"Type":"NodeText","Data":"​ "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"配置"}]},{"ID":"20241101203031-dcc5kad","Type":"NodeParagraph","Properties":{"id":"20241101203031-dcc5kad","updated":"20241101203031"},"Children":[{"Type":"NodeText","Data":"在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​ 中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baseURL"},{"Type":"NodeText","Data":"​ 被配置为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"process.env.VUE_APP_BASE_API"},{"Type":"NodeText","Data":"​。当运行开发环境时，这个值是从环境变量中读取的，即 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".env.development"},{"Type":"NodeText","Data":"​ 文件中的配置："}]},{"ID":"20241101203031-guno2no","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101203031-guno2no","updated":"20241101203031"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cGxhaW50ZXh0"},{"Type":"NodeCodeBlockCode","Data":"VUE_APP_BASE_API = '/api'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101203031-n17dxgn","Type":"NodeParagraph","Properties":{"id":"20241101203031-n17dxgn","updated":"20241101214927"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"2、代理配置"}]},{"ID":"20241101203031-43jfopb","Type":"NodeParagraph","Properties":{"id":"20241101203031-43jfopb","updated":"20241101203031"},"Children":[{"Type":"NodeText","Data":"在开发环境中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api'"},{"Type":"NodeText","Data":"​ 通常用来代理到实际的后端服务器。这个代理配置通常是通过 Vue CLI 或其他工具（如 Webpack）的开发服务器代理选项来完成的。以下是如何设置代理的一个示例："}]},{"ID":"20241101203031-80iwqn8","Type":"NodeParagraph","Properties":{"id":"20241101203031-80iwqn8","updated":"20241101214852"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Vue CLI 的代理设置"}]},{"ID":"20241101203031-06suo9e","Type":"NodeParagraph","Properties":{"id":"20241101203031-06suo9e","updated":"20241101203031"},"Children":[{"Type":"NodeText","Data":"如果你是使用 Vue CLI 创建的项目，可以在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"vue.config.js"},{"Type":"NodeText","Data":"​ 文件中配置开发服务器代理。例如："}]},{"ID":"20241101203031-z3to6n3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101203031-z3to6n3","updated":"20241101203031"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"module.exports = {\n  devServer: {\n    proxy: {\n      '/api': {\n        target: 'http://localhost:3000', // 你的后端服务器地址\n        changeOrigin: true,\n        pathRewrite: { '^/api': '' },\n      }\n    }\n  }\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101203031-51o0m7u","Type":"NodeParagraph","Properties":{"id":"20241101203031-51o0m7u","updated":"20241101215002"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"3、解释代理配置"}]},{"ID":"20241101203031-yhmx32w","Type":"NodeList","ListData":{},"Properties":{"id":"20241101203031-yhmx32w","updated":"20241101203031"},"Children":[{"ID":"20241101203031-vm4s2pc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101203031-vm4s2pc","updated":"20241101203031"},"Children":[{"ID":"20241101203031-r72iuwf","Type":"NodeParagraph","Properties":{"id":"20241101203031-r72iuwf","updated":"20241101203031"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"strong code","TextMarkTextContent":"target"},{"Type":"NodeText","Data":"​：后端服务器的实际地址。当请求发往 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api'"},{"Type":"NodeText","Data":"​ 时，代理会将请求转发到这个目标服务器。例如，如果后端在本地运行在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:3000"},{"Type":"NodeText","Data":"​，那么就设置 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"target"},{"Type":"NodeText","Data":"​ 为这个地址。"}]}]},{"ID":"20241101203031-05j6d0m","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101203031-05j6d0m","updated":"20241101203031"},"Children":[{"ID":"20241101203031-76jg1s7","Type":"NodeParagraph","Properties":{"id":"20241101203031-76jg1s7","updated":"20241101203031"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"strong code","TextMarkTextContent":"changeOrigin"},{"Type":"NodeText","Data":"​：在某些情况下需要设置为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"true"},{"Type":"NodeText","Data":"​，这通常用于解决跨域问题，使得代理请求头中 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Host"},{"Type":"NodeText","Data":"​ 字段指向 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"target"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241101203031-ekkhp8i","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101203031-ekkhp8i","updated":"20241101203031"},"Children":[{"ID":"20241101203031-w940vke","Type":"NodeParagraph","Properties":{"id":"20241101203031-w940vke","updated":"20241101203031"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"strong code","TextMarkTextContent":"pathRewrite"},{"Type":"NodeText","Data":"​：用于重写 URL 路径。例如，将路径中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api"},{"Type":"NodeText","Data":"​ 前缀去掉，转发到目标服务器。"}]}]}]},{"ID":"20241101203031-g3uh1j0","Type":"NodeParagraph","Properties":{"id":"20241101203031-g3uh1j0","updated":"20241101215006"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"4、生产环境"}]},{"ID":"20241101203031-75rvgwp","Type":"NodeParagraph","Properties":{"id":"20241101203031-75rvgwp","updated":"20241101203031"},"Children":[{"Type":"NodeText","Data":"在生产环境下，通常会有一个固定的后端服务 URL，直接指向后端服务器的 API 地址。这可能需要在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".env.production"},{"Type":"NodeText","Data":"​ 中定义："}]},{"ID":"20241101203031-qga1ajf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101203031-qga1ajf","updated":"20241101203031"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cGxhaW50ZXh0"},{"Type":"NodeCodeBlockCode","Data":"VUE_APP_BASE_API = 'https://api.yourdomain.com'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101203031-kyda5zf","Type":"NodeParagraph","Properties":{"id":"20241101203031-kyda5zf","updated":"20241101203031"},"Children":[{"Type":"NodeText","Data":"在构建应用时，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VUE_APP_BASE_API"},{"Type":"NodeText","Data":"​ 会被替换为这个实际的后端地址。"}]},{"ID":"20241101203031-xwels5l","Type":"NodeParagraph","Properties":{"id":"20241101203031-xwels5l","updated":"20241101204005"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"总结"}]},{"ID":"20241101203031-r6gpm64","Type":"NodeParagraph","Properties":{"id":"20241101203031-r6gpm64","updated":"20241101203031"},"Children":[{"Type":"NodeText","Data":"通过这种机制，在开发环境中，前端代码可以通过代理来模拟与后端的交互，而在生产环境中，使用不同的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baseURL"},{"Type":"NodeText","Data":"​ 配置可以直接与真实后端服务进行交互。这样的策略使得本地开发与生产部署的配置简单且灵活。"}]},{"ID":"20241101204215-76bo7el","Type":"NodeParagraph","Properties":{"id":"20241101204215-76bo7el","updated":"20241101204215"}},{"ID":"20241101213808-nk6t7fz","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241101213808-nk6t7fz","updated":"20241101214552"},"Children":[{"Type":"NodeText","Data":"代码实现"}]},{"ID":"20241101210628-mt0q6sc","Type":"NodeParagraph","Properties":{"id":"20241101210628-mt0q6sc","updated":"20241101213637"},"Children":[{"Type":"NodeText","Data":"在我们的项目中，看"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"vue.config.js"},{"Type":"NodeText","Data":"​文件（简化版）："}]},{"ID":"20241101210759-3wkper6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101210759-3wkper6","updated":"20241101213657"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"anM="},{"Type":"NodeCodeBlockCode","Data":"module.exports = {\n  devServer: {\n    proxy: {\n      '/api': { // 定义了一个代理路径，表示以 /api 开头的请求将会被代理转发\n        // target: 'http://canzg-wsl.itheima.net/enterpise',\n        // target: 'http://172.17.0.60:8200',\n        // target: process.env.VUE_APP_URL,\n        target: process.env.VUE_APP_URL, // 指定了代理请求的目标地址，即后台的真实接口地址。这里目标地址是 http://localhost:8080/，即代理服务器会将以 /api 开头的请求转发到这个地址。\n        ws: false,\n        secure: false,\n        changeOrigin: true, // 表示启用跨域，允许代理服务器发送带有源 origin（请求的源地址）的请求\n        pathRewrite:{\n          // 浏览器发送的 /api/core/getData/userInfo 请求，代理服务器会将该请求的地址重写为 http://localhost:8080/core/getData/userInfo\n          // 并将重写后的请求转发给真实的后台接口地址，即把 /api 换成了空字符串\n          '^/api':''\n        }\n      }\n    }\n  }\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101214226-lt5x6zi","Type":"NodeParagraph","Properties":{"id":"20241101214226-lt5x6zi","updated":"20241101214229"},"Children":[{"Type":"NodeText","Data":"解释："}]},{"ID":"20241101213724-f41ti6r","Type":"NodeList","ListData":{},"Properties":{"id":"20241101213724-f41ti6r","updated":"20241101214244"},"Children":[{"ID":"20241101214244-0q5sitp","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214244-0q5sitp","updated":"20241101214244"},"Children":[{"ID":"20241101214244-19navsd","Type":"NodeParagraph","Properties":{"id":"20241101214244-19navsd","updated":"20241101214244"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api'"},{"Type":"NodeText","Data":"​定义了一个代理路径，表示以 /api 开头的请求将会被代理转发到"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VUE_APP_URL"},{"Type":"NodeText","Data":"​（在"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".env.development"},{"Type":"NodeText","Data":"​中定义的是"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VUE_APP_URL='http://localhost:8080/'"},{"Type":"NodeText","Data":"​，这就是后端地址）。​"}]}]},{"ID":"20241101214250-3yhgd60","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214250-3yhgd60","updated":"20241101214250"},"Children":[{"ID":"20241101214250-fi4gka4","Type":"NodeParagraph","Properties":{"id":"20241101214250-fi4gka4","updated":"20241101214250"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"changeOrigin: true"},{"Type":"NodeText","Data":"​表示启用跨域。​"}]}]},{"ID":"20241101214253-wxyshbf","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214253-wxyshbf","updated":"20241101214253"},"Children":[{"ID":"20241101214253-0h9ortm","Type":"NodeParagraph","Properties":{"id":"20241101214253-0h9ortm","updated":"20241101214253"},"Children":[{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"pathRewrite"},{"Type":"NodeText","Data":"​定义路径重写规则，把请求中的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"^/api"},{"Type":"NodeText","Data":"​去掉"}]}]}]},{"ID":"20241101214013-3191ptf","Type":"NodeParagraph","Properties":{"id":"20241101214013-3191ptf","updated":"20241101214321"},"Children":[{"Type":"NodeText","Data":"也就是说将所有以 /api 开头的请求都转发到这个后端地址，效果就是："}]},{"ID":"20241101214322-og7166s","Type":"NodeList","ListData":{},"Properties":{"id":"20241101214322-og7166s","updated":"20241101214552"},"Children":[{"ID":"20241101214323-2kz3qit","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214323-2kz3qit","updated":"20241101214323"},"Children":[{"ID":"20241101214323-bbxojmr","Type":"NodeParagraph","Properties":{"id":"20241101214323-bbxojmr","updated":"20241101214457"},"Children":[{"Type":"NodeText","Data":"前端浏览器发送的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api/core/getData/userInfo"},{"Type":"NodeText","Data":"​ 请求，代理服务器会将该请求的地址重写为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:8080/core/getData/userInfo"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241101214501-zqa917m","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214501-zqa917m","updated":"20241101214552"},"Children":[{"ID":"20241101214501-7csmdxf","Type":"NodeParagraph","Properties":{"id":"20241101214501-7csmdxf","updated":"20241101214552"},"Children":[{"Type":"NodeText","Data":"这样做的目的就是为了解决跨域问题（在开发环境中）。"}]}]}]},{"ID":"20241101213735-xdwdbbc","Type":"NodeParagraph","Properties":{"id":"20241101213735-xdwdbbc","updated":"20241101213735"}},{"ID":"20241101214348-0dynj97","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241101214348-0dynj97","updated":"20241101220036"},"Children":[{"Type":"NodeText","Data":"更详细的代理转发过程"}]},{"ID":"20241101214743-e9god7t","Type":"NodeParagraph","Properties":{"id":"20241101214743-e9god7t","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20241101215340"},"Children":[{"Type":"NodeText","Data":"也就是说是框架拼接的完整url？那我们调用axios发送的请求是怎样的呢？"}]},{"ID":"20241101215134-ps7ad0q","Type":"NodeParagraph","Properties":{"id":"20241101215134-ps7ad0q","updated":"20241101215134"}},{"ID":"20241101214749-r87lnj4","Type":"NodeParagraph","Properties":{"id":"20241101214749-r87lnj4","updated":"20241101214749"},"Children":[{"Type":"NodeText","Data":"是的，框架（或我们通过配置）拼接了完整的 URL。使用 axios 时，完整的请求 URL 是由我们配置的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baseURL"},{"Type":"NodeText","Data":"​ 和我们在发送请求时提供的具体路径拼接而成的。"}]},{"ID":"20241101214749-fibu6n0","Type":"NodeParagraph","Properties":{"id":"20241101214749-fibu6n0","updated":"20241101215201"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"URL 拼接过程"}]},{"ID":"20241101214749-tbnn1i7","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101214749-tbnn1i7","updated":"20241101214749"},"Children":[{"ID":"20241101214749-r5yt1x3","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101214749-r5yt1x3","updated":"20241101214749"},"Children":[{"ID":"20241101214749-6mvb2gj","Type":"NodeParagraph","Properties":{"id":"20241101214749-6mvb2gj","updated":"20241101214749"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"strong code","TextMarkTextContent":"baseURL"},{"Type":"NodeText","Data":"​：在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​ 中配置，如："}]},{"ID":"20241101214749-4qiyrq5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101214749-4qiyrq5","updated":"20241101214749"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"const service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API,\n  // 其他配置...\n});\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101214749-1ybkb19","Type":"NodeParagraph","Properties":{"id":"20241101214749-1ybkb19","updated":"20241101214749"},"Children":[{"Type":"NodeText","Data":"如果 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"process.env.VUE_APP_BASE_API"},{"Type":"NodeText","Data":"​ 的值是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api'"},{"Type":"NodeText","Data":"​，那么 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baseURL"},{"Type":"NodeText","Data":"​ 被设置为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api'"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241101214749-vtzzthz","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241101214749-vtzzthz","updated":"20241101214749"},"Children":[{"ID":"20241101214749-99x10p5","Type":"NodeParagraph","Properties":{"id":"20241101214749-99x10p5","updated":"20241101214749"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"请求路径"},{"Type":"NodeText","Data":"：当你发送请求时，你指定的 URL 会和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baseURL"},{"Type":"NodeText","Data":"​ 结合。例如："}]},{"ID":"20241101214749-cxim8a8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101214749-cxim8a8","updated":"20241101214749"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"request({\n  url: '/users',\n  method: 'get'\n});\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241101214749-8fdjf2m","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241101214749-8fdjf2m","updated":"20241101214749"},"Children":[{"ID":"20241101214749-1v97ojm","Type":"NodeParagraph","Properties":{"id":"20241101214749-1v97ojm","updated":"20241101214749"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"最终完整的请求 URL"},{"Type":"NodeText","Data":"："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baseURL"},{"Type":"NodeText","Data":"​ + 请求路径，因此实际请求的完整 URL 是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api/users'"},{"Type":"NodeText","Data":"​。"}]}]}]},{"ID":"20241101214749-vjgipnu","Type":"NodeParagraph","Properties":{"id":"20241101214749-vjgipnu","updated":"20241101215206"},"Children":[{"Type":"NodeTextMark","TextMarkType":"text strong","TextMarkTextContent":"调用 axios 发送请求的过程"}]},{"ID":"20241101214749-32rv5ul","Type":"NodeParagraph","Properties":{"id":"20241101214749-32rv5ul","updated":"20241101214749"},"Children":[{"Type":"NodeText","Data":"以下是一个典型的 axios 请求和请求 URL 完整拼接的示例："}]},{"ID":"20241101214749-551bbm1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101214749-551bbm1","updated":"20241101214749"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"// 使用 axios 实例发送请求\nrequest({\n  url: '/users',  // 请求路径\n  method: 'get',  // 请求方法\n  params: {       // get 请求的 URL 查询参数\n    id: 123\n  }\n});\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101214749-wbuewtl","Type":"NodeParagraph","Properties":{"id":"20241101214749-wbuewtl","updated":"20241101215224"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"流程解析："}]},{"ID":"20241101214749-gkg0n6t","Type":"NodeList","ListData":{},"Properties":{"id":"20241101214749-gkg0n6t","updated":"20241101215241"},"Children":[{"ID":"20241101214749-lvumi5p","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214749-lvumi5p","updated":"20241101214749"},"Children":[{"ID":"20241101214749-ma7oqbs","Type":"NodeParagraph","Properties":{"id":"20241101214749-ma7oqbs","updated":"20241101214749"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"拼接 URL"},{"Type":"NodeText","Data":"：axios 会将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baseURL"},{"Type":"NodeText","Data":"​ 和路径 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/users"},{"Type":"NodeText","Data":"​ 拼接，形成 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api/users'"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241101214749-u66v1g3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214749-u66v1g3","updated":"20241101215241"},"Children":[{"ID":"20241101214749-9zminge","Type":"NodeParagraph","Properties":{"id":"20241101214749-9zminge","updated":"20241101215241"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"添加查询参数"},{"Type":"NodeText","Data":"："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"params"},{"Type":"NodeText","Data":"​ 参数附加在 URL 之后，所以"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"最终请求可能是"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"code mark","TextMarkTextContent":"'/api/users?id=123'"},{"Type":"NodeText","Data":"。"}]}]},{"ID":"20241101214749-saowt98","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214749-saowt98","updated":"20241101214749"},"Children":[{"ID":"20241101214749-6gs238p","Type":"NodeParagraph","Properties":{"id":"20241101214749-6gs238p","updated":"20241101214749"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"请求方法"},{"Type":"NodeText","Data":"：指定 HTTP 方法（如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"GET"},{"Type":"NodeText","Data":"​、"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"POST"},{"Type":"NodeText","Data":"​ 等）。"}]}]},{"ID":"20241101214749-299vjhe","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214749-299vjhe","updated":"20241101214749"},"Children":[{"ID":"20241101214749-s86qaa4","Type":"NodeParagraph","Properties":{"id":"20241101214749-s86qaa4","updated":"20241101214749"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"带上其他的请求配置"},{"Type":"NodeText","Data":"：可以包括 headers, data 等其他配置项。"}]}]}]},{"ID":"20241101215251-helhkew","Type":"NodeParagraph","Properties":{"id":"20241101215251-helhkew","updated":"20241101215251"}},{"ID":"20241101214749-bcn128x","Type":"NodeParagraph","Properties":{"id":"20241101214749-bcn128x","updated":"20241101215306"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"结合代理的完整请求过程"}]},{"ID":"20241101214749-dm0bzy7","Type":"NodeParagraph","Properties":{"id":"20241101214749-dm0bzy7","updated":"20241101214749"},"Children":[{"Type":"NodeText","Data":"如果你在开发环境下用了代理配置（例如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api"},{"Type":"NodeText","Data":"​ 会被代理到实际的后台服务），当请求 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api/users'"},{"Type":"NodeText","Data":"​ 时："}]},{"ID":"20241101214749-kqrxa05","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101214749-kqrxa05","updated":"20241101214749"},"Children":[{"ID":"20241101214749-fqdgosm","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101214749-fqdgosm","updated":"20241101214749"},"Children":[{"ID":"20241101214749-aq4i214","Type":"NodeParagraph","Properties":{"id":"20241101214749-aq4i214","updated":"20241101214749"},"Children":[{"Type":"NodeText","Data":"请求首先被发送到本地开发服务器。"}]}]},{"ID":"20241101214749-5mgxyb4","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241101214749-5mgxyb4","updated":"20241101214749"},"Children":[{"ID":"20241101214749-3e9qj6y","Type":"NodeParagraph","Properties":{"id":"20241101214749-3e9qj6y","updated":"20241101214749"},"Children":[{"Type":"NodeText","Data":"本地服务器根据代理配置，将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api/users"},{"Type":"NodeText","Data":"​ 转发到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:3000/users"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241101214749-8spuso2","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241101214749-8spuso2","updated":"20241101214749"},"Children":[{"ID":"20241101214749-h5i7rr9","Type":"NodeParagraph","Properties":{"id":"20241101214749-h5i7rr9","updated":"20241101214749"},"Children":[{"Type":"NodeText","Data":"实际请求在后台服务器上被处理并返回结果。"}]}]}]},{"ID":"20241101215309-r09wcei","Type":"NodeParagraph","Properties":{"id":"20241101215309-r09wcei","updated":"20241101215310"}},{"ID":"20241101214749-h76kvbq","Type":"NodeParagraph","Properties":{"id":"20241101214749-h76kvbq","updated":"20241101215327"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"使用这种配置的好处："}]},{"ID":"20241101214749-w72xml4","Type":"NodeList","ListData":{},"Properties":{"id":"20241101214749-w72xml4","updated":"20241101214749"},"Children":[{"ID":"20241101214749-bpvuwnr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214749-bpvuwnr","updated":"20241101214749"},"Children":[{"ID":"20241101214749-sd120vz","Type":"NodeParagraph","Properties":{"id":"20241101214749-sd120vz","updated":"20241101214749"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"开发时的灵活性"},{"Type":"NodeText","Data":"：使用代理可以在开发时隔离不同的服务，便于模拟和测试。"}]}]},{"ID":"20241101214749-gxzpd9h","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214749-gxzpd9h","updated":"20241101214749"},"Children":[{"ID":"20241101214749-mt6q5wd","Type":"NodeParagraph","Properties":{"id":"20241101214749-mt6q5wd","updated":"20241101214749"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"生产时的简化部署"},{"Type":"NodeText","Data":"：通过环境变量定义 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"baseURL"},{"Type":"NodeText","Data":"​，在不同环境中可灵活调整后端服务的 URL 而无需修改代码。"}]}]},{"ID":"20241101214749-7zfkvwm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214749-7zfkvwm","updated":"20241101214749"},"Children":[{"ID":"20241101214749-dcysgo0","Type":"NodeParagraph","Properties":{"id":"20241101214749-dcysgo0","updated":"20241101214749"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"统一管理请求路径"},{"Type":"NodeText","Data":"：通过 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"request.js"},{"Type":"NodeText","Data":"​ 的封装，可以统一管理所有请求的配置参数、拦截器等，便于维护。"}]}]}]},{"ID":"20241101214749-b5cudv3","Type":"NodeParagraph","Properties":{"id":"20241101214749-b5cudv3","updated":"20241101214749"},"Children":[{"Type":"NodeText","Data":"通过这种方式，使前端代码在不同的开发和生产环境下都可以正确访问到对应的后端服务。"}]},{"ID":"20241101214408-3eqzng0","Type":"NodeParagraph","Properties":{"id":"20241101214408-3eqzng0","updated":"20241101214408"}},{"ID":"20241101214801-rwkgp63","Type":"NodeParagraph","Properties":{"id":"20241101214801-rwkgp63","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20241101215350"},"Children":[{"Type":"NodeText","Data":"原来是这样，那“本地服务器根据代理配置，将 /api/users 转发到 http://localhost:3000/users”这段逻辑在哪里可以看到呢？这段逻辑是由vue实现的吗？还是需要我们自己实现？"}]},{"ID":"20241101214802-1cnkqat","Type":"NodeParagraph","Properties":{"id":"20241101214802-1cnkqat","updated":"20241101214802"}},{"ID":"20241101214806-zjevzp4","Type":"NodeParagraph","Properties":{"id":"20241101214806-zjevzp4","updated":"20241101215533"},"Children":[{"Type":"NodeText","Data":"这段逻辑通常是由开发工具的配置来实现的，而不是 Vue 本身直接实现的。对于使用 Vue CLI 创建的项目，"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"这种代理功能是由"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"mark strong","TextMarkTextContent":"Vue CLI 的开发服务器"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"（基于 webpack-dev-server）通过"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"code mark strong","TextMarkTextContent":"vue.config.js"},{"Type":"NodeText","Data":" "},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"mark strong","TextMarkTextContent":"文件中的配置"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"实现的"},{"Type":"NodeText","Data":"。具体的逻辑不需要你自己去实现，而是通过配置来使用现成的功能。"}]},{"ID":"20241101214806-v438qmp","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241101214806-v438qmp","updated":"20241101220036"},"Children":[{"Type":"NodeText","Data":"实现代理的步骤"}]},{"ID":"20241101215929-bp4crc2","Type":"NodeParagraph","Properties":{"id":"20241101215929-bp4crc2","updated":"20241101220002"},"Children":[{"Type":"NodeText","Data":"这里可以结合我们的项目"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20241101213808-nk6t7fz","TextMarkBlockRefSubtype":"d","TextMarkTextContent":"代码实现"},{"Type":"NodeText","Data":"看。"}]},{"ID":"20241101214806-6yajvv9","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101214806-6yajvv9","updated":"20241101220032"},"Children":[{"ID":"20241101214806-2bmwt4p","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101214806-2bmwt4p","updated":"20241101214806"},"Children":[{"ID":"20241101214806-lcw6sw4","Type":"NodeParagraph","Properties":{"id":"20241101214806-lcw6sw4","updated":"20241101214806"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Vue 项目中的代理配置"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101214806-qbjqpcd","Type":"NodeParagraph","Properties":{"id":"20241101214806-qbjqpcd","updated":"20241101214806"},"Children":[{"Type":"NodeText","Data":"在使用 Vue CLI 的项目中，可以在项目根目录下创建或编辑 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"vue.config.js"},{"Type":"NodeText","Data":"​ 文件，添加以下配置："}]},{"ID":"20241101214806-d3my2jc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101214806-d3my2jc","updated":"20241101214806"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"module.exports = {\n  devServer: {\n    proxy: {\n      '/api': {\n        target: 'http://localhost:3000', // 目标服务的 URL\n        changeOrigin: true,              // 是否更改请求的来源（解决跨域问题）\n        pathRewrite: { '^/api': '' }     // 重写路径，将 '/api' 去掉\n      }\n    }\n  }\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101214806-a40etnb","Type":"NodeList","ListData":{},"Properties":{"id":"20241101214806-a40etnb","updated":"20241101214806"},"Children":[{"ID":"20241101214806-p996nwt","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214806-p996nwt","updated":"20241101214806"},"Children":[{"ID":"20241101214806-63l9nfl","Type":"NodeParagraph","Properties":{"id":"20241101214806-63l9nfl","updated":"20241101214806"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"strong code","TextMarkTextContent":"target"},{"Type":"NodeText","Data":"​：设置为你后端服务器的地址。"}]}]},{"ID":"20241101214806-pgvgqlv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214806-pgvgqlv","updated":"20241101214806"},"Children":[{"ID":"20241101214806-c65yfw2","Type":"NodeParagraph","Properties":{"id":"20241101214806-c65yfw2","updated":"20241101214806"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"strong code","TextMarkTextContent":"changeOrigin"},{"Type":"NodeText","Data":"​：通常设置为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"true"},{"Type":"NodeText","Data":"​，以便于处理跨域请求。"}]}]},{"ID":"20241101214806-g23qcne","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101214806-g23qcne","updated":"20241101214806"},"Children":[{"ID":"20241101214806-8nmbr1d","Type":"NodeParagraph","Properties":{"id":"20241101214806-8nmbr1d","updated":"20241101214806"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"strong code","TextMarkTextContent":"pathRewrite"},{"Type":"NodeText","Data":"​：可以重写路径，比如将请求中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api"},{"Type":"NodeText","Data":"​ 去掉，转发给实际的后端接口。"}]}]}]}]},{"ID":"20241101214806-bb4g7bi","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241101214806-bb4g7bi","updated":"20241101214806"},"Children":[{"ID":"20241101214806-zqi50pt","Type":"NodeParagraph","Properties":{"id":"20241101214806-zqi50pt","updated":"20241101214806"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"开发时的请求流程"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101214806-0rkbpyf","Type":"NodeParagraph","Properties":{"id":"20241101214806-0rkbpyf","updated":"20241101214806"},"Children":[{"Type":"NodeText","Data":"当你在开发环境（运行 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"npm run serve"},{"Type":"NodeText","Data":"​）下访问 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api/users"},{"Type":"NodeText","Data":"​ 时，开发服务器会拦截这个请求，根据上面的代理配置，将它转发到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:3000/users"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241101214806-v5k7h1w","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241101214806-v5k7h1w","updated":"20241101220032"},"Children":[{"ID":"20241101214806-jirzf1e","Type":"NodeParagraph","Properties":{"id":"20241101214806-jirzf1e","updated":"20241101214806"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"不需要额外实现"},{"Type":"NodeText","Data":"："}]},{"ID":"20241101214806-r3j0nqm","Type":"NodeParagraph","Properties":{"id":"20241101214806-r3j0nqm","updated":"20241101220032"},"Children":[{"Type":"NodeText","Data":"这个过程都是由 "},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"Vue CLI 的开发服务器"},{"Type":"NodeText","Data":"自动处理的，你只需要通过在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"vue.config.js"},{"Type":"NodeText","Data":"​ 中正确配置代理即可。无需手动编写代理逻辑。"}]}]}]},{"ID":"20241101220036-jeaqyyk","Type":"NodeParagraph","Properties":{"id":"20241101220036-jeaqyyk","updated":"20241101220036"}},{"ID":"20241101214806-stp3omm","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241101214806-stp3omm","updated":"20241101223143"},"Children":[{"Type":"NodeText","Data":"生产环境中的处理"}]},{"ID":"20241101214806-r466r1h","Type":"NodeParagraph","Properties":{"id":"20241101214806-r466r1h","updated":"20241101214806"},"Children":[{"Type":"NodeText","Data":"在生产环境中，通常不会使用这种代理，而是直接访问已部署的后端服务。这可以通过在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".env.production"},{"Type":"NodeText","Data":"​ 文件中设置正确的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VUE_APP_BASE_API"},{"Type":"NodeText","Data":"​ 来实现，例如："}]},{"ID":"20241101214806-fwrjy73","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101214806-fwrjy73","updated":"20241101214806"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cGxhaW50ZXh0"},{"Type":"NodeCodeBlockCode","Data":"VUE_APP_BASE_API=https://api.yourproductiondomain.com\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101214806-l1qu5x1","Type":"NodeParagraph","Properties":{"id":"20241101214806-l1qu5x1","updated":"20241101214806"},"Children":[{"Type":"NodeText","Data":"在生产构建时，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"axios"},{"Type":"NodeText","Data":"​ 将使用这个完整的 URL 来直接访问后端服务。"}]},{"ID":"20241101222907-3ljmnz2","Type":"NodeParagraph","Properties":{"id":"20241101222907-3ljmnz2","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20241101223106"},"Children":[{"Type":"NodeText","Data":"但是如果VUE_APP_BASE_API与前端链接不同源（前后端分离的时候），会出现跨域问题。所以直接这样做是不够的，浏览器这个网页请求了一个不同源的url，出现跨域问题！"}]},{"ID":"20241101220045-gag3urj","Type":"NodeParagraph","Properties":{"id":"20241101220045-gag3urj","updated":"20241101220045"}},{"ID":"20241101214806-qqkj1yq","Type":"NodeParagraph","Properties":{"id":"20241101214806-qqkj1yq","updated":"20241101220050"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"其他工具中的代理配置"}]},{"ID":"20241101214806-m4xg8rr","Type":"NodeParagraph","Properties":{"id":"20241101214806-m4xg8rr","updated":"20241101214806"},"Children":[{"Type":"NodeText","Data":"除了 Vue CLI，如果你是使用其他工具（例如 Webpack、Create React App 等），它们通常也提供类似的代理功能，原理和实现方式是类似的，主要是通过配置文件定义代理规则。"}]},{"ID":"20241101214806-3shdfd0","Type":"NodeParagraph","Properties":{"id":"20241101214806-3shdfd0","updated":"20241101214806"},"Children":[{"Type":"NodeText","Data":"总结来说，代理的实现是通过开发工具的配置文件来完成的，而不是 Vue 框架自身的一部分。通过这种配置可以让开发环境下的前后端交互更加灵活，并方便处理跨域问题等。"}]},{"ID":"20241101214408-btxm6v3","Type":"NodeParagraph","Properties":{"id":"20241101214408-btxm6v3","updated":"20241101214408"}},{"ID":"20241101223143-srfq7em","Type":"NodeParagraph","Properties":{"id":"20241101223143-srfq7em","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20241101223202"},"Children":[{"Type":"NodeText","Data":"那如果我对这个项目打包（npm run build），打包后放到生产环境中，如果不修改VUE_APP_BASE_API，还是使用VUE_APP_BASE_API = '/api'，会不会有问题？"}]},{"ID":"20241101223208-eg0z2fp","Type":"NodeParagraph","Properties":{"id":"20241101223208-eg0z2fp","updated":"20241101223208"},"Children":[{"Type":"NodeText","Data":"如果在生产环境中不修改 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VUE_APP_BASE_API"},{"Type":"NodeText","Data":"​ 并仍然设置为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api'"},{"Type":"NodeText","Data":"​，可能会导致生产环境无法正常访问后端服务。这是因为在生产环境中，通常不会配置像开发环境那样的代理服务器。"}]},{"ID":"20241101223208-23kpwrt","Type":"NodeParagraph","Properties":{"id":"20241101223208-23kpwrt","updated":"20241101223208"},"Children":[{"Type":"NodeText","Data":"以下是一些可能出现的问题和建议的解决方案："}]},{"ID":"20241101223208-9ljopz3","Type":"NodeParagraph","Properties":{"id":"20241101223208-9ljopz3","updated":"20241101223346"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"问题"}]},{"ID":"20241101223208-nbe4nqb","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101223208-nbe4nqb","updated":"20241101223208"},"Children":[{"ID":"20241101223208-02xjs98","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101223208-02xjs98","updated":"20241101223208"},"Children":[{"ID":"20241101223208-52ukani","Type":"NodeParagraph","Properties":{"id":"20241101223208-52ukani","updated":"20241101223208"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"无法访问真实后端服务"},{"Type":"NodeText","Data":"：在开发环境中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api'"},{"Type":"NodeText","Data":"​ 是通过代理服务器转发到真实的后端服务的。但在生产环境中，如果不配置后端服务器处理 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api'"},{"Type":"NodeText","Data":"​ 的请求，那么请求会失败。"}]}]},{"ID":"20241101223208-zpjdy6l","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241101223208-zpjdy6l","updated":"20241101223208"},"Children":[{"ID":"20241101223208-u1yg6up","Type":"NodeParagraph","Properties":{"id":"20241101223208-u1yg6up","updated":"20241101223208"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"跨域问题"},{"Type":"NodeText","Data":"：假设前端应用托管在一个域名下，而后端服务在另一个域名下，直接访问后端 API 可能会遇到跨域问题。"}]}]}]},{"ID":"20241101223208-83bq1gz","Type":"NodeParagraph","Properties":{"id":"20241101223208-83bq1gz","updated":"20241101223344"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"解决方案"}]},{"ID":"20241101223208-zxhm17n","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101223208-zxhm17n","updated":"20241101223208"},"Children":[{"ID":"20241101223208-9ki2o9v","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101223208-9ki2o9v","updated":"20241101223208"},"Children":[{"ID":"20241101223208-9zw6bem","Type":"NodeParagraph","Properties":{"id":"20241101223208-9zw6bem","updated":"20241101223208"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"配置完整的后端 API URL"},{"Type":"NodeText","Data":"：\n在生产环境中，应将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VUE_APP_BASE_API"},{"Type":"NodeText","Data":"​ 设置为完整的后端 API 地址。例如，在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":".env.production"},{"Type":"NodeText","Data":"​ 中配置："}]},{"ID":"20241101223208-829qqch","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101223208-829qqch","updated":"20241101223208"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cGxhaW50ZXh0"},{"Type":"NodeCodeBlockCode","Data":"VUE_APP_BASE_API=https://api.yourproductiondomain.com\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101223208-nwi6upi","Type":"NodeParagraph","Properties":{"id":"20241101223208-nwi6upi","updated":"20241101223208"},"Children":[{"Type":"NodeText","Data":"这将确保在生产环境中构建的应用访问正确的后端服务。"}]}]},{"ID":"20241101223208-66lr4ha","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241101223208-66lr4ha","updated":"20241101223208"},"Children":[{"ID":"20241101223208-b99ki71","Type":"NodeParagraph","Properties":{"id":"20241101223208-b99ki71","updated":"20241101223208"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"使用 Nginx 或 Apache 进行代理转发"},{"Type":"NodeText","Data":"：\n在某些情况下，可能仍希望前端请求中保持 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api'"},{"Type":"NodeText","Data":"​ 这样的路径。这时可以在 Web 服务器（如 Nginx 或 Apache）中配置代理规则，将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api"},{"Type":"NodeText","Data":"​ 请求转发到后端服务。例如："}]},{"ID":"20241101223208-m0w6fqw","Type":"NodeParagraph","Properties":{"id":"20241101223208-m0w6fqw","updated":"20241101223208"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"Nginx 示例配置："}]},{"ID":"20241101223208-nvpp86v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101223208-nvpp86v","updated":"20241101223208"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bmdpbng="},{"Type":"NodeCodeBlockCode","Data":"location /api/ {\n    proxy_pass http://your_backend_server;\n    proxy_set_header Host $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-Forwarded-Proto $scheme;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241101223208-nihdapu","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241101223208-nihdapu","updated":"20241101223208"},"Children":[{"ID":"20241101223208-m5uhf10","Type":"NodeParagraph","Properties":{"id":"20241101223208-m5uhf10","updated":"20241101223208"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"确保后端正确处理路径"},{"Type":"NodeText","Data":"：\n如果前端和后端必须保持路径的一致性（如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api"},{"Type":"NodeText","Data":"​），则需要在后端代码或服务器设置中确保正确处理这些路径，并能返回对应的资源或服务。"}]}]},{"ID":"20241101223208-zcemdme","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241101223208-zcemdme","updated":"20241101223208"},"Children":[{"ID":"20241101223208-n137ig6","Type":"NodeParagraph","Properties":{"id":"20241101223208-n137ig6","updated":"20241101223208"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"处理跨域问题"},{"Type":"NodeText","Data":"：\n如果前端和后端部署在不同的域名下，可以通过在后端服务器上启用 CORS（跨域资源共享）来解决跨域问题。确保设置正确的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"Access-Control-Allow-Origin"},{"Type":"NodeText","Data":"​ 等头信息以允许前端应用访问。"}]}]}]},{"ID":"20241101223208-fclfori","Type":"NodeParagraph","Properties":{"id":"20241101223208-fclfori","updated":"20241101223342"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"小结"}]},{"ID":"20241101223208-tjfjh82","Type":"NodeParagraph","Properties":{"id":"20241101223208-tjfjh82","updated":"20241101223208"},"Children":[{"Type":"NodeText","Data":"如果在生产环境中不更改 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"VUE_APP_BASE_API"},{"Type":"NodeText","Data":"​，而是继续使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"'/api'"},{"Type":"NodeText","Data":"​，你必须确保服务器配置正确，以便请求能够被正确转发和处理。通常最佳实践是在构建生产环境时使用完整且正确的后端 API 地址以避免潜在的问题。通过环境配置管理不同的 API URL，是确保应用在不同环境中正常工作的关键策略。"}]},{"ID":"20241101223143-cxd66uf","Type":"NodeParagraph","Properties":{"id":"20241101223143-cxd66uf","updated":"20241101223143"}},{"ID":"20241101223244-5k652jv","Type":"NodeParagraph","Properties":{"id":"20241101223244-5k652jv","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20241101223254"},"Children":[{"Type":"NodeText","Data":"也就是说前端项目中发出的axios请求实际上是"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"/api/userInfo"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 这样，而我们要想办法将以api开头的请求改写为"},{"Type":"NodeTextMark","Properties":{"parent-style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);"},"TextMarkType":"code","TextMarkTextContent":"http://localhost:8080/userInfo"},{"Type":"NodeKramdownSpanIAL","Data":"{: parent-style=\"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);\"}"},{"Type":"NodeText","Data":"​ 这样的后端地址，而改写方法在开发环境中使用的是Vue CLI 的开发服务器、生产环境使用NGINX服务器完成改写。我理解得正确吗？"}]},{"ID":"20241101223259-2j8j6k9","Type":"NodeParagraph","Properties":{"id":"20241101223259-2j8j6k9","updated":"20241101223259"},"Children":[{"Type":"NodeText","Data":"是的，你的理解基本上是正确的。在开发和生产环境中处理 API 请求路径的方式略有不同，但目标都是确保前端应用能够正确地与后端服务交互。"}]},{"ID":"20241101223259-kzb9cpd","Type":"NodeParagraph","Properties":{"id":"20241101223259-kzb9cpd","updated":"20241101223340"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"开发环境"}]},{"ID":"20241101223259-bopzq8m","Type":"NodeParagraph","Properties":{"id":"20241101223259-bopzq8m","updated":"20241101223259"},"Children":[{"Type":"NodeText","Data":"在开发环境中，通常通过 Vue CLI 提供的开发服务器配置代理来完成路径转发，这样你可以使用相对路径（如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api/userInfo"},{"Type":"NodeText","Data":"​）。具体步骤如下："}]},{"ID":"20241101223259-3ykgbnz","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101223259-3ykgbnz","updated":"20241101223259"},"Children":[{"ID":"20241101223259-9gm8nz1","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101223259-9gm8nz1","updated":"20241101223259"},"Children":[{"ID":"20241101223259-jgpj33e","Type":"NodeParagraph","Properties":{"id":"20241101223259-jgpj33e","updated":"20241101223259"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"配置 Vue CLI 代理"},{"Type":"NodeText","Data":"：\n在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"vue.config.js"},{"Type":"NodeText","Data":"​ 中，你可以配置代理规则，将特定的请求路径转发到目标后端服务。例如："}]},{"ID":"20241101223259-hx3fysp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101223259-hx3fysp","updated":"20241101223259"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA=="},{"Type":"NodeCodeBlockCode","Data":"module.exports = {\n  devServer: {\n    proxy: {\n      '/api': {\n        target: 'http://localhost:8080', // 后端服务地址\n        changeOrigin: true,\n        pathRewrite: { '^/api': '' }   // 可选：移除前缀\n      }\n    }\n  }\n};\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101223259-hovoo94","Type":"NodeParagraph","Properties":{"id":"20241101223259-hovoo94","updated":"20241101223259"},"Children":[{"Type":"NodeText","Data":"这样，所有以 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api"},{"Type":"NodeText","Data":"​ 开头的请求都会被转发到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"http://localhost:8080"},{"Type":"NodeText","Data":"​，并且可选择性地移除路径中的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api"},{"Type":"NodeText","Data":"​ 前缀。"}]}]}]},{"ID":"20241101223259-i3qd1mg","Type":"NodeParagraph","Properties":{"id":"20241101223259-i3qd1mg","updated":"20241101223353"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"生产环境"}]},{"ID":"20241101223259-fxc0ynb","Type":"NodeParagraph","Properties":{"id":"20241101223259-fxc0ynb","updated":"20241101223259"},"Children":[{"Type":"NodeText","Data":"在生产环境中，通常使用 Web 服务器（如 Nginx）来处理请求路径的重写和转发，通过配置服务器来完成路径的改写并转发到后端服务。"}]},{"ID":"20241101223328-ul9geu8","Type":"NodeList","ListData":{},"Properties":{"id":"20241101223328-ul9geu8","updated":"20241101223329"},"Children":[{"ID":"20241101223329-jxojct8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101223329-jxojct8","updated":"20241101223329"},"Children":[{"ID":"20241101223329-ab7rkxd","Type":"NodeParagraph","Properties":{"id":"20241101223329-ab7rkxd","updated":"20241101223329"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"配置 Nginx 代理"},{"Type":"NodeText","Data":"：\n可以在 Nginx 配置中设置代理规则，将前端收到的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api"},{"Type":"NodeText","Data":"​ 请求转发到实际的后端服务。例如："}]},{"ID":"20241101223329-i9xruj1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101223329-i9xruj1","updated":"20241101223329"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bmdpbng="},{"Type":"NodeCodeBlockCode","Data":"server {\n    listen 80;\n    server_name yourdomain.com;\n\n    location /api/ {\n        proxy_pass http://localhost:8080;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241101223259-459ydcp","Type":"NodeParagraph","Properties":{"id":"20241101223259-459ydcp","updated":"20241101223358"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"小结"}]},{"ID":"20241101223259-73l3g1u","Type":"NodeParagraph","Properties":{"id":"20241101223259-73l3g1u","updated":"20241101223259"},"Children":[{"Type":"NodeText","Data":"所以你的理解是正确的：在开发环境中，通过 Vue CLI 的代理特性简化开发流程；而在生产环境中，通过配置 Web 服务器（如 Nginx）来实现请求的路径重写与转发，确保应用能够正确访问后端服务。这种配置策略不仅简化了开发过程，还保证了生产环境的请求路径与后端服务的一致性。"}]},{"ID":"20241101223143-t708b55","Type":"NodeParagraph","Properties":{"id":"20241101223143-t708b55","updated":"20241101223143"}},{"ID":"20241101214348-8p3ookt","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241101214348-8p3ookt","updated":"20241101230233"},"Children":[{"Type":"NodeText","Data":"总结🤔"}]},{"ID":"20241101220345-y1gu6cs","Type":"NodeParagraph","Properties":{"id":"20241101220345-y1gu6cs","updated":"20241101223950"},"Children":[{"Type":"NodeText","Data":"简单来说，为了解决跨域问题（即在前端项目中不能请求不同源的后端url）："}]},{"ID":"20241101220439-puus737","Type":"NodeList","ListData":{},"Properties":{"id":"20241101220439-puus737","updated":"20241101230233"},"Children":[{"ID":"20241101220440-qu0w3e7","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101220440-qu0w3e7","updated":"20241101222621"},"Children":[{"ID":"20241101220440-beos3ge","Type":"NodeParagraph","Properties":{"id":"20241101220440-beos3ge","updated":"20241101222621"},"Children":[{"Type":"NodeText","Data":"前端项目中"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"只会发出"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"code strong","TextMarkTextContent":"/api/core/getData/userInfo"},{"Type":"NodeText","Data":"​ "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"的axios请求"},{"Type":"NodeText","Data":"，这部分的代码在定义axios对象的时候配置的"}]}]},{"ID":"20241101220518-au12zx8","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101220518-au12zx8","updated":"20241101230233"},"Children":[{"ID":"20241101220518-venwz5s","Type":"NodeParagraph","Properties":{"id":"20241101220518-venwz5s","updated":"20241101220918"},"Children":[{"Type":"NodeText","Data":"而要请求后端URL，在："}]},{"ID":"20241101220538-ae9vy5y","Type":"NodeList","ListData":{},"Properties":{"id":"20241101220538-ae9vy5y","updated":"20241101230233"},"Children":[{"ID":"20241101220539-u3kw080","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101220539-u3kw080","updated":"20241101230227"},"Children":[{"ID":"20241101220539-xj7rflx","Type":"NodeParagraph","Properties":{"id":"20241101220539-xj7rflx","updated":"20241101222756"},"Children":[{"Type":"NodeText","Data":"开发环境："}]},{"ID":"20241101221101-247obkw","Type":"NodeList","ListData":{},"Properties":{"id":"20241101221101-247obkw","updated":"20241101230227"},"Children":[{"ID":"20241101221113-17c4tov","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101221113-17c4tov","updated":"20241101221113"},"Children":[{"ID":"20241101221113-3shpdb8","Type":"NodeParagraph","Properties":{"id":"20241101221113-3shpdb8","updated":"20241101221113"},"Children":[{"Type":"NodeText","Data":"由 Vue CLI 的开发服务器（基于 webpack-dev-server）完成代理转发功能。"}]}]},{"ID":"20241101221122-djebrjg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101221122-djebrjg","updated":"20241101221122"},"Children":[{"ID":"20241101221122-4k11z3r","Type":"NodeParagraph","Properties":{"id":"20241101221122-4k11z3r","updated":"20241101221330"},"Children":[{"Type":"NodeText","Data":"需要在"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"vue.config.js"},{"Type":"NodeText","Data":"​ 文件中配置后端路径（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"target"},{"Type":"NodeText","Data":"​）、配置跨域（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"changeOrigin"},{"Type":"NodeText","Data":"​）、改写规则（"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"pathRewrite"},{"Type":"NodeText","Data":"​去掉/api）。"}]}]},{"ID":"20241101221125-vrpttys","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101221125-vrpttys","updated":"20241101230227"},"Children":[{"ID":"20241101221125-uxfgi1g","Type":"NodeParagraph","Properties":{"id":"20241101221125-uxfgi1g","updated":"20241101230227"},"Children":[{"Type":"NodeText","Data":"效果是把前端原本的axios请求"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api/core/getData/userInfo"},{"Type":"NodeText","Data":"​请求"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"改为后端地址"},{"Type":"NodeTextMark","TextMarkType":"code strong","TextMarkTextContent":"http://localhost:8080/core/getData/userInfo"},{"Type":"NodeText","Data":"​，目的是解决跨域问题。"}]}]}]}]},{"ID":"20241101222745-34idbo6","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101222745-34idbo6","updated":"20241101230233"},"Children":[{"ID":"20241101222745-clx7qum","Type":"NodeParagraph","Properties":{"id":"20241101222745-clx7qum","updated":"20241101222801"},"Children":[{"Type":"NodeText","Data":"生产环境："}]},{"ID":"20241101222802-h2maczn","Type":"NodeList","ListData":{},"Properties":{"id":"20241101222802-h2maczn","updated":"20241101230233"},"Children":[{"ID":"20241101222804-o1h1ubv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101222804-o1h1ubv","updated":"20241101222804"},"Children":[{"ID":"20241101222804-ju40xka","Type":"NodeParagraph","Properties":{"id":"20241101222804-ju40xka","updated":"20241101222821"},"Children":[{"Type":"NodeText","Data":"由NGINX服务器进行反向代理。"}]}]},{"ID":"20241101222823-jr077h3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101222823-jr077h3","updated":"20241101222823"},"Children":[{"ID":"20241101222823-rf4gdri","Type":"NodeParagraph","Properties":{"id":"20241101222823-rf4gdri","updated":"20241101223808"},"Children":[{"Type":"NodeText","Data":"需要在"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"nginx.conf"},{"Type":"NodeText","Data":"​文件的"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"location /api/"},{"Type":"NodeText","Data":"​中配置"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"proxy_pass"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241101223809-omdlf8i","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241101223809-omdlf8i","updated":"20241101230233"},"Children":[{"ID":"20241101223809-0wmz3xw","Type":"NodeParagraph","Properties":{"id":"20241101223809-0wmz3xw","updated":"20241101230233"},"Children":[{"Type":"NodeText","Data":"效果是把前端原本的axios请求"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/api/core/getData/userInfo"},{"Type":"NodeText","Data":"​请求"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"改为后端地址"},{"Type":"NodeTextMark","TextMarkType":"code strong","TextMarkTextContent":"http://localhost:8080/core/getData/userInfo"},{"Type":"NodeText","Data":"，目的是解决跨域问题。"}]}]}]}]}]}]}]},{"ID":"20241101214348-1etsf75","Type":"NodeParagraph","Properties":{"id":"20241101214348-1etsf75","updated":"20241101214348"}},{"ID":"20241101223955-6sc0wec","Type":"NodeParagraph","Properties":{"id":"20241101223955-6sc0wec","updated":"20241101224017"},"Children":[{"Type":"NodeText","Data":"另外再看看这张图"}]},{"ID":"20241101221321-1k6yein","Type":"NodeParagraph","Properties":{"id":"20241101221321-1k6yein","updated":"20241101224019"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241101194521-p22ad80.png"},{"Type":"NodeLinkSpace"},{"Type":"NodeLinkTitle","Data":"前端解决跨域问题方案"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241101221322-xr3xnze","Type":"NodeParagraph","Properties":{"id":"20241101221322-xr3xnze","updated":"20241101221322"}},{"ID":"20241101221322-55nlf9f","Type":"NodeParagraph","Properties":{"id":"20241101221322-55nlf9f","updated":"20241101221322"}},{"ID":"20241101221322-ds5d12o","Type":"NodeParagraph","Properties":{"id":"20241101221322-ds5d12o","updated":"20241101221322"}},{"ID":"20241101221322-aw4wu38","Type":"NodeParagraph","Properties":{"id":"20241101221322-aw4wu38","updated":"20241101221322"}}]}