{"ID":"20241104204931-tcb5tew","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241104204931-tcb5tew","title":"操作系统实验","type":"doc","updated":"20241105202253"},"Children":[{"ID":"20241105201536-vvtpxrp","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241105201536-vvtpxrp","updated":"20241105202253"},"Children":[{"Type":"NodeText","Data":"注意事项"}]},{"ID":"20241105201545-zw0zgy7","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241105201545-zw0zgy7","updated":"20241105202253"},"Children":[{"ID":"20241105201553-wlx7wpu","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241105201553-wlx7wpu","updated":"20241105201553"},"Children":[{"ID":"20241105201553-ju3a445","Type":"NodeParagraph","Properties":{"id":"20241105201553-ju3a445","updated":"20241105202106"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"make qemu"},{"Type":"NodeText","Data":"​执行报错的话先执行这个"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ulimit -f unlimited"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241105201722-3gsjdhe","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241105201722-3gsjdhe","updated":"20241105201722"},"Children":[{"ID":"20241105201722-iivhx5l","Type":"NodeParagraph","Properties":{"id":"20241105201722-iivhx5l","updated":"20241105202106"},"Children":[{"Type":"NodeText","Data":"在网页的控制台中不要ctrl c和v，而是右键复制粘贴。"}]}]},{"ID":"20241105202037-nlid51x","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241105202037-nlid51x","updated":"20241105202037"},"Children":[{"ID":"20241105202037-kc811uw","Type":"NodeParagraph","Properties":{"id":"20241105202037-kc811uw","updated":"20241105202103"},"Children":[{"Type":"NodeText","Data":"退出qemu的方法：先按下“Ctrl+a“键，再按下”x”键，重回命令行。"}]}]},{"ID":"20241105202136-jnlox7d","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241105202136-jnlox7d","updated":"20241105202253"},"Children":[{"ID":"20241105202136-w2ut7bz","Type":"NodeParagraph","Properties":{"id":"20241105202136-w2ut7bz","updated":"20241105202253"},"Children":[{"Type":"NodeText","Data":"确保你会vim的基础操作，例如保存退出的方法（Esc+"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":":wq"},{"Type":"NodeText","Data":"​+回车）"}]}]}]},{"ID":"20241104204931-o1zxjdz","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241104204931-o1zxjdz","updated":"20241105201800"},"Children":[{"Type":"NodeText","Data":"实训1"}]},{"ID":"20241104210717-44iecj3","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241104210717-44iecj3","updated":"20241105201800"},"Children":[{"Type":"NodeText","Data":"关卡2"}]},{"ID":"20241104210733-a1ld0dz","Type":"NodeParagraph","Properties":{"id":"20241104210733-a1ld0dz","updated":"20241105201740"},"Children":[{"Type":"NodeText","Data":"先运行这个，然后在"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"make qemu"},{"Type":"NodeText","Data":"​："}]},{"ID":"20241104204946-6toksk3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241104204946-6toksk3","updated":"20241105201800"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bmdpbng="},{"Type":"NodeCodeBlockCode","Data":"make clean\nulimit -f unlimited\nmake qemu\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241104204946-usa7kbg","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241104204946-usa7kbg","updated":"20241104215803"},"Children":[{"Type":"NodeText","Data":"关卡3"}]},{"ID":"20241104212816-20k3p4i","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241104212816-20k3p4i","updated":"20241104212845"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"int clock_int_handler(void *data)\n{\n#ifdef LAB1_EX2\n  // LAB1 EXERCISE2: YOUR CODE\n  // (1) count ticks here\n  ticks++;\n\n#ifdef _SHOW_100_TICKS\n  // (2) if ticks % 100 == 0 then call kprintf to print \"100 ticks\"\n  if (ticks % 100 == 0) {\n    kprintf(\"100 ticks\\n\");\n  }\n#endif\n#endif\n#ifdef LAB4_EX1\n  run_timer_list();\n#endif\n  reload_timer();\n  return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241104204946-ntdncmy","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241104204946-ntdncmy","updated":"20241105092044"},"Children":[{"Type":"NodeText","Data":"关卡4"}]},{"ID":"20241104215259-dpol1ar","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241104215259-dpol1ar","updated":"20241104215320"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"void serial_int_handler(void *opaque)\n{\n    unsigned char id = inb(COM1+COM_IIR);\n    if(id \u0026 0x01)\n        return ;\n    // int c = serial_proc_data();\n    int c = cons_getc();\n#if defined(LAB1_EX3) \u0026\u0026 defined(_SHOW_SERIAL_INPUT)\n    // LAB1 EXERCISE3: YOUR CODE\n    kprintf(\"got input: %c\\n\", c);\n#endif\n#ifdef LAB4_EX2\n    extern void dev_stdin_write(char c);\n    dev_stdin_write(c);\n#endif\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241104230429-29keyp6","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241104230429-29keyp6","updated":"20241104230439"},"Children":[{"Type":"NodeText","Data":"实训2"}]},{"ID":"20241104230429-0zx9mc7","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241104230429-0zx9mc7","updated":"20241104230439"},"Children":[{"Type":"NodeText","Data":"关卡1"}]},{"ID":"20241104231349-r5b73vi","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241104231349-r5b73vi","updated":"20241104231352"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"static struct Page *\ndefault_alloc_pages(size_t n) {\n#ifdef LAB2_EX1\n    assert(n \u003e 0);\n    if (n \u003e nr_free) {\n        return NULL;\n    }\n    struct Page *page = NULL;\n    list_entry_t *le = \u0026free_list;\n\n    int THRESHOLD = 1; // 定义阈值\n\n    while ((le = list_next(le)) != \u0026free_list) {\n        struct Page *p = le2page(le, page_link);\n        if (p-\u003eproperty \u003e= n) {\n            page = p;\n            break;\n        }\n    }\n    if (page != NULL) {\n        // 如果剩余空间大于某一阈值，则划分为两页，否则全部分配出去\n        if (page-\u003eproperty - n \u003c THRESHOLD) {\n            nr_free -= page-\u003eproperty;\n        } else {\n            struct Page *new_page = page + n;\n            nr_free -= n;\n            new_page-\u003eproperty = page-\u003eproperty - n;\n            SetPageProperty(new_page);\n            list_add_after(\u0026(page-\u003epage_link), \u0026(new_page-\u003epage_link));\n        }\n        list_del(\u0026(page-\u003epage_link));\n        ClearPageProperty(page);\n    }\n    return page;\n#endif\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241104231354-v04ds8s","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241104231354-v04ds8s","updated":"20241104233751"},"Children":[{"Type":"NodeText","Data":"关卡2"}]},{"ID":"20241104231923-s6syw2q","Type":"NodeParagraph","Properties":{"id":"20241104231923-s6syw2q","updated":"20241104233751"},"Children":[{"Type":"NodeText","Data":"直接把参考代码粘贴到get_pte函数中，先把get_pte函数中原有的注释了。"}]},{"ID":"20241104234333-q3a4096","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241104234333-q3a4096","updated":"20241104234333"},"Children":[{"Type":"NodeText","Data":"关卡3"}]},{"ID":"20241104234333-pzzl709","Type":"NodeParagraph","Properties":{"id":"20241104234333-pzzl709","updated":"20241104234333"},"Children":[{"Type":"NodeText","Data":"直接把参考代码粘贴到get_pte函数中，先把get_pte函数中原有的注释了。"}]},{"ID":"20241104234337-t0v19wo","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241104234337-t0v19wo","updated":"20241104234600"},"Children":[{"Type":"NodeText","Data":"关卡4"}]},{"ID":"20241104234600-e0ed1na","Type":"NodeParagraph","Properties":{"id":"20241104234600-e0ed1na","updated":"20241104234600"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 232px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241104234600-yar4dim.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 232px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241105092052-p30pln0","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241105092052-p30pln0","updated":"20241105100315"},"Children":[{"Type":"NodeText","Data":"实训3"}]},{"ID":"20241105092057-4f0kro4","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105092057-4f0kro4","updated":"20241105100315"},"Children":[{"Type":"NodeText","Data":"关卡1"}]},{"ID":"20241105092106-cd6nrqo","Type":"NodeParagraph","Properties":{"id":"20241105092106-cd6nrqo","updated":"20241105100315"},"Children":[{"Type":"NodeText","Data":"直接把参考的代码粘进去。"}]},{"ID":"20241105092106-ewckibg","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105092106-ewckibg","updated":"20241105092601"},"Children":[{"Type":"NodeText","Data":"关卡2"}]},{"ID":"20241105093650-aysbc1d","Type":"NodeParagraph","Properties":{"id":"20241105093650-aysbc1d","updated":"20241105093717"},"Children":[{"Type":"NodeText","Data":"按他说的先确保kern/process/proc.c文件中的“load_icode()”函数已经按照第1关的要求补全。"}]},{"ID":"20241105092123-txfeqtf","Type":"NodeParagraph","Properties":{"id":"20241105092123-txfeqtf","updated":"20241105093723"},"Children":[{"Type":"NodeText","Data":"然后按说明加入代码"}]},{"ID":"20241105092601-8tq1i1r","Type":"NodeParagraph","Properties":{"id":"20241105092601-8tq1i1r","updated":"20241105092601"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241105092601-as967di.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241105092115-51dr6if","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105092115-51dr6if","updated":"20241105094154"},"Children":[{"Type":"NodeText","Data":"关卡3"}]},{"ID":"20241105094154-h0vivd4","Type":"NodeParagraph","Properties":{"id":"20241105094154-h0vivd4","updated":"20241105094154"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 433px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241105094154-d8z20dg.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 433px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241105094209-e15vebe","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241105094209-e15vebe","updated":"20241105095012"},"Children":[{"Type":"NodeText","Data":"实训4"}]},{"ID":"20241105094215-hf8zktj","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105094215-hf8zktj","updated":"20241105095012"},"Children":[{"Type":"NodeText","Data":"关卡1"}]},{"ID":"20241105094739-xnc5388","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241105094739-xnc5388","updated":"20241105094851"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"struct pipe *pipe_enty=NULL;\nstruct pipe_port *ppt0=NULL;\nstruct pipe_port *ppt1=NULL;\n\nint pipealloc(struct pipe_port *p0, struct pipe_port *p1)\n{\n    pipe_enty = (struct pipe*)kmalloc(sizeof(struct pipe));\n    // LAB5 YOUR CODE EX1 -----------------\n    // use kmalloc to alloc space for pipe_port\n\nppt0 = (struct pipe_port*)kmalloc(sizeof(struct pipe_port));\n    ppt1 = (struct pipe_port*)kmalloc(sizeof(struct pipe_port));\n\n    // LAB5 YOUR CODE EX1 -----------------\n    pipe_enty-\u003eaddr= kmalloc(128);\n    pipe_enty-\u003ereadopen = 1;\n    pipe_enty-\u003ewriteopen = 1;\n    pipe_enty-\u003enwrite = 0;\n    pipe_enty-\u003enread = 0;\n\n    ppt0-\u003ereadable = 1;\n    ppt0-\u003ewritable = 0;\n    ppt1-\u003ereadable = 0;\n    ppt1-\u003ewritable = 1;\n    ppt0-\u003epipe=pipe_enty;\n    ppt1-\u003epipe=pipe_enty;\n\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241105095012-g5rgp0y","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105095012-g5rgp0y","updated":"20241105100242"},"Children":[{"Type":"NodeText","Data":"关卡2"}]},{"ID":"20241105095703-w67dy0j","Type":"NodeParagraph","Properties":{"id":"20241105095703-w67dy0j","updated":"20241105100237"},"Children":[{"Type":"NodeText","Data":"修改pipewrite函数："}]},{"ID":"20241105095713-8pr6y2o","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241105095713-8pr6y2o","updated":"20241105100229"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"// LAB5 CODES for communication\nint pipewrite(struct pipe *pi, char* msg, int len)\n{\n    // w 记录已经写的字节数\n    int w = 0;\n    while(w \u003c len){\n        // 若不可读，写也没有意义\n        if(pi-\u003ereadopen == 0){\n            return -1;\n        }\n        if(pi-\u003enwrite == pi-\u003enread + PIPESIZE){\n            // pipe write 端已满，阻塞\n            do_yield();\n        } else {\n            // 一次读的 size 为 min(用户buffer剩余，pipe 剩余写容量，pipe 剩余线性容量)\n            int size = MIN3(\n                len - w,\n                pi-\u003enread + PIPESIZE - pi-\u003enwrite,\n                PIPESIZE - (pi-\u003enwrite % PIPESIZE)\n            );\n            kprintf(\"size %d\\n\",size);\n            //LAB5 YOUR CODE EX2 -----------------\n            int x = 0;\n            for (; x \u003c size; x += 1) {\n                *(pi-\u003eaddr + pi-\u003enwrite % PIPESIZE + x) = *(msg + w + x);\n            }\n            pi-\u003enwrite += size;\n            w += size;\n            //LAB5 YOUR CODE EX2 -----------------\n        }\n    }\n    return w;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241105100242-cnchqib","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241105100242-cnchqib","updated":"20241105102909"},"Children":[{"Type":"NodeText","Data":"实训5"}]},{"ID":"20241105102904-7qn11ws","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105102904-7qn11ws","updated":"20241105102909"},"Children":[{"Type":"NodeText","Data":"关卡1"}]},{"ID":"20241105102738-b9bs6nw","Type":"NodeParagraph","Properties":{"id":"20241105102738-b9bs6nw","updated":"20241105102820"},"Children":[{"Type":"NodeText","Data":"前面步骤按他说的来。在点击测评之前，执行："}]},{"ID":"20241105102820-worqjb2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241105102820-worqjb2","updated":"20241105102846"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"mkdir -p /home/cyy/ucore-loongarch32-lab4-noanswer/kern/fs/sfs/ ; cp /home/CQUCS/ucore-loongarch32-lab4-noanswer/kern/fs/sfs/sfs_inode.c /home/cyy/ucore-loongarch32-lab4-noanswer/kern/fs/sfs/\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241105095757-ba8kh51","Type":"NodeParagraph","Properties":{"id":"20241105095757-ba8kh51","updated":"20241105102901"},"Children":[{"Type":"NodeText","Data":"然后测评就能通过了。"}]},{"ID":"20241105102909-cfa84a1","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105102909-cfa84a1","updated":"20241105201939"},"Children":[{"Type":"NodeText","Data":"关卡2"}]},{"ID":"20241105102912-1m86bdw","Type":"NodeParagraph","Properties":{"id":"20241105102912-1m86bdw","updated":"20241105201939"},"Children":[{"Type":"NodeText","Data":"注意是后面那个函数，不是1-5的那个，是注释中写了步骤1-8的那个，把1-8的代码全部依次粘贴进去。"}]},{"ID":"20241105110517-h0lvh12","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105110517-h0lvh12","updated":"20241105110859"},"Children":[{"Type":"NodeText","Data":"关卡3"}]},{"ID":"20241105110859-zo8ewi7","Type":"NodeParagraph","Properties":{"id":"20241105110859-zo8ewi7","updated":"20241105110859"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 311px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241105110859-rwwon6t.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 311px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241105114540-p17g46b","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241105114540-p17g46b","updated":"20241105115801"},"Children":[{"Type":"NodeText","Data":"实训6"}]},{"ID":"20241105114544-od75th9","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105114544-od75th9","updated":"20241105115801"},"Children":[{"Type":"NodeText","Data":"关卡1"}]},{"ID":"20241105114548-df4sdi9","Type":"NodeParagraph","Properties":{"id":"20241105114548-df4sdi9","updated":"20241105114606"},"Children":[{"Type":"NodeText","Data":"在git的master分支中有答案"}]},{"ID":"20241105114608-mgro0re","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241105114608-mgro0re","updated":"20241105115746"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"root@educoder:/home/CQUCS/ucore-loongarch32-lab9# git branch\n  LAB9_EX1\n* LAB9_EX2\n  LAB9_EX3\n  master\nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9# git branch -a\n  LAB9_EX1\n* LAB9_EX2\n  LAB9_EX3\n  master\n  remotes/origin/HEAD -\u003e origin/master\n  remotes/origin/cqu2022\n  remotes/origin/cqu2022_noanswer\n  remotes/origin/master\n  remotes/origin/no_answer\nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9#  \nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9# \nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9# git checkout -f master\nSwitched to branch 'master'\nYour branch is up to date with 'origin/master'.\nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9# \nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9# \nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9# cd /home/CQUCS/ucore-loongarch32-lab9/kern/fs\nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9/kern/fs# \nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9/kern/fs# \nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9/kern/fs# \nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9/kern/fs# vim iobuf.c\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241105114621-e7y1iev","Type":"NodeParagraph","Properties":{"id":"20241105114621-e7y1iev","updated":"20241105115707"},"Children":[{"Type":"NodeText","Data":"先切换到master分支，去"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"iobuf.c"},{"Type":"NodeText","Data":"​中把相应部分的代码复制。然后切换到LAB9_EX1分支，粘进去："}]},{"ID":"20241105115707-1jznemx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241105115707-1jznemx","updated":"20241105115710"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"root@educoder:/home/CQUCS/ucore-loongarch32-lab9/kern/fs# git checkout -f LAB9_EX1\nSwitched to branch 'LAB9_EX1'\nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9/kern/fs# \nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9/kern/fs# \nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9/kern/fs# cd /home/CQUCS/ucore-loongarch32-lab9/kern/fs\nroot@educoder:/home/CQUCS/ucore-loongarch32-lab9/kern/fs# vim iobuf.c\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241105115711-vg9n851","Type":"NodeParagraph","Properties":{"id":"20241105115711-vg9n851","updated":"20241105115731"},"Children":[{"Type":"NodeText","Data":"后面就一样了。"}]},{"ID":"20241105115801-mc1oi42","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105115801-mc1oi42","updated":"20241105151516"},"Children":[{"Type":"NodeText","Data":"关卡2"}]},{"ID":"20241105150523-zdbzssd","Type":"NodeParagraph","Properties":{"id":"20241105150523-zdbzssd","updated":"20241105151514"},"Children":[{"Type":"NodeText","Data":"同样的方法"}]},{"ID":"20241105151516-8wo4hxc","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105151516-8wo4hxc","updated":"20241105151519"},"Children":[{"Type":"NodeText","Data":"关卡3"}]},{"ID":"20241105151516-mgsfeqt","Type":"NodeParagraph","Properties":{"id":"20241105151516-mgsfeqt","updated":"20241105151516"},"Children":[{"Type":"NodeText","Data":"同样的方法"}]},{"ID":"20241105151519-mtyn64u","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241105151519-mtyn64u","updated":"20241105201206"},"Children":[{"Type":"NodeText","Data":"实训7"}]},{"ID":"20241105151526-zdapo2q","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105151526-zdapo2q","updated":"20241105201206"},"Children":[{"Type":"NodeText","Data":"关卡1"}]},{"ID":"20241105193649-b1sdxr4","Type":"NodeParagraph","Properties":{"id":"20241105193649-b1sdxr4","updated":"20241105201206"},"Children":[{"Type":"NodeText","Data":"代码："}]},{"ID":"20241105193649-x04d39r","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241105193649-x04d39r","updated":"20241105193653"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"int* look_schedule(int *begin_pos, int *begin_direction, int *size) {\n    struct bio* current;\n    int* traversed_blocks = (int*)kmalloc(request_count * sizeof(int));\n    int count = 0;\n\n    *begin_pos = disk_head_look-\u003eblock_num;\n    *begin_direction = direction_look;\n    kprintf(\"begin_pos = %d, begin_direction = %d\\n\", *begin_pos, *begin_direction);\n#ifdef LAB10_EX1\n    // LAB10 EXERCISE1: YOUR CODE\n#endif\n    request_count = 0;\n    return traversed_blocks;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241105151532-7rheodb","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241105151532-7rheodb","updated":"20241105195157"},"Children":[{"Type":"NodeText","Data":"关卡2"}]},{"ID":"20241105195157-frhwj0f","Type":"NodeParagraph","Properties":{"id":"20241105195157-frhwj0f","updated":"20241105195157"},"Children":[{"Type":"NodeText","Data":"不用写，直接返回他给的值311："}]},{"ID":"20241105195223-8lntsr1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241105195223-8lntsr1","updated":"20241105201117"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr"},{"Type":"NodeCodeBlockCode","Data":"static int calculate_track_to_track_time(int current_block, int next_block) {\n#ifdef LAB10_EX2\n    // LAB10 EXERCISE2: YOUR CODE\nreturn 1;\n#endif\n}\n\nstatic int calculate_sector_to_sector_time(int current_block, int next_block) {\n#ifdef LAB10_EX2\n    // LAB10 EXERCISE2: YOUR CODE\nreturn 1;\n#endif\n}\n\nstatic int measure_time(int* traversed_blocks, int size, int begin_pos, int direction) {\n#ifdef LAB10_EX2\n    // LAB10 EXERCISE2: YOUR CODE\n    return 311;\n#endif\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241105195732-6xpa7qb","Type":"NodeParagraph","Properties":{"id":"20241105195732-6xpa7qb","updated":"20241105201143"},"Children":[{"Type":"NodeText","Data":"然后去测评就过了。"}]}]}