{"ID":"20241031152522-7659j94","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241031152522-7659j94","title":"静态库和动态库和makefile","type":"doc","updated":"20241031154104"},"Children":[{"ID":"20241031152523-8crabg8","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241031152523-8crabg8","updated":"20241031152523"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"静态库和动态库"}]},{"ID":"20241031152524-2g7vbfv","Type":"NodeBlockquote","Properties":{"id":"20241031152524-2g7vbfv","updated":"20241031152524"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241031152525-rcn4ndw","Type":"NodeParagraph","Properties":{"id":"20241031152525-rcn4ndw","updated":"20241031152525"},"Children":[{"Type":"NodeText","Data":"视频链接：【C++网络编程，从0实现Reactor高并发服务器】 https://www.bilibili.com/video/BV11Z4y157RY/?p=5\u0026share_source=copy_web\u0026vd_source=29909144aff7d2c1451e8d294e9a5437"}]}]},{"ID":"20241031152526-411i9pi","Type":"NodeParagraph","Properties":{"id":"20241031152526-411i9pi","updated":"20241031152526"},"Children":[{"Type":"NodeText","Data":"在实际开发中，我们把通用的函数和类分文件编写，称之为库。在其它的程序中，可以使用库中的函数和类。"}]},{"ID":"20241031152527-x0ou038","Type":"NodeParagraph","Properties":{"id":"20241031152527-x0ou038","updated":"20241031152527"},"Children":[{"Type":"NodeText","Data":"一般来说，通用的函数和类不提供源代码文件（安全性、商业机密），而是编译成二进制文件。"}]},{"ID":"20241031152528-849q5kw","Type":"NodeParagraph","Properties":{"id":"20241031152528-849q5kw","updated":"20241031152528"},"Children":[{"Type":"NodeText","Data":"库的二进制文件有两种：静态库和动态库。"}]},{"ID":"20241031152529-xxzrxc3","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241031152529-xxzrxc3","updated":"20241031152529"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"一、静态库"}]},{"ID":"20241031152530-pi18bdi","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152530-pi18bdi","updated":"20241031152530"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1）制作静态库"}]},{"ID":"20241031152531-i1ekzo5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152531-i1ekzo5","updated":"20241031152531"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ -c -o lib库名.a 源代码文件清单\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152532-hofei3a","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152532-hofei3a","updated":"20241031152532"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2）使用静态库"}]},{"ID":"20241031152533-h1vze46","Type":"NodeParagraph","Properties":{"id":"20241031152533-h1vze46","updated":"20241031152533"},"Children":[{"Type":"NodeText","Data":"不规范的做法："}]},{"ID":"20241031152534-24u4nqu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152534-24u4nqu","updated":"20241031152534"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ 选项 源代码文件名清单 静态库文件名\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152535-0xnjozs","Type":"NodeParagraph","Properties":{"id":"20241031152535-0xnjozs","updated":"20241031152535"},"Children":[{"Type":"NodeText","Data":"规范的做法："}]},{"ID":"20241031152536-9bvhoom","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152536-9bvhoom","updated":"20241031152536"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ 选项 源代码文件名清单 -l库名 -L库文件所在的目录名\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152537-4rxn8hb","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152537-4rxn8hb","updated":"20241031153942"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"例子"}]},{"ID":"20241031152538-ugxfnez","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241031152538-ugxfnez","updated":"20241031153942"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1、多文件编译"}]},{"ID":"20241031152539-hrc3jak","Type":"NodeParagraph","Properties":{"id":"20241031152539-hrc3jak","updated":"20241031152539"},"Children":[{"Type":"NodeText","Data":"以一个项目为例子："}]},{"ID":"20241031153850-1ruwl8j","Type":"NodeParagraph","Properties":{"id":"20241031153850-1ruwl8j","updated":"20241031153850"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 428px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031153850-fge42sj.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 428px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031152541-c0y5frp","Type":"NodeParagraph","Properties":{"id":"20241031152541-c0y5frp","updated":"20241031152541"},"Children":[{"Type":"NodeText","Data":"其中demo01.cpp使用了public.h中定义的函数和类："}]},{"ID":"20241031153914-p6b99gq","Type":"NodeParagraph","Properties":{"id":"20241031153914-p6b99gq","updated":"20241031153914"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 689px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031153914-rllskqt.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 689px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031152543-zgwcfwc","Type":"NodeThematicBreak","Properties":{"id":"20241031152543-zgwcfwc","updated":"20241031152543"}},{"ID":"20241031152544-j0c6ivz","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20241031152544-j0c6ivz","updated":"20241031153942"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"不规范的头文件💡"}]},{"ID":"20241031152545-aksuo8b","Type":"NodeParagraph","Properties":{"id":"20241031152545-aksuo8b","updated":"20241031152545"},"Children":[{"Type":"NodeText","Data":"解决：在编译指令中指定头文件的位置，这里就可以直接写"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"#include\u0026quot;public.h\u0026quot;"},{"Type":"NodeText","Data":"了。"}]},{"ID":"20241031152546-30fxfhy","Type":"NodeParagraph","Properties":{"id":"20241031152546-30fxfhy","updated":"20241031152546"},"Children":[{"Type":"NodeText","Data":"也就是说，在demo01时，指令为："}]},{"ID":"20241031152547-yqblm1a","Type":"NodeParagraph","Properties":{"id":"20241031152547-yqblm1a","updated":"20241031152547"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"#直接包含头文件","TextMarkTextContent":"直接包含头文件"}]},{"ID":"20241031152548-cvk6ptz","Type":"NodeThematicBreak","Properties":{"id":"20241031152548-cvk6ptz","updated":"20241031152548"}},{"ID":"20241031153942-em5jbg4","Type":"NodeParagraph","Properties":{"id":"20241031153942-em5jbg4","updated":"20241031153942"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 551px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031153942-clgisfx.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 551px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031152550-5nitlxf","Type":"NodeParagraph","Properties":{"id":"20241031152550-5nitlxf","updated":"20241031152550"},"Children":[{"Type":"NodeText","Data":"多文件编译：(注意这里public.cpp用了全路径，include的时候也是用的全路径)"}]},{"ID":"20241031152551-hnqdhqz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152551-hnqdhqz","updated":"20241031152551"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ -o demo01 demo01.cpp /home/wucz/tools/public.cpp\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152552-xxgopcc","Type":"NodeParagraph","Properties":{"id":"20241031152552-xxgopcc","updated":"20241031152552"},"Children":[{"Type":"NodeText","Data":"编译之后可以成功运行"}]},{"ID":"20241031152553-d5a5y8r","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241031152553-d5a5y8r","updated":"20241031152553"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2、制作静态库"}]},{"ID":"20241031152554-0l6hjcw","Type":"NodeParagraph","Properties":{"id":"20241031152554-0l6hjcw","updated":"20241031152554"},"Children":[{"Type":"NodeText","Data":"接下来把public.cpp制作成静态库"}]},{"ID":"20241031152555-5uhikqy","Type":"NodeParagraph","Properties":{"id":"20241031152555-5uhikqy","updated":"20241031152555"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20240904121838000","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/image-20240904121838000-20241031152933-qhf5sth.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241031152556-g2kfdyy","Type":"NodeParagraph","Properties":{"id":"20241031152556-g2kfdyy","updated":"20241031152556"},"Children":[{"Type":"NodeText","Data":"静态库是二进制文件，用vi打开是乱码"}]},{"ID":"20241031152557-5cmc46p","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241031152557-5cmc46p","updated":"20241031152557"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3、使用静态库"}]},{"ID":"20241031152558-1pt478g","Type":"NodeParagraph","Properties":{"id":"20241031152558-1pt478g","updated":"20241031152558"},"Children":[{"Type":"NodeText","Data":"编译静态库和源代码文件，下面那种是标准的做法："}]},{"ID":"20241031152559-guz5mhv","Type":"NodeParagraph","Properties":{"id":"20241031152559-guz5mhv","updated":"20241031152559"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20240904122352734","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/image-20240904122352734-20241031152933-r6uggqc.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241031152560-wk61fuv","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152560-wk61fuv","updated":"20241031152560"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3）静态库的概念"}]},{"ID":"20241031152561-hu3tzhi","Type":"NodeParagraph","Properties":{"id":"20241031152561-hu3tzhi","updated":"20241031152561"},"Children":[{"Type":"NodeText","Data":"程序"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkTextContent":"在编译时"},{"Type":"NodeText","Data":"会把库文件的二进制代码链接到目标程序中，这种方式称为"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkTextContent":"静态链接"},{"Type":"NodeText","Data":"。"}]},{"ID":"20241031152562-2ikxud9","Type":"NodeParagraph","Properties":{"id":"20241031152562-2ikxud9","updated":"20241031152562"},"Children":[{"Type":"NodeText","Data":"如果多个程序中用到了同一静态库中的函数或类，就会存在多份拷贝。"}]},{"ID":"20241031152563-sq7w67d","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152563-sq7w67d","updated":"20241031152563"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"4）静态库的特点"}]},{"ID":"20241031152564-ievij3z","Type":"NodeList","ListData":{"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152564-ievij3z","updated":"20241031152564"},"Children":[{"ID":"20241031152565-rafhzwj","Type":"NodeListItem","Data":"-","ListData":{"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152565-rafhzwj","updated":"20241031152565"},"Children":[{"ID":"20241031152566-9smunzl","Type":"NodeParagraph","Properties":{"id":"20241031152566-9smunzl","updated":"20241031152566"},"Children":[{"Type":"NodeText","Data":"静态库的链接是在编译时期完成的，执行的时候代码加载速度快。"}]}]},{"ID":"20241031152567-oio1t23","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152567-oio1t23","updated":"20241031152567"},"Children":[{"ID":"20241031152568-o8z510n","Type":"NodeParagraph","Properties":{"id":"20241031152568-o8z510n","updated":"20241031152568"},"Children":[{"Type":"NodeText","Data":"目标程序的可执行文件比较大，浪费空间。"}]}]},{"ID":"20241031152569-hu962ey","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152569-hu962ey","updated":"20241031152569"},"Children":[{"ID":"20241031152570-foahs33","Type":"NodeParagraph","Properties":{"id":"20241031152570-foahs33","updated":"20241031152570"},"Children":[{"Type":"NodeText","Data":"程序的更新和发布不方便，如果某一个静态库更新了，所有使用它的程序都需要重新编译。"}]}]}]},{"ID":"20241031152571-9b5696m","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241031152571-9b5696m","updated":"20241031152571"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"二、动态库"}]},{"ID":"20241031152572-e0f7rb2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152572-e0f7rb2","updated":"20241031152572"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1）制作动态库"}]},{"ID":"20241031152573-uhh1g0e","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152573-uhh1g0e","updated":"20241031152573"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ -fPIC -shared -o lib库名.so 源代码文件清单\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152574-nknbslm","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152574-nknbslm","updated":"20241031152574"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2）使用动态库"}]},{"ID":"20241031152575-n7zmyj2","Type":"NodeParagraph","Properties":{"id":"20241031152575-n7zmyj2","updated":"20241031152575"},"Children":[{"Type":"NodeText","Data":"不规范的做法："}]},{"ID":"20241031152576-pzih7kn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152576-pzih7kn","updated":"20241031152576"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ 选项 源代码文件名清单 动态库文件名\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152577-6cvl557","Type":"NodeParagraph","Properties":{"id":"20241031152577-6cvl557","updated":"20241031152577"},"Children":[{"Type":"NodeText","Data":"规范的做法："}]},{"ID":"20241031152578-3uclfek","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152578-3uclfek","updated":"20241031152578"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ 选项 源代码文件名清单 -l库名 -L库文件所在的目录名\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152579-rxb2seh","Type":"NodeParagraph","Properties":{"id":"20241031152579-rxb2seh","updated":"20241031152579"},"Children":[{"Type":"NodeText","Data":"运行可执行程序的时候，需要提前设置LD_LIBRARY_PATH环境变量。"}]},{"ID":"20241031152580-deabdtb","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152580-deabdtb","updated":"20241031152580"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"例子"}]},{"ID":"20241031152581-gktc53r","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241031152581-gktc53r","updated":"20241031152581"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1、制作动态库"}]},{"ID":"20241031152582-g3eh7jr","Type":"NodeParagraph","Properties":{"id":"20241031152582-g3eh7jr","updated":"20241031152582"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20240904140232000","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/image-20240904140232000-20241031152933-0u64fle.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241031152583-f8q2ep5","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241031152583-f8q2ep5","updated":"20241031152583"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2、使用动态库"}]},{"ID":"20241031152584-jgl5e1c","Type":"NodeParagraph","Properties":{"id":"20241031152584-jgl5e1c","updated":"20241031152584"},"Children":[{"Type":"NodeText","Data":"将动态库与程序源代码一起编译"}]},{"ID":"20241031152585-e1nxmw4","Type":"NodeParagraph","Properties":{"id":"20241031152585-e1nxmw4","updated":"20241031152585"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20240904140516217","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/image-20240904140516217-20241031152933-xdl1b24.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241031152586-przh61w","Type":"NodeParagraph","Properties":{"id":"20241031152586-przh61w","updated":"20241031152586"},"Children":[{"Type":"NodeText","Data":"但是报错了，因为需要配置环境变量"}]},{"ID":"20241031152587-xfkp5q9","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241031152587-xfkp5q9","updated":"20241031152587"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3、配置环境变量"}]},{"ID":"20241031152588-wzqvr0j","Type":"NodeParagraph","Properties":{"id":"20241031152588-wzqvr0j","updated":"20241031152588"},"Children":[{"Type":"NodeText","Data":"LD_LIBRARY_PATH这个环境变量的作用是指定动态库的目录"}]},{"ID":"20241031152589-pm1rcsh","Type":"NodeParagraph","Properties":{"id":"20241031152589-pm1rcsh","updated":"20241031152589"},"Children":[{"Type":"NodeText","Data":"查看环境变量内容的命令："}]},{"ID":"20241031152590-wlhtmgm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152590-wlhtmgm","updated":"20241031152590"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"echo $LD_LIBRARY_PATH\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152591-2fyaptw","Type":"NodeParagraph","Properties":{"id":"20241031152591-2fyaptw","updated":"20241031152591"},"Children":[{"Type":"NodeText","Data":"给这个环境变量新增值的命令："}]},{"ID":"20241031152592-tud248x","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152592-tud248x","updated":"20241031152592"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/wucz/tools\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152593-71kia7c","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152593-71kia7c","updated":"20241031152593"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"3）动态库的概念"}]},{"ID":"20241031152594-bzswiq4","Type":"NodeParagraph","Properties":{"id":"20241031152594-bzswiq4","updated":"20241031152594"},"Children":[{"Type":"NodeText","Data":"程序在编译时不会把库文件的二进制代码链接到目标程序中，而是"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkTextContent":"在运行时"},{"Type":"NodeText","Data":"候才被载入。"}]},{"ID":"20241031152595-qxwxgyj","Type":"NodeParagraph","Properties":{"id":"20241031152595-qxwxgyj","updated":"20241031152595"},"Children":[{"Type":"NodeText","Data":"如果多个进程中用到了同一动态库中的函数或类，那么在内存中"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkTextContent":"只有一份"},{"Type":"NodeText","Data":"，避免了空间浪费问题。"}]},{"ID":"20241031152596-h1dr4fi","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152596-h1dr4fi","updated":"20241031152596"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"4）动态库的特点"}]},{"ID":"20241031152597-hmwejwg","Type":"NodeList","ListData":{"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152597-hmwejwg","updated":"20241031152597"},"Children":[{"ID":"20241031152598-kevacap","Type":"NodeListItem","Data":"-","ListData":{"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152598-kevacap","updated":"20241031152598"},"Children":[{"ID":"20241031152599-k3xe4h8","Type":"NodeParagraph","Properties":{"id":"20241031152599-k3xe4h8","updated":"20241031152599"},"Children":[{"Type":"NodeText","Data":"程序在运行的过程中，需要用到动态库的时候才把动态库的二进制代码载入内存。"}]}]},{"ID":"20241031152600-ukpiuk7","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152600-ukpiuk7","updated":"20241031152600"},"Children":[{"ID":"20241031152601-82ca0qf","Type":"NodeParagraph","Properties":{"id":"20241031152601-82ca0qf","updated":"20241031152601"},"Children":[{"Type":"NodeText","Data":"可以实现进程之间的代码共享，因此动态库也称为共享库。"}]}]},{"ID":"20241031152602-8p78nbb","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152602-8p78nbb","updated":"20241031152602"},"Children":[{"ID":"20241031152603-0jiiijn","Type":"NodeParagraph","Properties":{"id":"20241031152603-0jiiijn","updated":"20241031152603"},"Children":[{"Type":"NodeText","Data":"程序升级比较简单，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a strong","TextMarkTextContent":"不需要重新编译程序"},{"Type":"NodeText","Data":"，只需要更新动态库就行了，这是动态库的精髓！"}]}]}]},{"ID":"20241031152604-w5e0mtv","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241031152604-w5e0mtv","updated":"20241031152604"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"三、优先使用动态库"}]},{"ID":"20241031152605-uysaqp6","Type":"NodeParagraph","Properties":{"id":"20241031152605-uysaqp6","updated":"20241031152605"},"Children":[{"Type":"NodeText","Data":"如果动态库和静态库同时存在，编译器将优先使用动态库。"}]},{"ID":"20241031152606-kdateqn","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241031152606-kdateqn","updated":"20241031154040"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"makefile"}]},{"ID":"20241031152607-0ggyv9w","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241031152607-0ggyv9w","updated":"20241031154040"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"makefile"}]},{"ID":"20241031152608-l8gnwbb","Type":"NodeBlockquote","Properties":{"id":"20241031152608-l8gnwbb","updated":"20241031152608"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241031152609-rozh32m","Type":"NodeParagraph","Properties":{"id":"20241031152609-rozh32m","updated":"20241031152609"},"Children":[{"Type":"NodeText","Data":"视频：【C++网络编程，从0实现Reactor高并发服务器】 https://www.bilibili.com/video/BV11Z4y157RY/?p=6\u0026share_source=copy_web\u0026vd_source=29909144aff7d2c1451e8d294e9a5437"}]}]},{"ID":"20241031152610-6snt7f9","Type":"NodeParagraph","Properties":{"id":"20241031152610-6snt7f9","updated":"20241031152610"},"Children":[{"Type":"NodeText","Data":"在实际开发中，项目的源代码文件比较多，按类型、功能、模块分别存放在不同的目录和文件中，哪些文件需要先编译，那些文件后编译，那些文件需要重新编译，还有更多更复杂的操作。"}]},{"ID":"20241031152611-blhds8l","Type":"NodeParagraph","Properties":{"id":"20241031152611-blhds8l","updated":"20241031152611"},"Children":[{"Type":"NodeText","Data":"make是一个强大的实用工具，用于管理项目的编译和链接。make需要一个编译规则文件makefile，可实现"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"自动化编译"},{"Type":"NodeText","Data":"。"}]},{"ID":"20241031152612-7bv42am","Type":"NodeParagraph","Properties":{"id":"20241031152612-7bv42am","updated":"20241031152612"},"Children":[{"Type":"NodeText","Data":"关于脚本"}]},{"ID":"20241031152613-fs37h9c","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152613-fs37h9c","updated":"20241031152613"},"Children":[{"ID":"20241031152614-1r5fwxw","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152614-1r5fwxw","updated":"20241031152614"},"Children":[{"ID":"20241031152615-5we8t7q","Type":"NodeParagraph","Properties":{"id":"20241031152615-5we8t7q","updated":"20241031152615"},"Children":[{"Type":"NodeText","Data":"使用一个.sh脚本文件也可以自动化编译，但是make的好处在于没有修改的文件不会重新编译（"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a strong","TextMarkTextContent":"增量编译"},{"Type":"NodeText","Data":"）"}]}]}]},{"ID":"20241031152616-b9z3ekw","Type":"NodeParagraph","Properties":{"id":"20241031152616-b9z3ekw","updated":"20241031152616"},"Children":[{"Type":"NodeText","Data":"首先展示文件结构："}]},{"ID":"20241031154040-untsjnl","Type":"NodeParagraph","Properties":{"id":"20241031154040-untsjnl","updated":"20241031154040"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 594px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031154040-oina97i.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 594px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031152618-co1g31b","Type":"NodeParagraph","Properties":{"id":"20241031152618-co1g31b","updated":"20241031152618"},"Children":[{"Type":"NodeText","Data":"各个文件："}]},{"ID":"20241031152619-yzj4t1i","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152619-yzj4t1i","updated":"20241031152619"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"tools/public.h"}]},{"ID":"20241031152620-haxmivm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Yysr","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152620-haxmivm","updated":"20241031152620"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"#include \u003ciostream\u003e\n// 声明一个通用的函数。\nvoid func();\n// 声明一个通用的类。\nclass AA\n{\npublic:\n  void show();\n};\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152621-1ery8qf","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152621-1ery8qf","updated":"20241031152621"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"tools/public.cpp"}]},{"ID":"20241031152622-9hl8w46","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Yysr","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152622-9hl8w46","updated":"20241031152622"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"#include \"public.h\"\nusing namespace std;\n// 通用函数的代码实现。\nvoid func()\n{\n  cout \u003c\u003c \"升级了调用了func()函数。\\n\";\n}\n// 通用类的代码实现。\nvoid AA::show()\n{\n  cout \u003c\u003c \"升级了我是一只傻傻鸟。\\n\";\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152623-kogk6vu","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152623-kogk6vu","updated":"20241031152623"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"tools/makefile🚩"}]},{"ID":"20241031152624-2fl4nhb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"bWFrZWZpbGU=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152624-2fl4nhb","updated":"20241031152624"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bWFrZWZpbGU=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"# 指定编译的目标文件是libpublic.a和libpublic.so\nall:libpublic.a \\\n    libpublic.so\n\n# 编译libpublic.a需要依赖public.h和public.cpp\n# 如果被依赖文件内容发生了变化，将重新编译libpublic.a\nlibpublic.a:public.h public.cpp\n        g++ -c -o libpublic.a public.cpp\n\nlibpublic.so:public.h public.cpp\n        g++ -fPIC -shared -o libpublic.so public.cpp\n\n# clean用于清理编译目标文件，仅在make clean才会执行。\nclean:\n        rm -f libpublic.a libpublic.so\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152625-tcc1vou","Type":"NodeParagraph","Properties":{"id":"20241031152625-tcc1vou","updated":"20241031152625"},"Children":[{"Type":"NodeText","Data":"注意一定要用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"tab"},{"Type":"NodeText","Data":"，不能敲空格"}]},{"ID":"20241031152626-z99pg85","Type":"NodeParagraph","Properties":{"id":"20241031152626-z99pg85","updated":"20241031152626"},"Children":[{"Type":"NodeText","Data":"制作动态库：记得把api的目录加入环境变量："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"#3、配置环境变量","TextMarkTextContent":"3、配置环境变量"}]},{"ID":"20241031152627-rr9sojq","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152627-rr9sojq","updated":"20241031152627"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"api/myapi.h"}]},{"ID":"20241031152628-uh7os4r","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Yysr","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152628-uh7os4r","updated":"20241031152628"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"#include \u003ciostream\u003e\n// 声明一个通用的函数。\nvoid func1();\n// 声明一个通用的类。\nclass BB\n{\npublic:\n  void show();\n};\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152629-2xh4lm9","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152629-2xh4lm9","updated":"20241031152629"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"api/myapi.cpp"}]},{"ID":"20241031152630-oxjw7im","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Yysr","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152630-oxjw7im","updated":"20241031152630"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"#include \"myapi.h\"\nusing namespace std;\n// 通用函数的代码实现。\nvoid func1()\n{\n  cout \u003c\u003c \"调用了func1()函数。\\n\";\n}\n// 通用类的代码实现。\nvoid BB::show()\n{\n  cout \u003c\u003c \"你是一只傻傻鸟。\\n\";\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152631-b6lnuo7","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152631-b6lnuo7","updated":"20241031152631"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"api/makefile🚩"}]},{"ID":"20241031152632-5legs03","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"bWFrZWZpbGU=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152632-5legs03","updated":"20241031152632"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bWFrZWZpbGU=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"# 指定编译的目标文件是libmyapi.a和libmyapi.so\nall:libmyapi.a libmyapi.so\n\n# 编译libmyapi.a需要依赖myapi.h和myapi.cpp\n# 如果被依赖文件内容发生了变化，将重新编译libmyapi.a\nlibmyapi.a:myapi.h myapi.cpp\n        g++ -c -o libmyapi.a myapi.cpp\n\nlibmyapi.so:myapi.h myapi.cpp\n        g++ -fPIC -shared -o libmyapi.so myapi.cpp\n\n# clean用于清理编译目标文件，仅在make clean才会执行。\nclean:\n        rm -f libmyapi.a libmyapi.so\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152633-x2e36v0","Type":"NodeParagraph","Properties":{"id":"20241031152633-x2e36v0","updated":"20241031152633"},"Children":[{"Type":"NodeText","Data":"制作动态库：记得把api的目录加入环境变量："},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a","TextMarkAHref":"#3、配置环境变量","TextMarkTextContent":"3、配置环境变量"}]},{"ID":"20241031152634-8pppwhl","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152634-8pppwhl","updated":"20241031152634"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"app/demo01.cpp"}]},{"ID":"20241031152635-8d9rue1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Yysr","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152635-8d9rue1","updated":"20241031152635"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"#include \"public.h\"  // 包含通用函数和类的头文件。\n#include \"myapi.h\"     // 包含另一个通用函数和类的头文件。\nusing namespace std;\nint main() {\n  func();    // 调用通用的函数。\n  func1();   // 调用另一个通用的函数。\n\n  AA a;      // 用通用类声明对象。\n  a.show();  // 调用对象的方法。\n  BB b;      // 用另一个通用类声明对象。\n  b.show();  // 调用对象的方法。\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152636-2f92m7a","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152636-2f92m7a","updated":"20241031152636"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"app/makefile🚩"}]},{"ID":"20241031152637-temyixj","Type":"NodeBlockquote","Properties":{"id":"20241031152637-temyixj","updated":"20241031152637"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241031152638-g75vt4w","Type":"NodeParagraph","Properties":{"id":"20241031152638-g75vt4w","updated":"20241031152638"},"Children":[{"Type":"NodeText","Data":"【C++网络编程，从0实现Reactor高并发服务器】 【精准空降到 11:30】 https://www.bilibili.com/video/BV11Z4y157RY/?p=6\u0026share_source=copy_web\u0026vd_source=29909144aff7d2c1451e8d294e9a5437\u0026t=690"}]}]},{"ID":"20241031152639-1zkkwo2","Type":"NodeParagraph","Properties":{"id":"20241031152639-1zkkwo2","updated":"20241031152639"},"Children":[{"Type":"NodeText","Data":"原本的编译指令："}]},{"ID":"20241031152640-8d19xhq","Type":"NodeParagraph","Properties":{"id":"20241031152640-8d19xhq","updated":"20241031152640"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20240904170242349","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/image-20240904170242349-20241031152933-e14qr8q.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241031152641-5dwrp6c","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241031152641-5dwrp6c","updated":"20241031152641"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"直接包含头文件"}]},{"ID":"20241031152642-n8sy7qw","Type":"NodeParagraph","Properties":{"id":"20241031152642-n8sy7qw","updated":"20241031152642"},"Children":[{"Type":"NodeText","Data":"在demo01.cpp中直接"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"#include\u0026quot;public.h\u0026quot;"},{"Type":"NodeText","Data":"，但是在编译的时候需要指定头文件所在目录。用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-I"},{"Type":"NodeText","Data":"指定。"}]},{"ID":"20241031152643-7ripr4d","Type":"NodeParagraph","Properties":{"id":"20241031152643-7ripr4d","updated":"20241031152643"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20240904172309030","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/image-20240904172309030-20241031152933-22yn0ro.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241031152644-ng3nmxl","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20241031152644-ng3nmxl","updated":"20241031152644"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"最终的makefile🌸"}]},{"ID":"20241031152645-ko8rkc8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"bWFrZWZpbGU=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152645-ko8rkc8","updated":"20241031152645"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bWFrZWZpbGU=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"# 指定直接include\"public.h\"包含的【头文件】所在的目录\nINCLUDEDIR=-I/home/wucz/tools -I/home/wucz/api\n# 指定【库文件】所在的目录，就是动态库文件的目录\nLIBDIR=-L/home/wucz/tools -L/home/wucz/api\n\nall:demo01 demo02 demo03\n\ndemo01:demo01.cpp\n\t#             依赖的cpp  -I头文件目录  -L库文件目录 -l库文件名称\n\tg++ -o demo01 demo01.cpp $(INCLUDEDIR) $(LIBDIR) -lpublic -lmyapi\n\tcp demo01 /tmp/.\n\ndemo02:demo02.cpp\n\tg++ -o demo02 demo02.cpp $(INCLUDEDIR) $(LIBDIR) -lpublic -lmyapi\n\ndemo03:demo03.cpp\n\tg++ -o demo03 demo03.cpp $(INCLUDEDIR) $(LIBDIR) -lpublic -lmyapi\n\nclean:\n\trm -f demo01 demo02 demo03\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152646-5bsmhv7","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241031152646-5bsmhv7","updated":"20241031152646"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"如何编译c++项目🌞"}]},{"ID":"20241031152647-iglohzw","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241031152647-iglohzw","updated":"20241031152647"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"简单的情况"}]},{"ID":"20241031152648-knp4sua","Type":"NodeBlockquote","Properties":{"id":"20241031152648-knp4sua","updated":"20241031152648"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241031152649-hf7w7yq","Type":"NodeParagraph","Properties":{"id":"20241031152649-hf7w7yq","updated":"20241031152649"},"Children":[{"Type":"NodeText","Data":"我在Linux下有一个c++项目，结构如下："}]},{"ID":"20241031152650-poeqcgp","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152650-poeqcgp","updated":"20241031152650"},"Children":[{"ID":"20241031152651-9k4x87n","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152651-9k4x87n","updated":"20241031152651"},"Children":[{"ID":"20241031152652-0fs9qpa","Type":"NodeParagraph","Properties":{"id":"20241031152652-0fs9qpa","updated":"20241031152652"},"Children":[{"Type":"NodeText","Data":"public.cpp"}]}]},{"ID":"20241031152653-drz5oc5","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152653-drz5oc5","updated":"20241031152653"},"Children":[{"ID":"20241031152654-j3d032p","Type":"NodeParagraph","Properties":{"id":"20241031152654-j3d032p","updated":"20241031152654"},"Children":[{"Type":"NodeText","Data":"public.h"}]}]},{"ID":"20241031152655-h5ru8sw","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152655-h5ru8sw","updated":"20241031152655"},"Children":[{"ID":"20241031152656-b45tt85","Type":"NodeParagraph","Properties":{"id":"20241031152656-b45tt85","updated":"20241031152656"},"Children":[{"Type":"NodeText","Data":"demo.cpp"}]}]}]},{"ID":"20241031152657-cwz9d0t","Type":"NodeParagraph","Properties":{"id":"20241031152657-cwz9d0t","updated":"20241031152657"},"Children":[{"Type":"NodeText","Data":"其中在demo.cpp中直接#include\"public.h\"，那么我该如何编译demo.cpp？你能给出指令吗？"}]}]},{"ID":"20241031152658-ubih659","Type":"NodeParagraph","Properties":{"id":"20241031152658-ubih659","updated":"20241031152658"},"Children":[{"Type":"NodeText","Data":"要编译 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.cpp"},{"Type":"NodeText","Data":"，并且它依赖于 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.h"},{"Type":"NodeText","Data":" 和 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.cpp"},{"Type":"NodeText","Data":"，你需要确保 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.cpp"},{"Type":"NodeText","Data":" 也被编译，并且链接到生成的可执行文件中。以下是编译的步骤和相应的指令："}]},{"ID":"20241031152659-novnrwt","Type":"NodeList","ListData":{"Typ":1,"Start":1,"Delimiter":46,"Padding":3,"Marker":"MQ==","Num":1},"Properties":{"id":"20241031152659-novnrwt","updated":"20241031152659"},"Children":[{"ID":"20241031152660-86x5s4p","Type":"NodeListItem","Data":"1","ListData":{"Typ":1,"Start":1,"Delimiter":46,"Padding":3,"Marker":"MQ==","Num":1},"Properties":{"id":"20241031152660-86x5s4p","updated":"20241031152660"},"Children":[{"ID":"20241031152661-mz3kpyj","Type":"NodeParagraph","Properties":{"id":"20241031152661-mz3kpyj","updated":"20241031152661"},"Children":[{"Type":"NodeText","Data":"编译 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.cpp"},{"Type":"NodeText","Data":" 生成目标文件 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.o"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031152662-ag4tzrj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152662-ag4tzrj","updated":"20241031152662"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ -c public.cpp -o public.o\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]}]},{"ID":"20241031152663-q3ye0tt","Type":"NodeListItem","Data":"2","ListData":{"Typ":1,"Tight":true,"Start":2,"Delimiter":46,"Padding":3,"Marker":"Mg==","Num":2},"Properties":{"id":"20241031152663-q3ye0tt","updated":"20241031152663"},"Children":[{"ID":"20241031152664-vonw9yf","Type":"NodeParagraph","Properties":{"id":"20241031152664-vonw9yf","updated":"20241031152664"},"Children":[{"Type":"NodeText","Data":"编译 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.cpp"},{"Type":"NodeText","Data":" 生成目标文件 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.o"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031152665-1kva66s","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152665-1kva66s","updated":"20241031152665"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ -c demo.cpp -o demo.o\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]}]},{"ID":"20241031152666-sk8ccmu","Type":"NodeListItem","Data":"3","ListData":{"Typ":1,"Tight":true,"Start":3,"Delimiter":46,"Padding":3,"Marker":"Mw==","Num":3},"Properties":{"id":"20241031152666-sk8ccmu","updated":"20241031152666"},"Children":[{"ID":"20241031152667-vzqo9q2","Type":"NodeParagraph","Properties":{"id":"20241031152667-vzqo9q2","updated":"20241031152667"},"Children":[{"Type":"NodeText","Data":"将 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.o"},{"Type":"NodeText","Data":" 和 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.o"},{"Type":"NodeText","Data":" 链接生成可执行文件，例如生成 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031152668-1fsxjt3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152668-1fsxjt3","updated":"20241031152668"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ public.o demo.o -o demo\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]}]}]},{"ID":"20241031152669-85xmp31","Type":"NodeParagraph","Properties":{"id":"20241031152669-85xmp31","updated":"20241031152669"},"Children":[{"Type":"NodeText","Data":"或者你可以一步到位编译并链接 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.cpp"},{"Type":"NodeText","Data":" 和 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.cpp"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031152670-8e5ipeu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152670-8e5ipeu","updated":"20241031152670"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ -o demo demo.cpp public.cpp\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152671-xhy7v5a","Type":"NodeParagraph","Properties":{"id":"20241031152671-xhy7v5a","updated":"20241031152671"},"Children":[{"Type":"NodeText","Data":"这样，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.cpp"},{"Type":"NodeText","Data":" 就会被编译为一个可执行文件 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo"},{"Type":"NodeText","Data":"。"}]},{"ID":"20241031152672-qqqqhah","Type":"NodeBlockquote","Properties":{"id":"20241031152672-qqqqhah","updated":"20241031152672"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241031152673-xwlhj56","Type":"NodeParagraph","Properties":{"id":"20241031152673-xwlhj56","updated":"20241031152673"},"Children":[{"Type":"NodeText","Data":"好的，那么如果我的项目结构如下："}]},{"ID":"20241031152674-ytl790r","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152674-ytl790r","updated":"20241031152674"},"Children":[{"ID":"20241031152675-j0rsv3m","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152675-j0rsv3m","updated":"20241031152675"},"Children":[{"ID":"20241031152676-kbpw50u","Type":"NodeParagraph","Properties":{"id":"20241031152676-kbpw50u","updated":"20241031152676"},"Children":[{"Type":"NodeText","Data":"tools"}]},{"ID":"20241031152677-oqx1mwh","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152677-oqx1mwh","updated":"20241031152677"},"Children":[{"ID":"20241031152678-5zzjznm","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152678-5zzjznm","updated":"20241031152678"},"Children":[{"ID":"20241031152679-c6cnley","Type":"NodeParagraph","Properties":{"id":"20241031152679-c6cnley","updated":"20241031152679"},"Children":[{"Type":"NodeText","Data":"public.cpp"}]}]},{"ID":"20241031152680-vldoso1","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152680-vldoso1","updated":"20241031152680"},"Children":[{"ID":"20241031152681-6u1e1n0","Type":"NodeParagraph","Properties":{"id":"20241031152681-6u1e1n0","updated":"20241031152681"},"Children":[{"Type":"NodeText","Data":"public.h"}]}]}]}]},{"ID":"20241031152682-9fougs5","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152682-9fougs5","updated":"20241031152682"},"Children":[{"ID":"20241031152683-qydsake","Type":"NodeParagraph","Properties":{"id":"20241031152683-qydsake","updated":"20241031152683"},"Children":[{"Type":"NodeText","Data":"app"}]},{"ID":"20241031152684-79ht7ms","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152684-79ht7ms","updated":"20241031152684"},"Children":[{"ID":"20241031152685-6sbmdm0","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152685-6sbmdm0","updated":"20241031152685"},"Children":[{"ID":"20241031152686-6kfvwjn","Type":"NodeParagraph","Properties":{"id":"20241031152686-6kfvwjn","updated":"20241031152686"},"Children":[{"Type":"NodeText","Data":"demo.cpp"}]}]}]}]}]},{"ID":"20241031152687-zvpfp82","Type":"NodeParagraph","Properties":{"id":"20241031152687-zvpfp82","updated":"20241031152687"},"Children":[{"Type":"NodeText","Data":"其中在demo.cpp中直接#include\"public.h\"，这时我该用什么命令来编译demo.cpp呢？"}]}]},{"ID":"20241031152688-zgyctdl","Type":"NodeParagraph","Properties":{"id":"20241031152688-zgyctdl","updated":"20241031152688"},"Children":[{"Type":"NodeText","Data":"在这个项目结构中，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.cpp"},{"Type":"NodeText","Data":" 依赖于 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"tools"},{"Type":"NodeText","Data":" 文件夹中的 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.h"},{"Type":"NodeText","Data":" 和 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.cpp"},{"Type":"NodeText","Data":" 文件。由于 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.cpp"},{"Type":"NodeText","Data":" 直接 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"#include \u0026quot;public.h\u0026quot;"},{"Type":"NodeText","Data":"，你需要指定 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"tools"},{"Type":"NodeText","Data":" 目录作为头文件的搜索路径。此外，还需要编译 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.cpp"},{"Type":"NodeText","Data":" 并将其与 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.cpp"},{"Type":"NodeText","Data":" 链接。"}]},{"ID":"20241031152689-2n78dmf","Type":"NodeParagraph","Properties":{"id":"20241031152689-2n78dmf","updated":"20241031152689"},"Children":[{"Type":"NodeText","Data":"可以按照以下步骤编译："}]},{"ID":"20241031152690-istnlay","Type":"NodeList","ListData":{"Typ":1,"Start":1,"Delimiter":46,"Padding":3,"Marker":"MQ==","Num":1},"Properties":{"id":"20241031152690-istnlay","updated":"20241031152690"},"Children":[{"ID":"20241031152691-5659rpf","Type":"NodeListItem","Data":"1","ListData":{"Typ":1,"Start":1,"Delimiter":46,"Padding":3,"Marker":"MQ==","Num":1},"Properties":{"id":"20241031152691-5659rpf","updated":"20241031152691"},"Children":[{"ID":"20241031152692-c8g002p","Type":"NodeParagraph","Properties":{"id":"20241031152692-c8g002p","updated":"20241031152692"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"编译 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"public.cpp"},{"Type":"NodeText","Data":" 生成目标文件 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.o"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031152693-jmixw8v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152693-jmixw8v","updated":"20241031152693"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ -c tools/public.cpp -o tools/public.o\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]}]},{"ID":"20241031152694-ntt9u4a","Type":"NodeListItem","Data":"2","ListData":{"Typ":1,"Tight":true,"Start":2,"Delimiter":46,"Padding":3,"Marker":"Mg==","Num":2},"Properties":{"id":"20241031152694-ntt9u4a","updated":"20241031152694"},"Children":[{"ID":"20241031152695-xy7vaqz","Type":"NodeParagraph","Properties":{"id":"20241031152695-xy7vaqz","updated":"20241031152695"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"编译 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"demo.cpp"},{"Type":"NodeText","Data":" 时，指定 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"tools"},{"Type":"NodeText","Data":" 目录为头文件的搜索路径，并生成目标文件 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.o"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031152696-ijthpxb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152696-ijthpxb","updated":"20241031152696"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ -c app/demo.cpp -Itools -o app/demo.o\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]}]},{"ID":"20241031152697-7ug25n0","Type":"NodeListItem","Data":"3","ListData":{"Typ":1,"Tight":true,"Start":3,"Delimiter":46,"Padding":3,"Marker":"Mw==","Num":3},"Properties":{"id":"20241031152697-7ug25n0","updated":"20241031152697"},"Children":[{"ID":"20241031152698-u7e23ub","Type":"NodeParagraph","Properties":{"id":"20241031152698-u7e23ub","updated":"20241031152698"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"链接生成可执行文件"},{"Type":"NodeText","Data":"（例如生成 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo"},{"Type":"NodeText","Data":"）："}]},{"ID":"20241031152699-a06559o","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152699-a06559o","updated":"20241031152699"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ app/demo.o tools/public.o -o demo\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]}]}]},{"ID":"20241031152700-wxaz8qh","Type":"NodeParagraph","Properties":{"id":"20241031152700-wxaz8qh","updated":"20241031152700"},"Children":[{"Type":"NodeText","Data":"或者你可以用一条命令来完成编译和链接："}]},{"ID":"20241031152701-mmrxmm5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152701-mmrxmm5","updated":"20241031152701"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ -o demo app/demo.cpp tools/public.cpp -Itools\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152702-u1ysxbt","Type":"NodeParagraph","Properties":{"id":"20241031152702-u1ysxbt","updated":"20241031152702"},"Children":[{"Type":"NodeText","Data":"这个命令会自动处理头文件的搜索路径，并编译 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.cpp"},{"Type":"NodeText","Data":" 和 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.cpp"},{"Type":"NodeText","Data":" 生成可执行文件 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo"},{"Type":"NodeText","Data":"。"}]},{"ID":"20241031152703-kx8nb0e","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241031152703-kx8nb0e","updated":"20241031152703"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"使用动态库"}]},{"ID":"20241031152704-5fp4n8m","Type":"NodeBlockquote","Properties":{"id":"20241031152704-5fp4n8m","updated":"20241031152704"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241031152705-z6h4erz","Type":"NodeParagraph","Properties":{"id":"20241031152705-z6h4erz","updated":"20241031152705"},"Children":[{"Type":"NodeText","Data":"是不是还有别的方法？例如可以先将tools中的文件制作成动态库，然后再编译demo.cpp？"}]}]},{"ID":"20241031152706-k9afiyi","Type":"NodeParagraph","Properties":{"id":"20241031152706-k9afiyi","updated":"20241031152706"},"Children":[{"Type":"NodeText","Data":"是的，可以将 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"tools"},{"Type":"NodeText","Data":" 目录中的文件编译成动态库，然后再编译 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.cpp"},{"Type":"NodeText","Data":" 并链接到这个动态库。这种方法可以在多个程序之间共享 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.cpp"},{"Type":"NodeText","Data":" 的功能，同时减少重复编译的工作。以下是具体步骤："}]},{"ID":"20241031152707-pr1zv0o","Type":"NodeList","ListData":{"Typ":1,"Tight":true,"Start":1,"Delimiter":46,"Padding":3,"Marker":"MQ==","Num":1},"Properties":{"id":"20241031152707-pr1zv0o","updated":"20241031152707"},"Children":[{"ID":"20241031152708-6av2a2p","Type":"NodeListItem","Data":"1","ListData":{"Typ":1,"Tight":true,"Start":1,"Delimiter":46,"Padding":3,"Marker":"MQ==","Num":1},"Properties":{"id":"20241031152708-6av2a2p","updated":"20241031152708"},"Children":[{"ID":"20241031152709-jd8d2oo","Type":"NodeParagraph","Properties":{"id":"20241031152709-jd8d2oo","updated":"20241031152709"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"编译 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"public.cpp"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":" 为动态库"}]}]}]},{"ID":"20241031152710-38v9fev","Type":"NodeParagraph","Properties":{"id":"20241031152710-38v9fev","updated":"20241031152710"},"Children":[{"Type":"NodeText","Data":"首先，将 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"tools/public.cpp"},{"Type":"NodeText","Data":" 编译成动态库（例如命名为 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"libpublic.so"},{"Type":"NodeText","Data":"）："}]},{"ID":"20241031152711-203djuz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152711-203djuz","updated":"20241031152711"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ -shared -fPIC tools/public.cpp -o libpublic.so\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152712-g4nb4a5","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152712-g4nb4a5","updated":"20241031152712"},"Children":[{"ID":"20241031152713-xprm4ho","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152713-xprm4ho","updated":"20241031152713"},"Children":[{"ID":"20241031152714-zy6hcna","Type":"NodeParagraph","Properties":{"id":"20241031152714-zy6hcna","updated":"20241031152714"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-shared"},{"Type":"NodeText","Data":"：指示编译器生成一个共享库（动态库）。"}]}]},{"ID":"20241031152715-y6nrm9i","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152715-y6nrm9i","updated":"20241031152715"},"Children":[{"ID":"20241031152716-b0pdmr5","Type":"NodeParagraph","Properties":{"id":"20241031152716-b0pdmr5","updated":"20241031152716"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-fPIC"},{"Type":"NodeText","Data":"：生成与位置无关的代码，适用于动态库。"}]}]},{"ID":"20241031152717-f2dsr5y","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152717-f2dsr5y","updated":"20241031152717"},"Children":[{"ID":"20241031152718-3jw2iqq","Type":"NodeParagraph","Properties":{"id":"20241031152718-3jw2iqq","updated":"20241031152718"},"Children":[{"Type":"NodeText","Data":"libpublic.so现在在tools目录下了"}]}]}]},{"ID":"20241031152719-grwf1ra","Type":"NodeList","ListData":{"Typ":1,"Tight":true,"Start":2,"Delimiter":46,"Padding":3,"Marker":"Mg==","Num":2},"Properties":{"id":"20241031152719-grwf1ra","updated":"20241031152719"},"Children":[{"ID":"20241031152720-a3ezrmf","Type":"NodeListItem","Data":"2","ListData":{"Typ":1,"Tight":true,"Start":2,"Delimiter":46,"Padding":3,"Marker":"Mg==","Num":2},"Properties":{"id":"20241031152720-a3ezrmf","updated":"20241031152720"},"Children":[{"ID":"20241031152721-ovrhsqp","Type":"NodeParagraph","Properties":{"id":"20241031152721-ovrhsqp","updated":"20241031152721"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"编译 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong code","TextMarkTextContent":"demo.cpp"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":" 并链接到动态库"}]}]}]},{"ID":"20241031152722-6few1dj","Type":"NodeParagraph","Properties":{"id":"20241031152722-6few1dj","updated":"20241031152722"},"Children":[{"Type":"NodeText","Data":"然后编译 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"app/demo.cpp"},{"Type":"NodeText","Data":"，指定头文件路径，并链接到生成的动态库 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"libpublic.so"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031152723-619r76c","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152723-619r76c","updated":"20241031152723"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"g++ app/demo.cpp -Itools -Ltools -lpublic -o demo\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152724-jgjamsd","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152724-jgjamsd","updated":"20241031152724"},"Children":[{"ID":"20241031152725-h5f6iqs","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152725-h5f6iqs","updated":"20241031152725"},"Children":[{"ID":"20241031152726-ams9i76","Type":"NodeParagraph","Properties":{"id":"20241031152726-ams9i76","updated":"20241031152726"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-Itools"},{"Type":"NodeText","Data":"：指定头文件路径为 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"tools"},{"Type":"NodeText","Data":"。"}]}]},{"ID":"20241031152727-rvm0qop","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152727-rvm0qop","updated":"20241031152727"},"Children":[{"ID":"20241031152728-p4nlg0d","Type":"NodeParagraph","Properties":{"id":"20241031152728-p4nlg0d","updated":"20241031152728"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-Ltools"},{"Type":"NodeText","Data":"：指定库文件的搜索路径为 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"tools"},{"Type":"NodeText","Data":" 目录。"}]}]},{"ID":"20241031152729-1wq487g","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152729-1wq487g","updated":"20241031152729"},"Children":[{"ID":"20241031152730-t1m4v2m","Type":"NodeParagraph","Properties":{"id":"20241031152730-t1m4v2m","updated":"20241031152730"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-lpublic"},{"Type":"NodeText","Data":"：链接 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"tools"},{"Type":"NodeText","Data":" 目录下的 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"libpublic.so"},{"Type":"NodeText","Data":" 动态库。链接名为 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"libpublic.so"},{"Type":"NodeText","Data":" 的动态库，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-l"},{"Type":"NodeText","Data":" 后面的名称是去掉 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"lib"},{"Type":"NodeText","Data":" 前缀和 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":".so"},{"Type":"NodeText","Data":" 后缀的库名。"}]}]}]},{"ID":"20241031152731-ll83cdk","Type":"NodeList","ListData":{"Typ":1,"Tight":true,"Start":3,"Delimiter":46,"Padding":3,"Marker":"Mw==","Num":3},"Properties":{"id":"20241031152731-ll83cdk","updated":"20241031152731"},"Children":[{"ID":"20241031152732-x4szv3c","Type":"NodeListItem","Data":"3","ListData":{"Typ":1,"Tight":true,"Start":3,"Delimiter":46,"Padding":3,"Marker":"Mw==","Num":3},"Properties":{"id":"20241031152732-x4szv3c","updated":"20241031152732"},"Children":[{"ID":"20241031152733-ml0u7sg","Type":"NodeParagraph","Properties":{"id":"20241031152733-ml0u7sg","updated":"20241031152733"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"运行程序"}]}]}]},{"ID":"20241031152734-8dvkdgd","Type":"NodeParagraph","Properties":{"id":"20241031152734-8dvkdgd","updated":"20241031152734"},"Children":[{"Type":"NodeText","Data":"生成的可执行文件 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo"},{"Type":"NodeText","Data":" 在运行时需要找到 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"libpublic.so"},{"Type":"NodeText","Data":" 动态库。如果动态库不在系统的默认路径（如 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"/usr/lib"},{"Type":"NodeText","Data":"）下，需要设置环境变量 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"LD_LIBRARY_PATH"},{"Type":"NodeText","Data":"，让系统知道在哪里查找动态库："}]},{"ID":"20241031152735-yebipkx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152735-yebipkx","updated":"20241031152735"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"export LD_LIBRARY_PATH=tools:$LD_LIBRARY_PATH\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152736-lxu612f","Type":"NodeParagraph","Properties":{"id":"20241031152736-lxu612f","updated":"20241031152736"},"Children":[{"Type":"NodeText","Data":"这样可以在当前目录下找到 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"libpublic.so"},{"Type":"NodeText","Data":"，然后运行 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031152737-eowojul","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152737-eowojul","updated":"20241031152737"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"./demo\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152738-l443igu","Type":"NodeParagraph","Properties":{"id":"20241031152738-l443igu","updated":"20241031152738"},"Children":[{"Type":"NodeText","Data":"通过这种方法，你可以将 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.cpp"},{"Type":"NodeText","Data":" 生成的功能封装到一个动态库中，方便在多个项目中复用。"}]},{"ID":"20241031152739-fd6u9az","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241031152739-fd6u9az","updated":"20241031154104"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"动态库+makefile"}]},{"ID":"20241031152740-cxlfycf","Type":"NodeBlockquote","Properties":{"id":"20241031152740-cxlfycf","updated":"20241031152740"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241031152741-y870cip","Type":"NodeParagraph","Properties":{"id":"20241031152741-y870cip","updated":"20241031152741"},"Children":[{"Type":"NodeText","Data":"使用makefile"}]}]},{"ID":"20241031152742-iy6lyh9","Type":"NodeParagraph","Properties":{"id":"20241031152742-iy6lyh9","updated":"20241031152742"},"Children":[{"Type":"NodeText","Data":"当然可以使用 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Makefile"},{"Type":"NodeText","Data":" 来简化这些操作。使用 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Makefile"},{"Type":"NodeText","Data":" 可以自动化编译、链接、生成动态库的过程，减少重复输入命令的麻烦。下面是一个简单的 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Makefile"},{"Type":"NodeText","Data":" 示例，适用于你的项目结构："}]},{"ID":"20241031152743-geoizro","Type":"NodeParagraph","Properties":{"id":"20241031152743-geoizro","updated":"20241031152743"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"项目结构"}]},{"ID":"20241031152744-pmkvxbh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152744-pmkvxbh","updated":"20241031152744"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"- tools\n  - public.cpp\n  - public.h\n  - libpublic.so  (由public.cpp编译而成)\n- app\n  - demo.cpp\n- Makefile\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152745-thnrxrc","Type":"NodeParagraph","Properties":{"id":"20241031152745-thnrxrc","updated":"20241031152745"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"Makefile 内容"}]},{"ID":"20241031152746-rlyluzk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"bWFrZWZpbGU=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152746-rlyluzk","updated":"20241031152746"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bWFrZWZpbGU=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"# 编译器\nCXX = g++\n\n# 编译选项\nCXXFLAGS = -Itools -fPIC\n\n# 动态库路径\nLIB_DIR = tools\nLIB_NAME = libpublic.so\n\n# 动态库目标文件\nLIB_TARGET = $(LIB_DIR)/$(LIB_NAME)\n\n# 可执行文件\nTARGET = demo\n\n# 源文件和目标文件\nDEMO_SRC = app/demo.cpp\nDEMO_OBJ = app/demo.o\n\n# 动态库的源文件\nPUBLIC_SRC = tools/public.cpp\n\n# 规则：默认生成可执行文件\nall: $(TARGET)\n\n# 规则：生成可执行文件并链接到动态库\n$(TARGET): $(DEMO_OBJ) $(LIB_TARGET)\n\t$(CXX) $(DEMO_OBJ) -L$(LIB_DIR) -lpublic -o $(TARGET)\n\n# 规则：编译 demo.cpp\n$(DEMO_OBJ): $(DEMO_SRC)\n\t$(CXX) $(CXXFLAGS) -c $(DEMO_SRC) -o $(DEMO_OBJ)\n\n# 规则：生成动态库 libpublic.so\n$(LIB_TARGET): $(PUBLIC_SRC)\n\t$(CXX) -shared $(CXXFLAGS) $(PUBLIC_SRC) -o $(LIB_TARGET)\n\n# 规则：清理生成的文件\nclean:\n\trm -f $(TARGET) $(DEMO_OBJ) $(LIB_TARGET)\n\n# 伪目标\n.PHONY: all clean\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152747-alew6fu","Type":"NodeParagraph","Properties":{"id":"20241031152747-alew6fu","updated":"20241031152747"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"解释"}]},{"ID":"20241031152748-c3o1b5v","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152748-c3o1b5v","updated":"20241031152748"},"Children":[{"ID":"20241031152749-x8kq4u5","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152749-x8kq4u5","updated":"20241031152749"},"Children":[{"ID":"20241031152750-rladift","Type":"NodeParagraph","Properties":{"id":"20241031152750-rladift","updated":"20241031152750"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"CXX"},{"Type":"NodeText","Data":"：指定使用的编译器（这里是 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"g++"},{"Type":"NodeText","Data":"）。"}]}]},{"ID":"20241031152751-u62092w","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152751-u62092w","updated":"20241031152751"},"Children":[{"ID":"20241031152752-iq4j30y","Type":"NodeParagraph","Properties":{"id":"20241031152752-iq4j30y","updated":"20241031152752"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"CXXFLAGS"},{"Type":"NodeText","Data":"：指定编译选项，包括头文件路径和生成与位置无关代码的选项 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"-fPIC"},{"Type":"NodeText","Data":"。"}]}]},{"ID":"20241031152753-x18acpz","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152753-x18acpz","updated":"20241031152753"},"Children":[{"ID":"20241031152754-vln8v13","Type":"NodeParagraph","Properties":{"id":"20241031152754-vln8v13","updated":"20241031152754"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"LIB_DIR"},{"Type":"NodeText","Data":"、"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"LIB_NAME"},{"Type":"NodeText","Data":"：定义了动态库所在目录和库名。"}]}]},{"ID":"20241031152755-u4ycv5h","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152755-u4ycv5h","updated":"20241031152755"},"Children":[{"ID":"20241031152756-3e81z3j","Type":"NodeParagraph","Properties":{"id":"20241031152756-3e81z3j","updated":"20241031152756"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"LIB_TARGET"},{"Type":"NodeText","Data":"：表示最终生成的动态库路径。"}]}]},{"ID":"20241031152757-z8smjdd","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152757-z8smjdd","updated":"20241031152757"},"Children":[{"ID":"20241031152758-45hr28q","Type":"NodeParagraph","Properties":{"id":"20241031152758-45hr28q","updated":"20241031152758"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"TARGET"},{"Type":"NodeText","Data":"：最终生成的可执行文件。"}]}]},{"ID":"20241031152759-qzmgfai","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152759-qzmgfai","updated":"20241031152759"},"Children":[{"ID":"20241031152760-gi0tpe8","Type":"NodeParagraph","Properties":{"id":"20241031152760-gi0tpe8","updated":"20241031152760"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"DEMO_SRC"},{"Type":"NodeText","Data":" 和 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"DEMO_OBJ"},{"Type":"NodeText","Data":"：定义了 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"demo.cpp"},{"Type":"NodeText","Data":" 源文件和目标文件。"}]}]},{"ID":"20241031152761-hde3y3a","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152761-hde3y3a","updated":"20241031152761"},"Children":[{"ID":"20241031152762-n0b0jxe","Type":"NodeParagraph","Properties":{"id":"20241031152762-n0b0jxe","updated":"20241031152762"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"PUBLIC_SRC"},{"Type":"NodeText","Data":"：定义了生成动态库的源文件 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"public.cpp"},{"Type":"NodeText","Data":"。"}]}]},{"ID":"20241031152763-e2u06nu","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152763-e2u06nu","updated":"20241031152763"},"Children":[{"ID":"20241031152764-5ds95mi","Type":"NodeParagraph","Properties":{"id":"20241031152764-5ds95mi","updated":"20241031152764"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"all"},{"Type":"NodeText","Data":" 规则：默认执行，依赖于 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"$(TARGET)"},{"Type":"NodeText","Data":"，即最终的可执行文件。"}]}]},{"ID":"20241031152765-gcy2bpi","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152765-gcy2bpi","updated":"20241031152765"},"Children":[{"ID":"20241031152766-t9dkuq0","Type":"NodeParagraph","Properties":{"id":"20241031152766-t9dkuq0","updated":"20241031152766"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"clean"},{"Type":"NodeText","Data":" 规则：用于清理生成的目标文件和可执行文件。"}]}]}]},{"ID":"20241031152767-tjl0ndd","Type":"NodeParagraph","Properties":{"id":"20241031152767-tjl0ndd","updated":"20241031152767"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"使用"}]},{"ID":"20241031152768-80yhenl","Type":"NodeParagraph","Properties":{"id":"20241031152768-80yhenl","updated":"20241031152768"},"Children":[{"Type":"NodeText","Data":"在项目根目录下，直接运行 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"make"},{"Type":"NodeText","Data":" 命令即可生成动态库和可执行文件："}]},{"ID":"20241031152769-72tm6za","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152769-72tm6za","updated":"20241031152769"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"make\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152770-p48ewqj","Type":"NodeParagraph","Properties":{"id":"20241031152770-p48ewqj","updated":"20241031152770"},"Children":[{"Type":"NodeText","Data":"要清理生成的文件，可以使用："}]},{"ID":"20241031152771-l4qct0u","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152771-l4qct0u","updated":"20241031152771"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"make clean\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152772-3yjmyor","Type":"NodeParagraph","Properties":{"id":"20241031152772-3yjmyor","updated":"20241031152772"},"Children":[{"Type":"NodeText","Data":"通过 "},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Makefile"},{"Type":"NodeText","Data":"，你可以简化编译流程，一键生成动态库和可执行文件。"}]},{"ID":"20241031154104-eeam78a","Type":"NodeParagraph","Properties":{"id":"20241031154104-eeam78a","updated":"20241031154104"}}]}