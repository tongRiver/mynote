{"ID":"20241031152900-52zdw44","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241031152900-52zdw44","title":"makefile","type":"doc","updated":"20241031152900"},"Children":[{"ID":"20241031152901-d4h3rvs","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241031152901-d4h3rvs","updated":"20241031152901"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"makefile"}]},{"ID":"20241031152902-dkm8nwl","Type":"NodeBlockquote","Properties":{"id":"20241031152902-dkm8nwl","updated":"20241031152902"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20241031152903-c0q1s5i","Type":"NodeParagraph","Properties":{"id":"20241031152903-c0q1s5i","updated":"20241031152903"},"Children":[{"Type":"NodeText","Data":"视频：【C++网络编程，从0实现Reactor高并发服务器】 https://www.bilibili.com/video/BV11Z4y157RY/?p=6\u0026share_source=copy_web\u0026vd_source=29909144aff7d2c1451e8d294e9a5437"}]}]},{"ID":"20241031152904-k50jf84","Type":"NodeParagraph","Properties":{"id":"20241031152904-k50jf84","updated":"20241031152904"},"Children":[{"Type":"NodeText","Data":"在实际开发中，项目的源代码文件比较多，按类型、功能、模块分别存放在不同的目录和文件中，哪些文件需要先编译，那些文件后编译，那些文件需要重新编译，还有更多更复杂的操作。"}]},{"ID":"20241031152905-pwkih6g","Type":"NodeParagraph","Properties":{"id":"20241031152905-pwkih6g","updated":"20241031152905"},"Children":[{"Type":"NodeText","Data":"make是一个强大的实用工具，用于管理项目的编译和链接。make需要一个编译规则文件makefile，可实现"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"自动化编译"},{"Type":"NodeText","Data":"。"}]},{"ID":"20241031152906-jumgz87","Type":"NodeParagraph","Properties":{"id":"20241031152906-jumgz87","updated":"20241031152906"},"Children":[{"Type":"NodeText","Data":"关于脚本"}]},{"ID":"20241031152907-tym4ugb","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152907-tym4ugb","updated":"20241031152907"},"Children":[{"ID":"20241031152908-ppsknoc","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20241031152908-ppsknoc","updated":"20241031152908"},"Children":[{"ID":"20241031152909-052zytz","Type":"NodeParagraph","Properties":{"id":"20241031152909-052zytz","updated":"20241031152909"},"Children":[{"Type":"NodeText","Data":"使用一个.sh脚本文件也可以自动化编译，但是make的好处在于没有修改的文件不会重新编译（"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"a strong","TextMarkTextContent":"增量编译"},{"Type":"NodeText","Data":"）"}]}]}]},{"ID":"20241031152910-xqy6mhb","Type":"NodeParagraph","Properties":{"id":"20241031152910-xqy6mhb","updated":"20241031152910"},"Children":[{"Type":"NodeText","Data":"首先展示文件结构："}]},{"ID":"20241031152911-e4214i3","Type":"NodeHTMLBlock","Data":"\u003cdiv\u003e\n\u003cimg src=\"assets/image-20240904165123144.png\" alt=\"image-20240904165123144\" style=\"zoom: 33%;\" /\u003e\n\u003c/div\u003e","HtmlBlockType":7,"Properties":{"id":"20241031152911-e4214i3","updated":"20241031152911"}},{"ID":"20241031152912-3fcik1s","Type":"NodeParagraph","Properties":{"id":"20241031152912-3fcik1s","updated":"20241031152912"},"Children":[{"Type":"NodeText","Data":"各个文件："}]},{"ID":"20241031152913-dz15bdd","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152913-dz15bdd","updated":"20241031152913"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"tools/public.h"}]},{"ID":"20241031152914-5giv8r5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Yysr","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152914-5giv8r5","updated":"20241031152914"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"#include \u003ciostream\u003e\n// 声明一个通用的函数。\nvoid func();\n// 声明一个通用的类。\nclass AA\n{\npublic:\n  void show();\n};\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152915-w5e61co","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152915-w5e61co","updated":"20241031152915"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"tools/public.cpp"}]},{"ID":"20241031152916-7u1k1es","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Yysr","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152916-7u1k1es","updated":"20241031152916"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"#include \"public.h\"\nusing namespace std;\n// 通用函数的代码实现。\nvoid func()\n{\n  cout \u003c\u003c \"升级了调用了func()函数。\\n\";\n}\n// 通用类的代码实现。\nvoid AA::show()\n{\n  cout \u003c\u003c \"升级了我是一只傻傻鸟。\\n\";\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152917-hjq1u0b","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152917-hjq1u0b","updated":"20241031152917"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"tools/makefile🚩"}]},{"ID":"20241031152918-i863qzj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"bWFrZWZpbGU=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152918-i863qzj","updated":"20241031152918"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bWFrZWZpbGU=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"# 指定编译的目标文件是libpublic.a和libpublic.so\nall:libpublic.a \\\n    libpublic.so\n\n# 编译libpublic.a需要依赖public.h和public.cpp\n# 如果被依赖文件内容发生了变化，将重新编译libpublic.a\nlibpublic.a:public.h public.cpp\n        g++ -c -o libpublic.a public.cpp\n\nlibpublic.so:public.h public.cpp\n        g++ -fPIC -shared -o libpublic.so public.cpp\n\n# clean用于清理编译目标文件，仅在make clean才会执行。\nclean:\n        rm -f libpublic.a libpublic.so\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152919-4vlgj96","Type":"NodeParagraph","Properties":{"id":"20241031152919-4vlgj96","updated":"20241031152919"},"Children":[{"Type":"NodeText","Data":"注意一定要用"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"tab"},{"Type":"NodeText","Data":"，不能敲空格"}]},{"ID":"20241031152920-40pm4vy","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152920-40pm4vy","updated":"20241031152920"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"api/myapi.h"}]},{"ID":"20241031152921-gxuudt9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Yysr","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152921-gxuudt9","updated":"20241031152921"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"#include \u003ciostream\u003e\n// 声明一个通用的函数。\nvoid func1();\n// 声明一个通用的类。\nclass BB\n{\npublic:\n  void show();\n};\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152922-yw4v497","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152922-yw4v497","updated":"20241031152922"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"api/myapi.cpp"}]},{"ID":"20241031152923-q500ye8","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Yysr","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152923-q500ye8","updated":"20241031152923"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"#include \"myapi.h\"\nusing namespace std;\n// 通用函数的代码实现。\nvoid func1()\n{\n  cout \u003c\u003c \"调用了func1()函数。\\n\";\n}\n// 通用类的代码实现。\nvoid BB::show()\n{\n  cout \u003c\u003c \"你是一只傻傻鸟。\\n\";\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152924-hth7ugj","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152924-hth7ugj","updated":"20241031152924"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"api/makefile🚩"}]},{"ID":"20241031152925-uonfzjg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"bWFrZWZpbGU=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152925-uonfzjg","updated":"20241031152925"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bWFrZWZpbGU=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"# 指定编译的目标文件是libmyapi.a和libmyapi.so\nall:libmyapi.a libmyapi.so\n\n# 编译libmyapi.a需要依赖myapi.h和myapi.cpp\n# 如果被依赖文件内容发生了变化，将重新编译libmyapi.a\nlibmyapi.a:myapi.h myapi.cpp\n        g++ -c -o libmyapi.a myapi.cpp\n\nlibmyapi.so:myapi.h myapi.cpp\n        g++ -fPIC -shared -o libmyapi.so myapi.cpp\n\n# clean用于清理编译目标文件，仅在make clean才会执行。\nclean:\n        rm -f libmyapi.a libmyapi.so\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152926-9yp2lof","Type":"NodeParagraph","Properties":{"id":"20241031152926-9yp2lof","updated":"20241031152926"},"Children":[{"Type":"NodeText","Data":"制作动态库：记得把api的目录加入环境变量"}]},{"ID":"20241031152927-awgu4a2","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152927-awgu4a2","updated":"20241031152927"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"app/demo01.cpp"}]},{"ID":"20241031152928-ut91fm3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"Yysr","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152928-ut91fm3","updated":"20241031152928"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yysr","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"#include \"public.h\"  // 包含通用函数和类的头文件。\n#include \"myapi.h\"     // 包含另一个通用函数和类的头文件。\nusing namespace std;\nint main() {\n  func();    // 调用通用的函数。\n  func1();   // 调用另一个通用的函数。\n\n  AA a;      // 用通用类声明对象。\n  a.show();  // 调用对象的方法。\n  BB b;      // 用另一个通用类声明对象。\n  b.show();  // 调用对象的方法。\n}\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152929-3zgjgmf","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031152929-3zgjgmf","updated":"20241031152929"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"app/makefile🚩"}]},{"ID":"20241031152930-8f7weov","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"bWFrZWZpbGU=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241031152930-8f7weov","updated":"20241031152930"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"bWFrZWZpbGU=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"INCLUDEDIR=-I/home/wucz/tools -I/home/wucz/api\nLIBDIR=-L/home/wucz/tools -L/home/wucz/api\n\nall:demo01 demo02 demo03\n\ndemo01:demo01.cpp\n\tg++ -o demo01 demo01.cpp $(INCLUDEDIR) $(LIBDIR) -lpublic -lmyapi\n\tcp demo01 /tmp/.\n\ndemo02:demo02.cpp\n\tg++ -o demo02 demo02.cpp $(INCLUDEDIR) $(LIBDIR) -lpublic -lmyapi\n\ndemo03:demo03.cpp\n\tg++ -o demo03 demo03.cpp $(INCLUDEDIR) $(LIBDIR) -lpublic -lmyapi\n\nclean:\n\trm -f demo01 demo02 demo03\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241031152931-ua2z9u0","Type":"NodeParagraph","Properties":{"id":"20241031152931-ua2z9u0","updated":"20241031152931"},"Children":[{"Type":"NodeText","Data":"原本的编译指令："}]},{"ID":"20241031152932-p4jwxpl","Type":"NodeParagraph","Properties":{"id":"20241031152932-p4jwxpl","updated":"20241031152932"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20240904170242349","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/image-20240904170242349-20241031152933-e14qr8q.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]}]}