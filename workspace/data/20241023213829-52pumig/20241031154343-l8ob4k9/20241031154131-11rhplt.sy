{"ID":"20241031154131-11rhplt","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241031154131-11rhplt","title":"大小端与网络字节序","type":"doc","updated":"20241031154132"},"Children":[{"ID":"20241031154132-3qh1szi","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241031154132-3qh1szi","updated":"20241031154132"},"Children":[{"Type":"NodeText","Data":"大端 小端"}]},{"ID":"20241031154133-hrxra1o","Type":"NodeParagraph","Properties":{"id":"20241031154133-hrxra1o","updated":"20241031154133"},"Children":[{"Type":"NodeText","Data":"大端（Big-endian）和小端（Little-endian）是用来描述多字节数据在计算机内存中存储顺序的两种不同方式。"}]},{"ID":"20241031154134-s674oed","Type":"NodeList","ListData":{},"Properties":{"id":"20241031154134-s674oed","updated":"20241031154134"},"Children":[{"ID":"20241031154135-kwh9184","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154135-kwh9184","updated":"20241031154135"},"Children":[{"ID":"20241031154136-l76rw38","Type":"NodeParagraph","Properties":{"id":"20241031154136-l76rw38","updated":"20241031154136"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"大端（Big-endian）"},{"Type":"NodeText","Data":"：高位字节存储在内存的低地址处，低位字节存储在高地址处。换句话说，数据的最高有效字节（Most Significant Byte, MSB）排在内存的最前面（低地址），最低有效字节（Least Significant Byte, LSB）排在最后（高地址）。"}]},{"ID":"20241031154137-9aefutp","Type":"NodeParagraph","Properties":{"id":"20241031154137-9aefutp","updated":"20241031154137"},"Children":[{"Type":"NodeText","Data":"举个例子，假设有一个 32 位的整数 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"0x12345678"},{"Type":"NodeText","Data":"​，在大端序中会被存储为："}]},{"ID":"20241031154138-51anq03","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241031154138-51anq03","updated":"20241031154138"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"地址    内容\n0x00    12\n0x01    34\n0x02    56\n0x03    78\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241031154139-pj8qssj","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154139-pj8qssj","updated":"20241031154139"},"Children":[{"ID":"20241031154140-rdwm32v","Type":"NodeParagraph","Properties":{"id":"20241031154140-rdwm32v","updated":"20241031154140"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"小端（Little-endian）"},{"Type":"NodeText","Data":"：低位字节存储在内存的低地址处，高位字节存储在高地址处。也就是说，最低有效字节排在前面（低地址），最高有效字节排在最后（高地址）。"}]},{"ID":"20241031154141-nvq3ydo","Type":"NodeParagraph","Properties":{"id":"20241031154141-nvq3ydo","updated":"20241031154141"},"Children":[{"Type":"NodeText","Data":"同样的例子，在小端序中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"0x12345678"},{"Type":"NodeText","Data":"​ 会被存储为："}]},{"ID":"20241031154142-y5wwgyj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241031154142-y5wwgyj","updated":"20241031154142"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"地址    内容\n0x00    78\n0x01    56\n0x02    34\n0x03    12\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241031154143-ntovzpa","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031154143-ntovzpa","updated":"20241031154143"},"Children":[{"Type":"NodeText","Data":"区别与影响："}]},{"ID":"20241031154144-bjkgfc6","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241031154144-bjkgfc6","updated":"20241031154144"},"Children":[{"ID":"20241031154145-vqyridq","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241031154145-vqyridq","updated":"20241031154145"},"Children":[{"ID":"20241031154146-w3h2lj9","Type":"NodeParagraph","Properties":{"id":"20241031154146-w3h2lj9","updated":"20241031154146"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"处理器架构"},{"Type":"NodeText","Data":"：不同的处理器架构使用不同的字节序。例如，x86 和 x86-64 架构采用小端序，而某些网络协议和一些大端架构（如早期的 IBM 和 Motorola 处理器）使用大端序。"}]}]},{"ID":"20241031154147-zhtwwdt","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241031154147-zhtwwdt","updated":"20241031154147"},"Children":[{"ID":"20241031154148-u17blqq","Type":"NodeParagraph","Properties":{"id":"20241031154148-u17blqq","updated":"20241031154148"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"网络传输"},{"Type":"NodeText","Data":"：网络中一般使用大端序，称为“网络字节序”，这使得数据在不同平台上传输时可以保证一致性。传输时通常需要在发送和接收数据时进行字节序的转换。"}]}]},{"ID":"20241031154149-zjs44cq","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241031154149-zjs44cq","updated":"20241031154149"},"Children":[{"ID":"20241031154150-va22rbj","Type":"NodeParagraph","Properties":{"id":"20241031154150-va22rbj","updated":"20241031154150"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"跨平台编程"},{"Type":"NodeText","Data":"：在跨平台编程中，尤其是涉及到文件、网络数据交换时，字节序需要被正确处理，以确保数据的一致性。"}]}]}]},{"ID":"20241031154151-eec9tu7","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031154151-eec9tu7","updated":"20241031154151"},"Children":[{"Type":"NodeText","Data":"大端和小端的选择："}]},{"ID":"20241031154152-kknhckp","Type":"NodeParagraph","Properties":{"id":"20241031154152-kknhckp","updated":"20241031154152"},"Children":[{"Type":"NodeText","Data":"大端序和小端序各有其优势，选择哪种序方式主要取决于硬件架构的设计理念以及应用场景。在大多数情况下，程序员不需要直接处理字节序的问题，除非是在网络通信、文件存储或需要在不同字节序系统之间交换数据时。"}]},{"ID":"20241031154153-06q8968","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241031154153-06q8968","updated":"20241031154153"},"Children":[{"Type":"NodeText","Data":"网络字节序"}]},{"ID":"20241031154154-tmso0gj","Type":"NodeParagraph","Properties":{"id":"20241031154154-tmso0gj","updated":"20241031154154"},"Children":[{"Type":"NodeText","Data":"是的，在网络通信中，由于不同计算机系统可能采用不同的字节序，因此在数据传输时，字节序的差异需要特别注意。这时就引入了"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"网络字节序"},{"Type":"NodeText","Data":"的概念。为了保证跨平台的数据一致性，网络通信一般使用"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"大端序（Big-endian）"},{"Type":"NodeText","Data":"，因为在网络通信的早期阶段，许多网络协议（如 IP、TCP、UDP）都是在大端架构上设计的。"}]},{"ID":"20241031154155-uqze05s","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031154155-uqze05s","updated":"20241031154155"},"Children":[{"Type":"NodeText","Data":"详细解释网络通信中的大端小端问题"}]},{"ID":"20241031154156-47g1gdu","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241031154156-47g1gdu","updated":"20241031154156"},"Children":[{"ID":"20241031154157-ic73gh9","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241031154157-ic73gh9","updated":"20241031154157"},"Children":[{"ID":"20241031154158-ths3rv3","Type":"NodeParagraph","Properties":{"id":"20241031154158-ths3rv3","updated":"20241031154158"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"网络字节序的定义"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031154159-lqeklrz","Type":"NodeList","ListData":{},"Properties":{"id":"20241031154159-lqeklrz","updated":"20241031154159"},"Children":[{"ID":"20241031154160-7zdcjhm","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154160-7zdcjhm","updated":"20241031154160"},"Children":[{"ID":"20241031154161-a3jpjbo","Type":"NodeParagraph","Properties":{"id":"20241031154161-a3jpjbo","updated":"20241031154161"},"Children":[{"Type":"NodeText","Data":"网络字节序是指数据在网络上传输时所采用的统一字节序。绝大多数网络协议（如 TCP/IP 协议）都规定使用大端序来进行数据传输，这样可以确保不同架构的计算机之间能够正确解读收到的数据。"}]}]}]}]},{"ID":"20241031154162-gg99uvw","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241031154162-gg99uvw","updated":"20241031154162"},"Children":[{"ID":"20241031154163-1egtz1t","Type":"NodeParagraph","Properties":{"id":"20241031154163-1egtz1t","updated":"20241031154163"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"为什么选择大端序"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031154164-cc8j3tn","Type":"NodeList","ListData":{},"Properties":{"id":"20241031154164-cc8j3tn","updated":"20241031154164"},"Children":[{"ID":"20241031154165-ly7nyq3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154165-ly7nyq3","updated":"20241031154165"},"Children":[{"ID":"20241031154166-k1id6ln","Type":"NodeParagraph","Properties":{"id":"20241031154166-k1id6ln","updated":"20241031154166"},"Children":[{"Type":"NodeText","Data":"大端序的选择主要是为了统一规范。由于许多早期网络协议是在大端架构的机器上设计的，因此为了兼容，不管发送端的计算机使用什么字节序，数据在网络上传输时统一转换为大端序。"}]}]}]}]},{"ID":"20241031154167-2q64v0o","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241031154167-2q64v0o","updated":"20241031154167"},"Children":[{"ID":"20241031154168-zqr7jip","Type":"NodeParagraph","Properties":{"id":"20241031154168-zqr7jip","updated":"20241031154168"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"主机字节序 vs. 网络字节序"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031154169-vtxrbel","Type":"NodeList","ListData":{},"Properties":{"id":"20241031154169-vtxrbel","updated":"20241031154169"},"Children":[{"ID":"20241031154170-ba0kofh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154170-ba0kofh","updated":"20241031154170"},"Children":[{"ID":"20241031154171-ehe3u3i","Type":"NodeParagraph","Properties":{"id":"20241031154171-ehe3u3i","updated":"20241031154171"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"主机字节序"},{"Type":"NodeText","Data":"是指计算机在处理数据时使用的字节序，可能是大端也可能是小端，取决于具体的 CPU 架构。比如："}]},{"ID":"20241031154172-vlyvuep","Type":"NodeList","ListData":{},"Properties":{"id":"20241031154172-vlyvuep","updated":"20241031154172"},"Children":[{"ID":"20241031154173-y0gn0iu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154173-y0gn0iu","updated":"20241031154173"},"Children":[{"ID":"20241031154174-01xfl2f","Type":"NodeParagraph","Properties":{"id":"20241031154174-01xfl2f","updated":"20241031154174"},"Children":[{"Type":"NodeText","Data":"Intel x86 和 x86-64 架构采用小端序。"}]}]},{"ID":"20241031154175-lwbw47i","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154175-lwbw47i","updated":"20241031154175"},"Children":[{"ID":"20241031154176-8ref6no","Type":"NodeParagraph","Properties":{"id":"20241031154176-8ref6no","updated":"20241031154176"},"Children":[{"Type":"NodeText","Data":"PowerPC、SPARC 等架构有时采用大端序。"}]}]}]}]},{"ID":"20241031154177-p8m9jwi","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154177-p8m9jwi","updated":"20241031154177"},"Children":[{"ID":"20241031154178-7r6okxh","Type":"NodeParagraph","Properties":{"id":"20241031154178-7r6okxh","updated":"20241031154178"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"网络字节序"},{"Type":"NodeText","Data":"则规定为大端序。为了保证在不同字节序的系统之间进行正确的数据传输，发送数据之前，必须将主机字节序转换为网络字节序，而在接收时则需要将网络字节序转换为主机字节序。"}]}]}]}]},{"ID":"20241031154179-2w9zq2a","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241031154179-2w9zq2a","updated":"20241031154179"},"Children":[{"ID":"20241031154180-roct041","Type":"NodeParagraph","Properties":{"id":"20241031154180-roct041","updated":"20241031154180"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"网络通信中的字节序转换"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031154181-jwj06qs","Type":"NodeList","ListData":{},"Properties":{"id":"20241031154181-jwj06qs","updated":"20241031154181"},"Children":[{"ID":"20241031154182-micc5t1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154182-micc5t1","updated":"20241031154182"},"Children":[{"ID":"20241031154183-zm6ejjy","Type":"NodeParagraph","Properties":{"id":"20241031154183-zm6ejjy","updated":"20241031154183"},"Children":[{"Type":"NodeText","Data":"在网络编程中，转换字节序通常使用特定的函数，这些函数能够在不同平台上将主机字节序与网络字节序进行转换。例如，在 C 语言中，有如下常用的函数："}]},{"ID":"20241031154184-2khjggv","Type":"NodeList","ListData":{},"Properties":{"id":"20241031154184-2khjggv","updated":"20241031154184"},"Children":[{"ID":"20241031154185-9hch36b","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154185-9hch36b","updated":"20241031154185"},"Children":[{"ID":"20241031154186-2bygkcs","Type":"NodeParagraph","Properties":{"id":"20241031154186-2bygkcs","updated":"20241031154186"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"htons()"},{"Type":"NodeText","Data":"​（Host to Network Short）：将主机字节序的 16 位短整型数转换为网络字节序。"}]}]},{"ID":"20241031154187-qz128t4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154187-qz128t4","updated":"20241031154187"},"Children":[{"ID":"20241031154188-cagyyhc","Type":"NodeParagraph","Properties":{"id":"20241031154188-cagyyhc","updated":"20241031154188"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"htonl()"},{"Type":"NodeText","Data":"​（Host to Network Long）：将主机字节序的 32 位长整型数转换为网络字节序。"}]}]},{"ID":"20241031154189-ten415g","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154189-ten415g","updated":"20241031154189"},"Children":[{"ID":"20241031154190-vd313at","Type":"NodeParagraph","Properties":{"id":"20241031154190-vd313at","updated":"20241031154190"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ntohs()"},{"Type":"NodeText","Data":"​（Network to Host Short）：将网络字节序的 16 位短整型数转换为主机字节序。"}]}]},{"ID":"20241031154191-l2tbjm1","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154191-l2tbjm1","updated":"20241031154191"},"Children":[{"ID":"20241031154192-g70yt6y","Type":"NodeParagraph","Properties":{"id":"20241031154192-g70yt6y","updated":"20241031154192"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ntohl()"},{"Type":"NodeText","Data":"​（Network to Host Long）：将网络字节序的 32 位长整型数转换为主机字节序。"}]}]}]},{"ID":"20241031154193-ytcsbuq","Type":"NodeParagraph","Properties":{"id":"20241031154193-ytcsbuq","updated":"20241031154193"},"Children":[{"Type":"NodeText","Data":"这些函数确保在发送数据前，所有需要传输的多字节数据（如 IP 地址、端口号、数据长度等）被正确地转换为网络字节序。"}]}]}]}]},{"ID":"20241031154194-k6w2xoc","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20241031154194-k6w2xoc","updated":"20241031154194"},"Children":[{"ID":"20241031154195-qke3sd4","Type":"NodeParagraph","Properties":{"id":"20241031154195-qke3sd4","updated":"20241031154195"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"举例说明：TCP/IP 传输中的字节序转换"},{"Type":"NodeText","Data":"：\n假设有一台小端序机器和一台大端序机器，它们通过 TCP/IP 协议进行通信："}]},{"ID":"20241031154196-8bhbi9s","Type":"NodeList","ListData":{},"Properties":{"id":"20241031154196-8bhbi9s","updated":"20241031154196"},"Children":[{"ID":"20241031154197-rcqbk16","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154197-rcqbk16","updated":"20241031154197"},"Children":[{"ID":"20241031154198-5uae2u1","Type":"NodeParagraph","Properties":{"id":"20241031154198-5uae2u1","updated":"20241031154198"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"发送数据"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031154199-u75sulu","Type":"NodeList","ListData":{},"Properties":{"id":"20241031154199-u75sulu","updated":"20241031154199"},"Children":[{"ID":"20241031154200-ty7ao83","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154200-ty7ao83","updated":"20241031154200"},"Children":[{"ID":"20241031154201-p23h66f","Type":"NodeParagraph","Properties":{"id":"20241031154201-p23h66f","updated":"20241031154201"},"Children":[{"Type":"NodeText","Data":"小端序机器要发送一个 16 位端口号给大端序机器。为了保证大端序机器能够正确解析该端口号，小端序机器在发送数据之前，需要调用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"htons()"},{"Type":"NodeText","Data":"​ 函数将 16 位端口号从主机字节序（小端序）转换为网络字节序（大端序）。然后再将转换后的数据发送到网络上。"}]}]}]}]},{"ID":"20241031154202-u4xjaeh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154202-u4xjaeh","updated":"20241031154202"},"Children":[{"ID":"20241031154203-z5rmu5e","Type":"NodeParagraph","Properties":{"id":"20241031154203-z5rmu5e","updated":"20241031154203"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"接收数据"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031154204-rs4vgju","Type":"NodeList","ListData":{},"Properties":{"id":"20241031154204-rs4vgju","updated":"20241031154204"},"Children":[{"ID":"20241031154205-nec1ym0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154205-nec1ym0","updated":"20241031154205"},"Children":[{"ID":"20241031154206-n0queff","Type":"NodeParagraph","Properties":{"id":"20241031154206-n0queff","updated":"20241031154206"},"Children":[{"Type":"NodeText","Data":"大端序机器接收到数据后，默认假设数据是大端序的（因为网络规定使用大端序），因此可以直接解析。如果大端序机器接收到的是一个小端序的系统传输的数据，它也能通过该约定直接读取正确的数值。"}]}]},{"ID":"20241031154207-jop5bbg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154207-jop5bbg","updated":"20241031154207"},"Children":[{"ID":"20241031154208-ztaqygk","Type":"NodeParagraph","Properties":{"id":"20241031154208-ztaqygk","updated":"20241031154208"},"Children":[{"Type":"NodeText","Data":"反之，如果大端序机器发送数据给小端序机器，小端序机器接收后要调用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ntohs()"},{"Type":"NodeText","Data":"​ 函数将网络字节序（大端序）转换为其主机字节序（小端序），以便正确解读收到的内容。"}]}]}]}]}]}]},{"ID":"20241031154209-iy04qeh","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20241031154209-iy04qeh","updated":"20241031154209"},"Children":[{"ID":"20241031154210-r6paf56","Type":"NodeParagraph","Properties":{"id":"20241031154210-r6paf56","updated":"20241031154210"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"常见字节序转换场景"},{"Type":"NodeText","Data":"："}]},{"ID":"20241031154211-trn9ckf","Type":"NodeList","ListData":{},"Properties":{"id":"20241031154211-trn9ckf","updated":"20241031154211"},"Children":[{"ID":"20241031154212-hwewk1d","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154212-hwewk1d","updated":"20241031154212"},"Children":[{"ID":"20241031154213-ieuobst","Type":"NodeParagraph","Properties":{"id":"20241031154213-ieuobst","updated":"20241031154213"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"IP 地址"},{"Type":"NodeText","Data":"：IP 地址在发送前需要进行字节序转换，虽然在现代编程环境中很多库自动处理了 IP 地址的转换，但在早期网络编程中，开发者需要自己明确调用转换函数。"}]}]},{"ID":"20241031154214-zz6ctma","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241031154214-zz6ctma","updated":"20241031154214"},"Children":[{"ID":"20241031154215-c1hrraj","Type":"NodeParagraph","Properties":{"id":"20241031154215-c1hrraj","updated":"20241031154215"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"端口号"},{"Type":"NodeText","Data":"：例如 TCP/UDP 的端口号字段，通常是 16 位无符号整数，在传输前同样需要转换成大端序。"}]}]}]}]}]},{"ID":"20241031154216-52ta3ij","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031154216-52ta3ij","updated":"20241031154216"},"Children":[{"Type":"NodeText","Data":"示例代码："}]},{"ID":"20241031154217-c80t14p","Type":"NodeParagraph","Properties":{"id":"20241031154217-c80t14p","updated":"20241031154217"},"Children":[{"Type":"NodeText","Data":"以下是一个简单的 C 语言示例，展示了如何在网络编程中进行字节序转换："}]},{"ID":"20241031154218-k3pbav6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241031154218-k3pbav6","updated":"20241031154218"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"Yw=="},{"Type":"NodeCodeBlockCode","Data":"#include \u003cstdio.h\u003e\n#include \u003carpa/inet.h\u003e\n\nint main() {\n    unsigned short host_port = 8080;\n    unsigned short net_port;\n\n    // 主机字节序转换为网络字节序\n    net_port = htons(host_port);\n    printf(\"Host byte order port: %d, Network byte order port: %d\\n\", host_port, net_port);\n\n    // 网络字节序转换回主机字节序\n    unsigned short host_port_back = ntohs(net_port);\n    printf(\"Converted back to Host byte order port: %d\\n\", host_port_back);\n\n    return 0;\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031154219-evbi9rj","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031154219-evbi9rj","updated":"20241031154219"},"Children":[{"Type":"NodeText","Data":"输出结果："}]},{"ID":"20241031154220-7uk7lo4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241031154220-7uk7lo4","updated":"20241031154220"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker"},{"Type":"NodeCodeBlockCode","Data":"Host byte order port: 8080, Network byte order port: 17920\nConverted back to Host byte order port: 8080\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241031154221-jt7x933","Type":"NodeParagraph","Properties":{"id":"20241031154221-jt7x933","updated":"20241031154221"},"Children":[{"Type":"NodeText","Data":"这里我们可以看到，主机字节序的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"8080"},{"Type":"NodeText","Data":"​ 在转换为网络字节序后变成了 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"17920"},{"Type":"NodeText","Data":"​（即 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"0x1F90"},{"Type":"NodeText","Data":"​），这正是 8080 的大端形式。"}]},{"ID":"20241031154222-nlxtdaw","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241031154222-nlxtdaw","updated":"20241031154222"},"Children":[{"Type":"NodeText","Data":"总结："}]},{"ID":"20241031154223-e14cegc","Type":"NodeParagraph","Properties":{"id":"20241031154223-e14cegc","updated":"20241031154223"},"Children":[{"Type":"NodeText","Data":"在网络通信中，必须考虑大端序和小端序的差异，尤其是当不同系统和架构之间交换数据时。通过使用特定的字节序转换函数，可以确保数据在发送时转换为网络字节序，在接收时转换为主机字节序，从而保证跨平台的数据一致性。"}]},{"ID":"20241031154331-uluzcr8","Type":"NodeParagraph","Properties":{"id":"20241031154331-uluzcr8","updated":"20241031154331"}}]}