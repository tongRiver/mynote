{"ID":"20241030234239-w2254jq","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241030234239-w2254jq","title":"Docker部署-Java应用","type":"doc","updated":"20241031143229"},"Children":[{"ID":"20241030234240-cc9pcrj","Type":"NodeParagraph","Properties":{"id":"20241030234240-cc9pcrj","updated":"20241030234240"},"Children":[{"Type":"NodeText","Data":"在配置文件中设置数据库的地址，自己的端口："}]},{"ID":"20241030234241-doeev9h","Type":"NodeParagraph","Properties":{"id":"20241030234241-doeev9h","updated":"20241031143229"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image-20231223174610570"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20231223174610570-20241030234259-wqjwia5.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241030234242-vtg11wr","Type":"NodeParagraph","Properties":{"id":"20241030234242-vtg11wr","updated":"20241030234242"},"Children":[{"Type":"NodeText","Data":"将应用打包"}]},{"ID":"20241030234243-7pwzs0o","Type":"NodeParagraph","Properties":{"id":"20241030234243-7pwzs0o","updated":"20241030234243"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20231223174636797","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/image-20231223174636797-20241030234259-so0yie7.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241030234244-1landdt","Type":"NodeParagraph","Properties":{"id":"20241030234244-1landdt","updated":"20241030234244"},"Children":[{"Type":"NodeText","Data":"编写Dockerfile，注意就叫这个名字，没有后缀："}]},{"ID":"20241030234245-aw2v4wb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"ZG9ja2VyZmlsZQ==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241030234245-aw2v4wb","updated":"20241030234245"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"ZG9ja2VyZmlsZQ==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"# 基础镜像（这个版本一定要一致）\nFROM openjdk:8-jre-buster\n# 设定时区\nENV TZ=Asia/Shanghai\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \u0026\u0026 echo $TZ \u003e /etc/timezone\n# 拷贝jar包（注意改名字）\nCOPY zhiyuan-activity-0.0.1-SNAPSHOT.jar /app.jar\n# 入口\nENTRYPOINT [\"java\", \"-jar\", \"/app.jar\"]\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241030234246-ojk2p45","Type":"NodeParagraph","Properties":{"id":"20241030234246-ojk2p45","updated":"20241030234246"},"Children":[{"Type":"NodeText","Data":"他两必须在同一目录下，同时下面的创建容器命令也要在这个目录下执行，因为有"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"."},{"Type":"NodeText","Data":"表示当前目录"}]},{"ID":"20241030234247-2p3dzx5","Type":"NodeParagraph","Properties":{"id":"20241030234247-2p3dzx5","updated":"20241030234247"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"image-20231223175127252","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/image-20231223175127252-20241030234259-v885n9i.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20241030234248-1yxf26e","Type":"NodeParagraph","Properties":{"id":"20241030234248-1yxf26e","updated":"20241030234248"},"Children":[{"Type":"NodeText","Data":"先构建镜像："}]},{"ID":"20241030234249-z1dbrd2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241030234249-z1dbrd2","updated":"20241030234249"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"docker build -t zhiyuan8 .\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241030234250-7fhrtqk","Type":"NodeParagraph","Properties":{"id":"20241030234250-7fhrtqk","updated":"20241030234250"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"zhiyuan8"},{"Type":"NodeText","Data":"是镜像的名字"}]},{"ID":"20241030234251-vs6nqp7","Type":"NodeParagraph","Properties":{"id":"20241030234251-vs6nqp7","updated":"20241030234251"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"."},{"Type":"NodeText","Data":"表示在当前目录构建镜像，所以要把Dockerfile和jar包放到一个目录下"}]},{"ID":"20241030234252-sdos9h3","Type":"NodeParagraph","Properties":{"id":"20241030234252-sdos9h3","updated":"20241030234252"},"Children":[{"Type":"NodeText","Data":"根据镜像创建容器："}]},{"ID":"20241030234253-e1t0ei2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241030234253-e1t0ei2","updated":"20241030234253"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"docker run -d --name zyjava8 -p 8080:8080 zhiyuan8\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241030234254-n839tdn","Type":"NodeParagraph","Properties":{"id":"20241030234254-n839tdn","updated":"20241030234254"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"zyjava8"},{"Type":"NodeText","Data":"是容器名"}]},{"ID":"20241030234255-c41zx02","Type":"NodeParagraph","Properties":{"id":"20241030234255-c41zx02","updated":"20241030234255"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"zhiyuan8"},{"Type":"NodeText","Data":"是镜像名"}]},{"ID":"20241030234256-b921cd4","Type":"NodeParagraph","Properties":{"id":"20241030234256-b921cd4","updated":"20241030234256"},"Children":[{"Type":"NodeText","Data":"容器就创建成功了，不出意外的话就可以访问接口了"}]},{"ID":"20241030234257-yt27t92","Type":"NodeParagraph","Properties":{"id":"20241030234257-yt27t92","updated":"20241030234257"},"Children":[{"Type":"NodeText","Data":"查看运行日志："}]},{"ID":"20241030234258-bzg5m1p","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"YmFzaA==","CodeBlockCloseFence":"YGBg","Properties":{"id":"20241030234258-bzg5m1p","updated":"20241030234258"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA==","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"docker logs -f zyjava\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20241030234323-ogsmw2a","Type":"NodeParagraph","Properties":{"id":"20241030234323-ogsmw2a","updated":"20241030234323"}},{"ID":"20241030234329-ipes9ju","Type":"NodeParagraph","Properties":{"id":"20241030234329-ipes9ju","style":"color: var(--b3-card-warning-color);background-color: var(--b3-card-warning-background);","updated":"20241030234432"},"Children":[{"Type":"NodeText","Data":"下次别把ip地址写死，如果都是在一台服务器上模拟分布式的话，可以写localhost，这样迁移的时候，所有的容器一起放到新机器上还是可以直接访问。"}]},{"ID":"20241030234437-qnj2m0j","Type":"NodeParagraph","Properties":{"id":"20241030234437-qnj2m0j","updated":"20241030234437"}}]}