{"ID":"20241024233615-2toq17v","Spec":"1","Type":"NodeDocument","Properties":{"custom-sy-readonly":"false","id":"20241024233615-2toq17v","title":"Docker迁移MySQL、Nginx","type":"doc","updated":"20241102174622"},"Children":[{"ID":"20241024233655-dn5r1wm","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241024233655-dn5r1wm","updated":"20241030181553"},"Children":[{"Type":"NodeText","Data":"迁移MySQL（理论部分）"}]},{"ID":"20241024233655-2f8rofo","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241024233655-2f8rofo","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"方式一：docker export"}]},{"ID":"20241025163630-slqo75v","Type":"NodeParagraph","Properties":{"id":"20241025163630-slqo75v","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"如果你想在目标主机上使用和源主机一样的MySQL容器配置，可以通过以下步骤来实现："}]},{"ID":"20241025163630-9va6php","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241025163630-9va6php","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"步骤1: 在源主机上暂停MySQL容器"}]},{"ID":"20241025163630-gaajx68","Type":"NodeParagraph","Properties":{"id":"20241025163630-gaajx68","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"首先，在源主机上暂停MySQL容器，这样可以确保数据的一致性，并保留容器的完整配置。"}]},{"ID":"20241025163630-vo8jq8r","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241025163630-vo8jq8r","updated":"20241025163630"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker stop my-mysql\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241025163630-8xd5zkg","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241025163630-8xd5zkg","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"步骤2: 导出MySQL容器"}]},{"ID":"20241025163630-0gv3gqz","Type":"NodeParagraph","Properties":{"id":"20241025163630-0gv3gqz","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker export"},{"Type":"NodeText","Data":"​ 命令将容器导出为一个 tar 文件。"}]},{"ID":"20241025163630-bff52b1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241025163630-bff52b1","updated":"20241025163630"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker export my-mysql \u003e my-mysql.tar\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241025163630-pqyrs0p","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241025163630-pqyrs0p","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"步骤3: 传输数据目录和容器文件"}]},{"ID":"20241025163630-kajah17","Type":"NodeParagraph","Properties":{"id":"20241025163630-kajah17","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"将MySQL的数据目录和导出的容器文件传输到目标主机，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"scp"},{"Type":"NodeText","Data":"​ 或其他工具。"}]},{"ID":"20241025163630-y6k06ji","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241025163630-y6k06ji","updated":"20241025163630"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"scp mysql_data.tar.gz user@destination_host:/path/to\nscp my-mysql.tar user@destination_host:/path/to\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241025163630-bbbqi21","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241025163630-bbbqi21","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"步骤4: 在目标主机上恢复数据目录"}]},{"ID":"20241025163630-90kvkgv","Type":"NodeParagraph","Properties":{"id":"20241025163630-90kvkgv","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"在目标主机上解压数据目录。"}]},{"ID":"20241025163630-q65tion","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241025163630-q65tion","updated":"20241025163630"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"tar xzvf /path/to/mysql_data.tar.gz -C /path/to\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241025163630-be4k09m","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241025163630-be4k09m","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"步骤5: 在目标主机上导入MySQL容器"}]},{"ID":"20241025163630-ezqfgdb","Type":"NodeParagraph","Properties":{"id":"20241025163630-ezqfgdb","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"在目标主机上使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker import"},{"Type":"NodeText","Data":"​ 命令导入容器。"}]},{"ID":"20241025163630-uhkejru","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241025163630-uhkejru","updated":"20241025163630"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cat /path/to/my-mysql.tar | docker import - my-mysql:backup\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241025163630-5yz5lc6","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241025163630-5yz5lc6","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"步骤6: 创建并运行新的MySQL容器实例"}]},{"ID":"20241025163630-dx3942a","Type":"NodeParagraph","Properties":{"id":"20241025163630-dx3942a","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"现在你可以使用目标主机上的导入镜像来创建新容器，挂载解压后的数据目录，并使用与源主机相同的配置。"}]},{"ID":"20241025163630-2zjx0li","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241025163630-2zjx0li","updated":"20241025163630"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run --name my-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d \\\n  -v /path/to/mysql_data:/var/lib/mysql \\\n  -p 3306:3306 my-mysql:backup\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241025163630-kknuwso","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241025163630-kknuwso","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"步骤7: 验证MySQL运行状态"}]},{"ID":"20241025163630-kzhuuc1","Type":"NodeParagraph","Properties":{"id":"20241025163630-kzhuuc1","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"检查容器是否运行正常："}]},{"ID":"20241025163630-ihy6f2v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241025163630-ihy6f2v","updated":"20241025163630"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker ps\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241025163630-793o9xi","Type":"NodeParagraph","Properties":{"id":"20241025163630-793o9xi","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"并尝试连接到MySQL数据库："}]},{"ID":"20241025163630-17sveq5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241025163630-17sveq5","updated":"20241025163630"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"mysql -h 127.0.0.1 -P 3306 -u root -p\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241025163630-pb7gayg","Type":"NodeParagraph","Properties":{"id":"20241025163630-pb7gayg","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"输入密码并检查数据。"}]},{"ID":"20241025163630-vpt4c6x","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241025163630-vpt4c6x","updated":"20241025163634"},"Children":[{"Type":"NodeText","Data":"步骤8: 配置防火墙（如有需要）"}]},{"ID":"20241025163630-ew66i0n","Type":"NodeParagraph","Properties":{"id":"20241025163630-ew66i0n","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"确保目标主机上已经开放了3306端口："}]},{"ID":"20241025163630-kzgplpz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241025163630-kzgplpz","updated":"20241025163630"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"sudo ufw allow 3306\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241025163630-sifq5iu","Type":"NodeParagraph","Properties":{"id":"20241025163630-sifq5iu","updated":"20241025163630"},"Children":[{"Type":"NodeText","Data":"通过这些步骤，您可以保证在目标主机上使用与源主机相同的容器配置，并且迁移MySQL数据库数据。这样不仅保持了数据的一致性，还能保持MySQL服务配置和运行环境的一致性。"}]},{"ID":"20241025163634-119l55c","Type":"NodeParagraph","Properties":{"id":"20241025163634-119l55c","updated":"20241025163634"}},{"ID":"20241024233655-9sc5cnh","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241024233655-9sc5cnh","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"方式二：docker commit+save"}]},{"ID":"20241024233655-cd2r7r6","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241024233655-cd2r7r6","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"流程简述"}]},{"ID":"20241024233655-3ln7al5","Type":"NodeParagraph","Properties":{"id":"20241024233655-3ln7al5","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"将原本的 MySQL 容器打包为镜像并在新系统上部署，是一种可行的迁移方法，尤其是当除了数据之外，还有特定的配置或自定义修改时。以下是完整的步骤流程："}]},{"ID":"20241024233655-an9aalb","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241024233655-an9aalb","updated":"20241024233655"},"Children":[{"ID":"20241024233655-kikcugj","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241024233655-kikcugj","updated":"20241024233655"},"Children":[{"ID":"20241024233655-3bwvtgd","Type":"NodeParagraph","Properties":{"id":"20241024233655-3bwvtgd","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"为容器创建镜像"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-cm6i0ze","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-cm6i0ze","updated":"20241024233655"},"Children":[{"ID":"20241024233655-uk80dhq","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-uk80dhq","updated":"20241024233655"},"Children":[{"ID":"20241024233655-4xlg60p","Type":"NodeParagraph","Properties":{"id":"20241024233655-4xlg60p","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"如果你的 MySQL 容器在默认配置之外有其他定制化的内容，可以将其打包为新的镜像。使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker commit"},{"Type":"NodeText","Data":"​ 来创建镜像："}]},{"ID":"20241024233655-njq8clj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-njq8clj","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker commit \u003ccontainer-id或container-name\u003e \u003cnew-image-name\u003e:\u003ctag\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]},{"ID":"20241024233655-dlmt6mz","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241024233655-dlmt6mz","updated":"20241024233655"},"Children":[{"ID":"20241024233655-p15tbfu","Type":"NodeParagraph","Properties":{"id":"20241024233655-p15tbfu","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"保存镜像为文件"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-g14q77m","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-g14q77m","updated":"20241024233655"},"Children":[{"ID":"20241024233655-r1zn524","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-r1zn524","updated":"20241024233655"},"Children":[{"ID":"20241024233655-21twsrx","Type":"NodeParagraph","Properties":{"id":"20241024233655-21twsrx","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker save"},{"Type":"NodeText","Data":"​ 命令，将新创建的镜像保存到文件中："}]},{"ID":"20241024233655-qttwcki","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-qttwcki","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker save -o \u003coutput-file.tar\u003e \u003cnew-image-name\u003e:\u003ctag\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]},{"ID":"20241024233655-3rt7mbt","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241024233655-3rt7mbt","updated":"20241024233655"},"Children":[{"ID":"20241024233655-qil1gd6","Type":"NodeParagraph","Properties":{"id":"20241024233655-qil1gd6","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"传输镜像文件"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-pnyqcc1","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-pnyqcc1","updated":"20241024233655"},"Children":[{"ID":"20241024233655-usai863","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-usai863","updated":"20241024233655"},"Children":[{"ID":"20241024233655-84k5w2o","Type":"NodeParagraph","Properties":{"id":"20241024233655-84k5w2o","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"将保存的镜像文件传输到新系统。例如，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"scp"},{"Type":"NodeText","Data":"​ 或者其他文件传输工具："}]},{"ID":"20241024233655-rxxvsun","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-rxxvsun","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"scp \u003coutput-file.tar\u003e user@newhost:/path/to/destination\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]},{"ID":"20241024233655-2679q72","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241024233655-2679q72","updated":"20241024233655"},"Children":[{"ID":"20241024233655-gl7c1be","Type":"NodeParagraph","Properties":{"id":"20241024233655-gl7c1be","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在新系统上加载镜像"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-x43w7jo","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-x43w7jo","updated":"20241024233655"},"Children":[{"ID":"20241024233655-00c4nr2","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-00c4nr2","updated":"20241024233655"},"Children":[{"ID":"20241024233655-8gi45vi","Type":"NodeParagraph","Properties":{"id":"20241024233655-8gi45vi","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"在目标服务器上，使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker load"},{"Type":"NodeText","Data":"​ 命令加载镜像："}]},{"ID":"20241024233655-ebknukj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-ebknukj","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker load -i /path/to/destination/\u003coutput-file.tar\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]},{"ID":"20241024233655-x7x4514","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20241024233655-x7x4514","updated":"20241024233655"},"Children":[{"ID":"20241024233655-dqsex1t","Type":"NodeParagraph","Properties":{"id":"20241024233655-dqsex1t","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"配置数据卷迁移"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-px0ow92","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-px0ow92","updated":"20241024233655"},"Children":[{"ID":"20241024233655-7mic4tb","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-7mic4tb","updated":"20241024233655"},"Children":[{"ID":"20241024233655-x3arbjv","Type":"NodeParagraph","Properties":{"id":"20241024233655-x3arbjv","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"正如之前提到的，数据需要独立于镜像进行迁移，确保将原始数据挂载目录做备份，并在新的服务器上恢复。"}]}]}]}]},{"ID":"20241024233655-bz58ycp","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20241024233655-bz58ycp","updated":"20241024233655"},"Children":[{"ID":"20241024233655-nwphj3v","Type":"NodeParagraph","Properties":{"id":"20241024233655-nwphj3v","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"启动新的容器"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-tplybdd","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-tplybdd","updated":"20241024233655"},"Children":[{"ID":"20241024233655-s78gm8v","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-s78gm8v","updated":"20241024233655"},"Children":[{"ID":"20241024233655-i8rwxnu","Type":"NodeParagraph","Properties":{"id":"20241024233655-i8rwxnu","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker run"},{"Type":"NodeText","Data":"​ 或者 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker-compose"},{"Type":"NodeText","Data":"​ 启动新加载的镜像，并挂载已经迁移好的数据目录："}]},{"ID":"20241024233655-szcw58z","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-szcw58z","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run --name new-mysql-container -v /path/to/new/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d \u003cnew-image-name\u003e:\u003ctag\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]},{"ID":"20241024233655-heb50rk","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ny4=","Num":7},"Properties":{"id":"20241024233655-heb50rk","updated":"20241024233655"},"Children":[{"ID":"20241024233655-o3dib6e","Type":"NodeParagraph","Properties":{"id":"20241024233655-o3dib6e","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"验证"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-z2g2w3b","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-z2g2w3b","updated":"20241024233655"},"Children":[{"ID":"20241024233655-nf8bdkz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-nf8bdkz","updated":"20241024233655"},"Children":[{"ID":"20241024233655-8hgbs7p","Type":"NodeParagraph","Properties":{"id":"20241024233655-8hgbs7p","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"检查 MySQL 的日志和数据完整性，确认服务正常工作。"}]}]}]}]}]},{"ID":"20241024233655-raecpo9","Type":"NodeParagraph","Properties":{"id":"20241024233655-raecpo9","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"这套流程确保了不仅数据迁移，还有可能的应用程序配置、插件或自定义脚本全部一致地迁移到了新环境。"}]},{"ID":"20241024233655-mbu0yac","Type":"NodeParagraph","Properties":{"id":"20241024233655-mbu0yac","updated":"20241024233655"}},{"ID":"20241024233655-4latcax","Type":"NodeParagraph","Properties":{"id":"20241024233655-4latcax","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"好的，下面是一个完整的 MySQL 部署及迁移的例子，包括详细的命令步骤。"}]},{"ID":"20241024233655-d30xqdi","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241024233655-d30xqdi","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"步骤1：部署初始 MySQL 容器"}]},{"ID":"20241024233655-o3278hz","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241024233655-o3278hz","updated":"20241024233655"},"Children":[{"ID":"20241024233655-y5degiw","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241024233655-y5degiw","updated":"20241024233655"},"Children":[{"ID":"20241024233655-g5xrlim","Type":"NodeParagraph","Properties":{"id":"20241024233655-g5xrlim","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"运行 MySQL 容器"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-7gs5r0j","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-7gs5r0j","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run --name my-mysql \n -e MYSQL_ROOT_PASSWORD=my-secret-pw \n -v /path/to/local/mysql/data:/var/lib/mysql \n -d mysql:8.0\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241024233655-d6osgfs","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241024233655-d6osgfs","updated":"20241024233655"},"Children":[{"ID":"20241024233655-x7e4s7o","Type":"NodeParagraph","Properties":{"id":"20241024233655-x7e4s7o","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"检查 MySQL 启动"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-dg6w3g6","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-dg6w3g6","updated":"20241024233655"},"Children":[{"ID":"20241024233655-f8gjbsr","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-f8gjbsr","updated":"20241024233655"},"Children":[{"ID":"20241024233655-zk6d04w","Type":"NodeParagraph","Properties":{"id":"20241024233655-zk6d04w","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"查看启动日志确认 MySQL 正常运行："}]},{"ID":"20241024233655-t3zvg1d","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-t3zvg1d","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker logs my-mysql\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]}]},{"ID":"20241024233655-xbbipz4","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241024233655-xbbipz4","updated":"20241025163658"},"Children":[{"Type":"NodeText","Data":"步骤2：备份数据"}]},{"ID":"20241024233655-brleq4p","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241024233655-brleq4p","updated":"20241024233655"},"Children":[{"ID":"20241024233655-4q46omg","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241024233655-4q46omg","updated":"20241024233655"},"Children":[{"ID":"20241024233655-jct9xuz","Type":"NodeParagraph","Properties":{"id":"20241024233655-jct9xuz","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"停止容器"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-r2qpkyu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-r2qpkyu","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker stop my-mysql\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241024233655-tcpvrc6","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241024233655-tcpvrc6","updated":"20241024233655"},"Children":[{"ID":"20241024233655-9ny7g0k","Type":"NodeParagraph","Properties":{"id":"20241024233655-9ny7g0k","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"备份数据目录"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-s0cj0r4","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-s0cj0r4","updated":"20241024233655"},"Children":[{"ID":"20241024233655-6838iwc","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-6838iwc","updated":"20241024233655"},"Children":[{"ID":"20241024233655-xamdemk","Type":"NodeParagraph","Properties":{"id":"20241024233655-xamdemk","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"复制 MySQL 数据到备份目录："}]},{"ID":"20241024233655-mmrbh4f","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-mmrbh4f","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cp -r /path/to/local/mysql/data /path/to/backup/mysql/data\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]}]},{"ID":"20241024233655-2bvgxwx","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241024233655-2bvgxwx","updated":"20241025163703"},"Children":[{"Type":"NodeText","Data":"步骤3：创建和保存镜像"}]},{"ID":"20241024233655-728ubc1","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241024233655-728ubc1","updated":"20241024233655"},"Children":[{"ID":"20241024233655-2i5ehg6","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241024233655-2i5ehg6","updated":"20241024233655"},"Children":[{"ID":"20241024233655-yq2hpeb","Type":"NodeParagraph","Properties":{"id":"20241024233655-yq2hpeb","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"提交容器为镜像"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-djzz8of","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-djzz8of","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker commit my-mysql my-mysql-image:backup\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241024233655-wgudjo7","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241024233655-wgudjo7","updated":"20241024233655"},"Children":[{"ID":"20241024233655-f58bal0","Type":"NodeParagraph","Properties":{"id":"20241024233655-f58bal0","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"保存镜像到文件"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-jh6x5yk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-jh6x5yk","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker save -o my-mysql-image-backup.tar my-mysql-image:backup\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241024233655-x72ms4j","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241024233655-x72ms4j","updated":"20241025163708"},"Children":[{"Type":"NodeText","Data":"步骤4：迁移到新系统"}]},{"ID":"20241024233655-n9hzoa2","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241024233655-n9hzoa2","updated":"20241024233655"},"Children":[{"ID":"20241024233655-fn8ufyb","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241024233655-fn8ufyb","updated":"20241024233655"},"Children":[{"ID":"20241024233655-9krmbby","Type":"NodeParagraph","Properties":{"id":"20241024233655-9krmbby","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"传输镜像文件和数据备份"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-qwn5kcj","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-qwn5kcj","updated":"20241024233655"},"Children":[{"ID":"20241024233655-3d8pd39","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-3d8pd39","updated":"20241024233655"},"Children":[{"ID":"20241024233655-gulilex","Type":"NodeParagraph","Properties":{"id":"20241024233655-gulilex","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"scp"},{"Type":"NodeText","Data":"​ 将文件传输到新系统（假设用户名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"user"},{"Type":"NodeText","Data":"​，目标 IP 为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"192.168.1.100"},{"Type":"NodeText","Data":"​）："}]},{"ID":"20241024233655-ly933e6","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-ly933e6","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"scp my-mysql-image-backup.tar /path/to/backup/mysql/data user@192.168.1.100:/path/to/destination\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]},{"ID":"20241024233655-g3ivpii","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241024233655-g3ivpii","updated":"20241024233655"},"Children":[{"ID":"20241024233655-r0u34s1","Type":"NodeParagraph","Properties":{"id":"20241024233655-r0u34s1","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"在新系统上加载镜像"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-6f41v0j","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-6f41v0j","updated":"20241024233655"},"Children":[{"ID":"20241024233655-r2bvdso","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-r2bvdso","updated":"20241024233655"},"Children":[{"ID":"20241024233655-t2ejwjf","Type":"NodeParagraph","Properties":{"id":"20241024233655-t2ejwjf","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"登录到新系统后，运行："}]},{"ID":"20241024233655-mhsw9b7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-mhsw9b7","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker load -i /path/to/destination/my-mysql-image-backup.tar\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]},{"ID":"20241024233655-488zq9u","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241024233655-488zq9u","updated":"20241024233655"},"Children":[{"ID":"20241024233655-jsxrbq0","Type":"NodeParagraph","Properties":{"id":"20241024233655-jsxrbq0","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"恢复数据目录"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-a4x1n1x","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-a4x1n1x","updated":"20241024233655"},"Children":[{"ID":"20241024233655-ef078mu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-ef078mu","updated":"20241024233655"},"Children":[{"ID":"20241024233655-r624ghm","Type":"NodeParagraph","Properties":{"id":"20241024233655-r624ghm","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"创建新的数据目录，并将备份数据复制到该目录："}]},{"ID":"20241024233655-a2h6p45","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-a2h6p45","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"mkdir -p /path/to/new/mysql/data\ncp -r /path/to/destination/mysql/data/* /path/to/new/mysql/data/\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]},{"ID":"20241024233655-avoavfb","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241024233655-avoavfb","updated":"20241024233655"},"Children":[{"ID":"20241024233655-nq20rbh","Type":"NodeParagraph","Properties":{"id":"20241024233655-nq20rbh","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"启动新容器"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-ynhj14o","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-ynhj14o","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run --name new-mysql \n -e MYSQL_ROOT_PASSWORD=my-secret-pw \n -v /path/to/new/mysql/data:/var/lib/mysql \n -d my-mysql-image:backup\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241024233655-855ir27","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20241024233655-855ir27","updated":"20241024233655"},"Children":[{"ID":"20241024233655-r5p6ned","Type":"NodeParagraph","Properties":{"id":"20241024233655-r5p6ned","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"验证数据库运行"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-dz86054","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-dz86054","updated":"20241024233655"},"Children":[{"ID":"20241024233655-9kq9zxt","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-9kq9zxt","updated":"20241024233655"},"Children":[{"ID":"20241024233655-ksz3xmx","Type":"NodeParagraph","Properties":{"id":"20241024233655-ksz3xmx","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"检查容器日志，确保 MySQL 启动正常："}]},{"ID":"20241024233655-v56q9xb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-v56q9xb","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker logs new-mysql\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241024233655-dy0q7kf","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-dy0q7kf","updated":"20241024233655"},"Children":[{"ID":"20241024233655-dhu4wmi","Type":"NodeParagraph","Properties":{"id":"20241024233655-dhu4wmi","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"连接到 MySQL 并检查数据是否正确："}]},{"ID":"20241024233655-pxdgb59","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241024233655-pxdgb59","updated":"20241024233655"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker exec -it new-mysql mysql -u root -p\n# 输入密码 `my-secret-pw` 后，查询数据库\nSHOW DATABASES;\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]}]},{"ID":"20241024233655-4ioskyt","Type":"NodeParagraph","Properties":{"id":"20241024233655-4ioskyt","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"以上步骤 illustrating 了如何创建 MySQL 容器、备份数据、将容器提交为镜像并迁移到新的系统。tags 和 IP 地址应根据具体情况调整。"}]},{"ID":"20241024233655-01cwlk1","Type":"NodeParagraph","Properties":{"id":"20241024233655-01cwlk1","updated":"20241024233655"}},{"ID":"20241024233655-rdfr341","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241024233655-rdfr341","updated":"20241029205810"},"Children":[{"Type":"NodeText","Data":"补充：docker export和docker save的差异"}]},{"ID":"20241024233655-vetwgn2","Type":"NodeParagraph","Properties":{"id":"20241024233655-vetwgn2","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker export"},{"Type":"NodeText","Data":"​和导出Docker容器镜像的方式都可以用于保存和传输Docker容器的状态，但它们有一些显著的区别："}]},{"ID":"20241024233655-4apf7sp","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241024233655-4apf7sp","updated":"20241029203755"},"Children":[{"ID":"20241024233655-5i8l0od","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241024233655-5i8l0od","updated":"20241024233655"},"Children":[{"ID":"20241024233655-6b2pzig","Type":"NodeParagraph","Properties":{"id":"20241024233655-6b2pzig","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"docker export"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-fcqtck6","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-fcqtck6","updated":"20241024233655"},"Children":[{"ID":"20241024233655-tn3yh8u","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-tn3yh8u","updated":"20241024233655"},"Children":[{"ID":"20241024233655-oq2exm4","Type":"NodeParagraph","Properties":{"id":"20241024233655-oq2exm4","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"功能"},{"Type":"NodeText","Data":"："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker export"},{"Type":"NodeText","Data":"​将整个容器的文件系统"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"导出为一个tar归档文件"},{"Type":"NodeText","Data":"。它不包含任何与构建镜像时使用的Docker层信息。"}]}]},{"ID":"20241024233655-q1scxs3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-q1scxs3","updated":"20241024233655"},"Children":[{"ID":"20241024233655-mabnf5l","Type":"NodeParagraph","Properties":{"id":"20241024233655-mabnf5l","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"优点"},{"Type":"NodeText","Data":"：导出的文件通常较小，因为只包含最终容器运行时的文件系统，适用于快速备份或迁移容器的文件系统。"}]}]},{"ID":"20241024233655-zkyyz3o","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-zkyyz3o","updated":"20241024233655"},"Children":[{"ID":"20241024233655-szmlocu","Type":"NodeParagraph","Properties":{"id":"20241024233655-szmlocu","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"缺点"},{"Type":"NodeText","Data":"：丢失了Docker镜像的历史和分层信息。导出后，将无法直接用来创建新的容器（需要使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker import"},{"Type":"NodeText","Data":"​将其转化为镜像，但会丢失所有原有的构建信息和历史）。"}]}]}]}]},{"ID":"20241024233655-jl12p24","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241024233655-jl12p24","updated":"20241029203755"},"Children":[{"ID":"20241024233655-dq69a07","Type":"NodeParagraph","Properties":{"id":"20241024233655-dq69a07","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"导出Docker镜像"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-9mqha0l","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-9mqha0l","updated":"20241029203755"},"Children":[{"ID":"20241024233655-7bbi6ec","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-7bbi6ec","updated":"20241029203755"},"Children":[{"ID":"20241024233655-abs8xiw","Type":"NodeParagraph","Properties":{"id":"20241024233655-abs8xiw","updated":"20241029203755"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"功能"},{"Type":"NodeText","Data":"：生成容器的基础镜像可以通过"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker save"},{"Type":"NodeText","Data":"​命令进行导出，"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"保存为镜像文件"},{"Type":"NodeText","Data":"。"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"这保持了镜像的所有层信息和元数据"},{"Type":"NodeText","Data":"。"}]}]},{"ID":"20241024233655-gv0cxwk","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-gv0cxwk","updated":"20241024233655"},"Children":[{"ID":"20241024233655-lib6zqu","Type":"NodeParagraph","Properties":{"id":"20241024233655-lib6zqu","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"优点"},{"Type":"NodeText","Data":"：包含完整的构建信息和镜像层级，可以使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker load"},{"Type":"NodeText","Data":"​轻松导入并恢复整个镜像，用于容器重建。"}]}]},{"ID":"20241024233655-barc5qu","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-barc5qu","updated":"20241024233655"},"Children":[{"ID":"20241024233655-4btlb2h","Type":"NodeParagraph","Properties":{"id":"20241024233655-4btlb2h","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"缺点"},{"Type":"NodeText","Data":"：导出的文件可能较大，因为包含了所有镜像层和历史记录。"}]}]}]}]}]},{"ID":"20241024233655-uvm1qb8","Type":"NodeParagraph","Properties":{"id":"20241024233655-uvm1qb8","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"选择哪种方式更好"},{"Type":"NodeText","Data":"："}]},{"ID":"20241024233655-ez27v6n","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-ez27v6n","updated":"20241024233655"},"Children":[{"ID":"20241024233655-xuj7pbg","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-xuj7pbg","updated":"20241024233655"},"Children":[{"ID":"20241024233655-30fuft1","Type":"NodeParagraph","Properties":{"id":"20241024233655-30fuft1","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"如果你需要保留容器的可移植性和重新构建能力，以及完整的历史记录和层信息，选择导出镜像会更合适。"}]}]},{"ID":"20241024233655-ezuji16","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-ezuji16","updated":"20241024233655"},"Children":[{"ID":"20241024233655-b8e83oo","Type":"NodeParagraph","Properties":{"id":"20241024233655-b8e83oo","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"如果仅仅需要备份当前的文件系统状态并不关心构建历史，或需要将文件系统用于其他非Docker环境中时，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker export"},{"Type":"NodeText","Data":"​会更为方便。"}]}]}]},{"ID":"20241024233655-xyfaqnk","Type":"NodeParagraph","Properties":{"id":"20241024233655-xyfaqnk","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"总体来说，导出镜像通常被认为是更为完整和可靠的方式，尤其是在需要将容器部署到不同环境或者进行调试时。"}]},{"ID":"20241024233655-nobnq64","Type":"NodeParagraph","Properties":{"id":"20241024233655-nobnq64","updated":"20241024233655"}},{"ID":"20241024233655-vfok2iz","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241024233655-vfok2iz","updated":"20241029205810"},"Children":[{"Type":"NodeText","Data":"文章"}]},{"ID":"20241024233655-p1htcbj","Type":"NodeParagraph","Properties":{"id":"20241024233655-p1htcbj","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://zhuanlan.zhihu.com/p/152219012","TextMarkTextContent":"docker：export/save/commit谁才是你心中那个她 - 知乎"}]},{"ID":"20241024233655-ga88w2j","Type":"NodeList","ListData":{},"Properties":{"id":"20241024233655-ga88w2j","updated":"20241024233655"},"Children":[{"ID":"20241024233655-hvqyz6q","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241024233655-hvqyz6q","updated":"20241024233655"},"Children":[{"ID":"20241024233655-0qchtlc","Type":"NodeParagraph","Properties":{"id":"20241024233655-0qchtlc","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"重点："}]},{"ID":"20241024233655-engvh1c","Type":"NodeParagraph","Properties":{"id":"20241024233655-engvh1c","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"这样分别有什么用武之地呢？"}]},{"ID":"20241024233655-p2bybhf","Type":"NodeParagraph","Properties":{"id":"20241024233655-p2bybhf","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"第一，commit+save模式：保留了一个镜像的所有历史文件和"},{"Type":"NodeTextMark","TextMarkType":"strong a","TextMarkAHref":"https://zhida.zhihu.com/search?content_id=121958645\u0026amp;content_type=Article\u0026amp;match_order=1\u0026amp;q=%E5%85%83%E6%95%B0%E6%8D%AE\u0026amp;zhida_source=entity","TextMarkTextContent":"元数据"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"，它把容器的内容作为一个新的层覆盖在原有镜像之上，然后实现持久化。原有的镜像没有改变。"}]},{"ID":"20241024233655-09stxes","Type":"NodeParagraph","Properties":{"id":"20241024233655-09stxes","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"这样的好处是，当我发现这个commit+save的"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://zhida.zhihu.com/search?content_id=121958645\u0026amp;content_type=Article\u0026amp;match_order=1\u0026amp;q=%E9%95%9C%E5%83%8F%E5%8C%85\u0026amp;zhida_source=entity","TextMarkTextContent":"镜像包"},{"Type":"NodeText","Data":"有问题的时候，可以快速回滚到之前的镜像版本。"}]},{"ID":"20241024233655-4xrs9g1","Type":"NodeParagraph","Properties":{"id":"20241024233655-4xrs9g1","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"这波操作666"}]},{"ID":"20241024233655-xgmk63j","Type":"NodeParagraph","Properties":{"id":"20241024233655-xgmk63j","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"你想，之前我们是怎么做产品版本管理的？每发一个版本就要生成一个安装部署包，久而久之版本越来越多，部署包的文件夹越来越大。部署实施人员在客户单位想回滚版本的时候可能只能够重新部署。"}]},{"ID":"20241024233655-myxtgkf","Type":"NodeParagraph","Properties":{"id":"20241024233655-myxtgkf","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"删除新版本--"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"\u003e"}]},{"Type":"NodeText","Data":"拷贝旧版本--"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeText","Data":"\u003e"}]},{"Type":"NodeText","Data":"安装旧版本....."}]},{"ID":"20241024233655-zbzn6ls","Type":"NodeParagraph","Properties":{"id":"20241024233655-zbzn6ls","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"几个小时过去了。"}]},{"ID":"20241024233655-n0fw1p4","Type":"NodeParagraph","Properties":{"id":"20241024233655-n0fw1p4","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"有了docker这个回滚特性，那就直接回滚到镜像的某个层，然后再实例化一个容器就可以了。"}]},{"ID":"20241024233655-zwgo3ru","Type":"NodeParagraph","Properties":{"id":"20241024233655-zwgo3ru","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"几秒钟的工作量。"}]},{"ID":"20241024233655-jv62qv8","Type":"NodeParagraph","Properties":{"id":"20241024233655-jv62qv8","updated":"20241024233655"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"第二，export模式：打扫干净屋子再请客。把之前镜像的层级删干净，只保留最新的快照文件。"}]},{"ID":"20241024233655-dtenxs8","Type":"NodeParagraph","Properties":{"id":"20241024233655-dtenxs8","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"这种情况适用于我不需要回滚，当前的状态即是最佳状态的时候。这样做的好处是，删除了没有用处的历史数据，同时保留了镜像具有的所有功能，关键是"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://zhida.zhihu.com/search?content_id=121958645\u0026amp;content_type=Article\u0026amp;match_order=3\u0026amp;q=%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6\u0026amp;zhida_source=entity","TextMarkTextContent":"镜像文件"},{"Type":"NodeText","Data":"还小的很"}]},{"ID":"20241024233655-ear1l6n","Type":"NodeParagraph","Properties":{"id":"20241024233655-ear1l6n","updated":"20241024233655"},"Children":[{"Type":"NodeText","Data":"一举三得。"}]}]}]},{"ID":"20241029204212-jnwb3ni","Type":"NodeParagraph","Properties":{"id":"20241029204212-jnwb3ni","updated":"20241029204212"}},{"ID":"20241029205810-ou68a9i","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241029205810-ou68a9i","updated":"20241030000805"},"Children":[{"Type":"NodeText","Data":"实际操作-迁移MySQL🚩"}]},{"ID":"20241030000742-m4qy3kd","Type":"NodeParagraph","Properties":{"id":"20241030000742-m4qy3kd","updated":"20241030000805"},"Children":[{"Type":"NodeText","Data":"2024年10月29日晚"}]},{"ID":"20241029204214-pv7npgm","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029204214-pv7npgm","updated":"20241029223337"},"Children":[{"Type":"NodeText","Data":"查看挂载目录"}]},{"ID":"20241029204230-iiigtld","Type":"NodeParagraph","Properties":{"id":"20241029204230-iiigtld","updated":"20241029204438"},"Children":[{"Type":"NodeText","Data":"我使用了命令，得到的结果是："}]},{"ID":"20241029204245-7173av2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"fold":"1","id":"20241029204245-7173av2","updated":"20241029204252"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"root@hcss-ecs-32de:~# docker inspect mysql\n[\n    {\n        \"Id\": \"348ce2983b414495334d897bde9eb1532dfd3d873a2ec464874a1946f06570f4\",\n        \"Created\": \"2023-12-23T08:22:28.2477537Z\",\n        \"Path\": \"docker-entrypoint.sh\",\n        \"Args\": [\n            \"mysqld\"\n        ],\n        \"State\": {\n            \"Status\": \"running\",\n            \"Running\": true,\n            \"Paused\": false,\n            \"Restarting\": false,\n            \"OOMKilled\": false,\n            \"Dead\": false,\n            \"Pid\": 373169,\n            \"ExitCode\": 0,\n            \"Error\": \"\",\n            \"StartedAt\": \"2023-12-23T08:22:30.231736799Z\",\n            \"FinishedAt\": \"0001-01-01T00:00:00Z\"\n        },\n        \"Image\": \"sha256:5107333e08a87b836d48ff7528b1e84b9c86781cc9f1748bbc1b8c42a870d933\",\n        \"ResolvConfPath\": \"/var/lib/docker/containers/348ce2983b414495334d897bde9eb1532dfd3d873a2ec464874a1946f06570f4/resolv.conf\",\n        \"HostnamePath\": \"/var/lib/docker/containers/348ce2983b414495334d897bde9eb1532dfd3d873a2ec464874a1946f06570f4/hostname\",\n        \"HostsPath\": \"/var/lib/docker/containers/348ce2983b414495334d897bde9eb1532dfd3d873a2ec464874a1946f06570f4/hosts\",\n        \"LogPath\": \"/var/lib/docker/containers/348ce2983b414495334d897bde9eb1532dfd3d873a2ec464874a1946f06570f4/348ce2983b414495334d897bde9eb1532dfd3d873a2ec464874a1946f06570f4-json.log\",\n        \"Name\": \"/mysql\",\n        \"RestartCount\": 0,\n        \"Driver\": \"overlay2\",\n        \"Platform\": \"linux\",\n        \"MountLabel\": \"\",\n        \"ProcessLabel\": \"\",\n        \"AppArmorProfile\": \"docker-default\",\n        \"ExecIDs\": null,\n        \"HostConfig\": {\n            \"Binds\": [\n                \"/root/mydata/mysql/data:/var/lib/mysql\",\n                \"/root/mydata/mysql/conf:/etc/mysql/conf.d\",\n                \"/root/mydata/mysql/init:/docker-entrypoint-initdb.d\"\n            ],\n            \"ContainerIDFile\": \"\",\n            \"LogConfig\": {\n                \"Type\": \"json-file\",\n                \"Config\": {}\n            },\n            \"NetworkMode\": \"default\",\n            \"PortBindings\": {\n                \"3306/tcp\": [\n                    {\n                        \"HostIp\": \"\",\n                        \"HostPort\": \"3306\"\n                    }\n                ]\n            },\n            \"RestartPolicy\": {\n                \"Name\": \"no\",\n                \"MaximumRetryCount\": 0\n            },\n            \"AutoRemove\": false,\n            \"VolumeDriver\": \"\",\n            \"VolumesFrom\": null,\n            \"ConsoleSize\": [\n                46,\n                173\n            ],\n            \"CapAdd\": null,\n            \"CapDrop\": null,\n            \"CgroupnsMode\": \"host\",\n            \"Dns\": [],\n            \"DnsOptions\": [],\n            \"DnsSearch\": [],\n            \"ExtraHosts\": null,\n            \"GroupAdd\": null,\n            \"IpcMode\": \"private\",\n            \"Cgroup\": \"\",\n            \"Links\": null,\n            \"OomScoreAdj\": 0,\n            \"PidMode\": \"\",\n            \"Privileged\": false,\n            \"PublishAllPorts\": false,\n            \"ReadonlyRootfs\": false,\n            \"SecurityOpt\": null,\n            \"UTSMode\": \"\",\n            \"UsernsMode\": \"\",\n            \"ShmSize\": 67108864,\n            \"Runtime\": \"runc\",\n            \"Isolation\": \"\",\n            \"CpuShares\": 0,\n            \"Memory\": 0,\n            \"NanoCpus\": 0,\n            \"CgroupParent\": \"\",\n            \"BlkioWeight\": 0,\n            \"BlkioWeightDevice\": [],\n            \"BlkioDeviceReadBps\": [],\n            \"BlkioDeviceWriteBps\": [],\n            \"BlkioDeviceReadIOps\": [],\n            \"BlkioDeviceWriteIOps\": [],\n            \"CpuPeriod\": 0,\n            \"CpuQuota\": 0,\n            \"CpuRealtimePeriod\": 0,\n            \"CpuRealtimeRuntime\": 0,\n            \"CpusetCpus\": \"\",\n            \"CpusetMems\": \"\",\n            \"Devices\": [],\n            \"DeviceCgroupRules\": null,\n            \"DeviceRequests\": null,\n            \"MemoryReservation\": 0,\n            \"MemorySwap\": 0,\n            \"MemorySwappiness\": null,\n            \"OomKillDisable\": false,\n            \"PidsLimit\": null,\n            \"Ulimits\": null,\n            \"CpuCount\": 0,\n            \"CpuPercent\": 0,\n            \"IOMaximumIOps\": 0,\n            \"IOMaximumBandwidth\": 0,\n            \"MaskedPaths\": [\n                \"/proc/asound\",\n                \"/proc/acpi\",\n                \"/proc/kcore\",\n                \"/proc/keys\",\n                \"/proc/latency_stats\",\n                \"/proc/timer_list\",\n                \"/proc/timer_stats\",\n                \"/proc/sched_debug\",\n                \"/proc/scsi\",\n                \"/sys/firmware\",\n                \"/sys/devices/virtual/powercap\"\n            ],\n            \"ReadonlyPaths\": [\n                \"/proc/bus\",\n                \"/proc/fs\",\n                \"/proc/irq\",\n                \"/proc/sys\",\n                \"/proc/sysrq-trigger\"\n            ]\n        },\n        \"GraphDriver\": {\n            \"Data\": {\n                \"LowerDir\": \"/var/lib/docker/overlay2/cfef2bcc9fe4d8d7bc393852804088131749dccdf3897032b36e25dcbc761e5c-init/diff:/var/lib/docker/overlay2/edc8da7d5f5886b33c0764f79d58d6e52a3a71390d43071446bf2e2c2bbc3226/diff:/var/lib/docker/overlay2/58204cc5de0e9ecf61bddd9f53dc7205a539830e20d873a10254aff02fb39208/diff:/var/lib/docker/overlay2/a8a3bbbfab8744890a314dbc3d0bbd5fb16aad4883ebdbbfd3c11aca2e98ce61/diff:/var/lib/docker/overlay2/f25dc87977cf5681559a14dce606866827c100ccf35ad39b7da655ed15f4f1e6/diff:/var/lib/docker/overlay2/70db80d013bc69fcb5babae7faf283184848771983232bd01c74bc267e2fbc0c/diff:/var/lib/docker/overlay2/0d9e084527122547f5d12bfc3c5ac212b08ff2046e48961dd3eaf2b700d1b2f5/diff:/var/lib/docker/overlay2/541cf1556e92a128ea17f1a5ebaeb4a0b40f95544069f77fd72ab2f32f103e25/diff:/var/lib/docker/overlay2/5a3510a12be71d8c31eba3412c81e3d77bfa124b999692c948ab09126f67605f/diff:/var/lib/docker/overlay2/edd945594a4df8a2277550979a1dcc34ddfa85585ee965fdf2b1284801a55d8d/diff:/var/lib/docker/overlay2/04760f97f2378992c9aee99e40682ce914e56ed0e29ce3b0e9b242c248b7f6ff/diff:/var/lib/docker/overlay2/ae87ba23402d8ec1a775fbd372dfd460a6f30106837cafbd982ecaaa6731ee87/diff\",\n                \"MergedDir\": \"/var/lib/docker/overlay2/cfef2bcc9fe4d8d7bc393852804088131749dccdf3897032b36e25dcbc761e5c/merged\",\n                \"UpperDir\": \"/var/lib/docker/overlay2/cfef2bcc9fe4d8d7bc393852804088131749dccdf3897032b36e25dcbc761e5c/diff\",\n                \"WorkDir\": \"/var/lib/docker/overlay2/cfef2bcc9fe4d8d7bc393852804088131749dccdf3897032b36e25dcbc761e5c/work\"\n            },\n            \"Name\": \"overlay2\"\n        },\n        \"Mounts\": [\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/root/mydata/mysql/data\",\n                \"Destination\": \"/var/lib/mysql\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"rprivate\"\n            },\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/root/mydata/mysql/conf\",\n                \"Destination\": \"/etc/mysql/conf.d\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"rprivate\"\n            },\n            {\n                \"Type\": \"bind\",\n                \"Source\": \"/root/mydata/mysql/init\",\n                \"Destination\": \"/docker-entrypoint-initdb.d\",\n                \"Mode\": \"\",\n                \"RW\": true,\n                \"Propagation\": \"rprivate\"\n            }\n        ],\n        \"Config\": {\n            \"Hostname\": \"348ce2983b41\",\n            \"Domainname\": \"\",\n            \"User\": \"\",\n            \"AttachStdin\": false,\n            \"AttachStdout\": false,\n            \"AttachStderr\": false,\n            \"ExposedPorts\": {\n                \"3306/tcp\": {},\n                \"33060/tcp\": {}\n            },\n            \"Tty\": false,\n            \"OpenStdin\": false,\n            \"StdinOnce\": false,\n            \"Env\": [\n                \"TZ=Asia/Shanghai\",\n                \"MYSQL_ROOT_PASSWORD=pengyumingxrpsy2003\",\n                \"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\",\n                \"GOSU_VERSION=1.16\",\n                \"MYSQL_MAJOR=5.7\",\n                \"MYSQL_VERSION=5.7.44-1.el7\",\n                \"MYSQL_SHELL_VERSION=8.0.35-1.el7\"\n            ],\n            \"Cmd\": [\n                \"mysqld\"\n            ],\n            \"Image\": \"mysql:5.7\",\n            \"Volumes\": {\n                \"/var/lib/mysql\": {}\n            },\n            \"WorkingDir\": \"\",\n            \"Entrypoint\": [\n                \"docker-entrypoint.sh\"\n            ],\n            \"OnBuild\": null,\n            \"Labels\": {}\n        },\n        \"NetworkSettings\": {\n            \"Bridge\": \"\",\n            \"SandboxID\": \"9b27603163960c38c3e1eed977dc3db2d59c2e94563766f4e7028201c46a1d5b\",\n            \"HairpinMode\": false,\n            \"LinkLocalIPv6Address\": \"\",\n            \"LinkLocalIPv6PrefixLen\": 0,\n            \"Ports\": {\n                \"3306/tcp\": [\n                    {\n                        \"HostIp\": \"0.0.0.0\",\n                        \"HostPort\": \"3306\"\n                    },\n                    {\n                        \"HostIp\": \"::\",\n                        \"HostPort\": \"3306\"\n                    }\n                ],\n                \"33060/tcp\": null\n            },\n            \"SandboxKey\": \"/var/run/docker/netns/9b2760316396\",\n            \"SecondaryIPAddresses\": null,\n            \"SecondaryIPv6Addresses\": null,\n            \"EndpointID\": \"d8c136068d909b9b9cb0731c29b0a64453053cbeba5834f19c6690203f50b806\",\n            \"Gateway\": \"172.17.0.1\",\n            \"GlobalIPv6Address\": \"\",\n            \"GlobalIPv6PrefixLen\": 0,\n            \"IPAddress\": \"172.17.0.3\",\n            \"IPPrefixLen\": 16,\n            \"IPv6Gateway\": \"\",\n            \"MacAddress\": \"02:42:ac:11:00:03\",\n            \"Networks\": {\n                \"bridge\": {\n                    \"IPAMConfig\": null,\n                    \"Links\": null,\n                    \"Aliases\": null,\n                    \"NetworkID\": \"75f9a1ad20c985cc76d5345ddd7a4120cde40cb1ea956a58a02b2a9ed2bae3d6\",\n                    \"EndpointID\": \"d8c136068d909b9b9cb0731c29b0a64453053cbeba5834f19c6690203f50b806\",\n                    \"Gateway\": \"172.17.0.1\",\n                    \"IPAddress\": \"172.17.0.3\",\n                    \"IPPrefixLen\": 16,\n                    \"IPv6Gateway\": \"\",\n                    \"GlobalIPv6Address\": \"\",\n                    \"GlobalIPv6PrefixLen\": 0,\n                    \"MacAddress\": \"02:42:ac:11:00:03\",\n                    \"DriverOpts\": null\n                }\n            }\n        }\n    }\n]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029204214-9zcbocg","Type":"NodeParagraph","Properties":{"id":"20241029204214-9zcbocg","updated":"20241029204631"},"Children":[{"Type":"NodeText","Data":"可以看到挂载目录在这里："}]},{"ID":"20241029204631-jtbhg0h","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029204631-jtbhg0h","updated":"20241029204722"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"\"Binds\": [\n    \"/root/mydata/mysql/data:/var/lib/mysql\",\n    \"/root/mydata/mysql/conf:/etc/mysql/conf.d\",\n    \"/root/mydata/mysql/init:/docker-entrypoint-initdb.d\"\n]\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029205834-kiiz45e","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029205834-kiiz45e","updated":"20241029220633"},"Children":[{"Type":"NodeText","Data":"打包挂载目录"}]},{"ID":"20241029204647-0s5ub5w","Type":"NodeParagraph","Properties":{"id":"20241029204647-0s5ub5w","updated":"20241029204829"},"Children":[{"Type":"NodeText","Data":"这三个就是我们的挂载目录了，将他们打包"}]},{"ID":"20241029204947-8zfiqkd","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029204947-8zfiqkd","updated":"20241029205307"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"tar -cvf mysql_backup.tar -C /root/mydata mysql\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029205257-z41s6gj","Type":"NodeParagraph","Properties":{"id":"20241029205257-z41s6gj","updated":"20241029205528"},"Children":[{"Type":"NodeText","Data":"这里默认将tar文件放在当前工作目录，但是也可以指定目录"}]},{"ID":"20241029220536-y4mnjsf","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241029220536-y4mnjsf","updated":"20241029220633"},"Children":[{"Type":"NodeText","Data":"tar命令"}]},{"ID":"20241029205532-3pmnu1p","Type":"NodeBlockquote","Properties":{"id":"20241029205532-3pmnu1p","updated":"20241029205736"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241029205640-80ih3w1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029205640-80ih3w1","updated":"20241029205647"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"tar -cvf mysql_backup.tar -C /root/mydata mysql\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029205606-yj7ycss","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241029205606-yj7ycss","updated":"20241029205702"},"Children":[{"Type":"NodeText","Data":"各部分含义"}]},{"ID":"20241029205606-5ma6gwj","Type":"NodeList","ListData":{},"Properties":{"id":"20241029205606-5ma6gwj","updated":"20241029205606"},"Children":[{"ID":"20241029205606-n8x1orn","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029205606-n8x1orn","updated":"20241029205606"},"Children":[{"ID":"20241029205606-3igdks0","Type":"NodeParagraph","Properties":{"id":"20241029205606-3igdks0","updated":"20241029205606"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"tar"},{"Type":"NodeText","Data":"：命令本身，用于创建和管理归档文件。"}]}]},{"ID":"20241029205606-8og81ax","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029205606-8og81ax","updated":"20241029205606"},"Children":[{"ID":"20241029205606-z0w51h7","Type":"NodeParagraph","Properties":{"id":"20241029205606-z0w51h7","updated":"20241029205606"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"-c"},{"Type":"NodeText","Data":"：表示创建新的归档文件。"}]}]},{"ID":"20241029205606-kacsoil","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029205606-kacsoil","updated":"20241029205606"},"Children":[{"ID":"20241029205606-qedl8yy","Type":"NodeParagraph","Properties":{"id":"20241029205606-qedl8yy","updated":"20241029205606"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"-v"},{"Type":"NodeText","Data":"：表示详细模式，显示正在处理的文件。"}]}]},{"ID":"20241029205606-ux1ptiv","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029205606-ux1ptiv","updated":"20241029205606"},"Children":[{"ID":"20241029205606-0szqisc","Type":"NodeParagraph","Properties":{"id":"20241029205606-0szqisc","updated":"20241029205606"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"-f mysql_backup.tar"},{"Type":"NodeText","Data":"：指定生成的归档文件名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql_backup.tar"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241029205606-y47wwxh","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029205606-y47wwxh","updated":"20241029205606"},"Children":[{"ID":"20241029205606-ncvkfau","Type":"NodeParagraph","Properties":{"id":"20241029205606-ncvkfau","updated":"20241029205606"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"-C /root/mydata"},{"Type":"NodeText","Data":"：切换到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/root/mydata"},{"Type":"NodeText","Data":"​ 目录，方便后续的打包。"}]}]},{"ID":"20241029205606-10tjy2b","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029205606-10tjy2b","updated":"20241029205606"},"Children":[{"ID":"20241029205606-v9wuge7","Type":"NodeParagraph","Properties":{"id":"20241029205606-v9wuge7","updated":"20241029205606"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"mysql"},{"Type":"NodeText","Data":"：表示要打包的目录（这里是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql"},{"Type":"NodeText","Data":"​ 文件夹）"}]}]}]},{"ID":"20241029205649-ytb1vi0","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241029205649-ytb1vi0","updated":"20241029205736"},"Children":[{"Type":"NodeText","Data":"指定tar目录"}]},{"ID":"20241029205736-wq2acdb","Type":"NodeParagraph","Properties":{"id":"20241029205736-wq2acdb","updated":"20241029205736"},"Children":[{"Type":"NodeText","Data":"打包后的 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"tar"},{"Type":"NodeText","Data":"​ 文件将会保存在你执行命令时所在的当前工作目录中。你可以通过指定完整路径来改变存储位置。"}]},{"ID":"20241029205736-kq8wejm","Type":"NodeParagraph","Properties":{"id":"20241029205736-kq8wejm","updated":"20241029205736"},"Children":[{"Type":"NodeText","Data":"如果你想将 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql_backup.tar"},{"Type":"NodeText","Data":"​ 文件保存在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/root/mydata/backups"},{"Type":"NodeText","Data":"​ 目录下，可以使用以下命令："}]},{"ID":"20241029205736-lbwbghz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029205736-lbwbghz","updated":"20241029205736"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"tar -cvf /root/mydata/backups/mysql_backup.tar -C /root/mydata mysql\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029205736-5ofu4km","Type":"NodeParagraph","Properties":{"id":"20241029205736-5ofu4km","updated":"20241029205736"},"Children":[{"Type":"NodeText","Data":"在这个命令中："}]},{"ID":"20241029205736-3z4puon","Type":"NodeList","ListData":{},"Properties":{"id":"20241029205736-3z4puon","updated":"20241029205736"},"Children":[{"ID":"20241029205736-iscm2oy","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029205736-iscm2oy","updated":"20241029205736"},"Children":[{"ID":"20241029205736-xcfx508","Type":"NodeParagraph","Properties":{"id":"20241029205736-xcfx508","updated":"20241029205736"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"/root/mydata/backups/mysql_backup.tar"},{"Type":"NodeText","Data":"：指定了 tar 文件的完整路径，这样它会被保存在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/root/mydata/backups"},{"Type":"NodeText","Data":"​ 目录下。"}]}]}]},{"ID":"20241029205736-3hkwtcb","Type":"NodeParagraph","Properties":{"id":"20241029205736-3hkwtcb","updated":"20241029205736"},"Children":[{"Type":"NodeText","Data":"确保目标目录 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"/root/mydata/backups"},{"Type":"NodeText","Data":"​ 已经存在，如果不存在，可以先创建它："}]},{"ID":"20241029205736-dujrj44","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029205736-dujrj44","updated":"20241029205736"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"mkdir -p /root/mydata/backups\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241029205844-cuejpdk","Type":"NodeParagraph","Properties":{"id":"20241029205844-cuejpdk","updated":"20241029210002"},"Children":[{"Type":"NodeText","Data":"找到当前目录下的tar包，直接整下来"}]},{"ID":"20241029210004-opq4bj1","Type":"NodeParagraph","Properties":{"id":"20241029210004-opq4bj1","updated":"20241029210004"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029210004-jpbwv9w.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029210005-ehn9yqz","Type":"NodeParagraph","Properties":{"id":"20241029210005-ehn9yqz","updated":"20241029210156"},"Children":[{"Type":"NodeText","Data":"华为云下载很慢，可能是流量的限制"}]},{"ID":"20241029210145-zj1rdgc","Type":"NodeParagraph","Properties":{"id":"20241029210145-zj1rdgc","updated":"20241029210145"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029210145-q80wpot.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029210246-9javs56","Type":"NodeParagraph","Properties":{"id":"20241029210246-9javs56","updated":"20241029212256"},"Children":[{"Type":"NodeText","Data":"然后从本地直接拖到新的机器的目录上"}]},{"ID":"20241029212315-7fqlvs4","Type":"NodeParagraph","Properties":{"id":"20241029212315-7fqlvs4","updated":"20241029212315"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029212315-h4iczr0.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029220621-0bd25fj","Type":"NodeParagraph","Properties":{"id":"20241029220621-0bd25fj","updated":"20241029220633"},"Children":[{"Type":"NodeText","Data":"解压还是使用"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"tar"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029212237-2fy55wf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029212237-2fy55wf","updated":"20241029212713"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"[root@localhost ~]# ls\nanaconda-ks.cfg  Desktop    Downloads   HPC_homework  Music             original-ks.cfg  Public       Templates\nc++web           Documents  hello.java  learn         mysql_backup.tar  Pictures         server_test  Videos\n[root@localhost ~]#\n[root@localhost ~]#\n[root@localhost ~]# tar -xvf mysql_backup.tar\n...\n[root@localhost ~]# ls\nanaconda-ks.cfg  Desktop    Downloads   HPC_homework  Music  mysql_backup.tar  Pictures  server_test  Videos\nc++web           Documents  hello.java  learn         mysql  original-ks.cfg   Public    Templates\n[root@localhost ~]# cd mysql/\n[root@localhost mysql]#\n[root@localhost mysql]#\n[root@localhost mysql]#\n[root@localhost mysql]# ls\nconf  data  init\n[root@localhost mysql]#\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029212317-mdtrz4l","Type":"NodeParagraph","Properties":{"id":"20241029212317-mdtrz4l","updated":"20241029212907"},"Children":[{"Type":"NodeText","Data":"放到mydata目录下面，跟之前旧服务器上的一样"}]},{"ID":"20241029215308-osrxoyv","Type":"NodeParagraph","Properties":{"id":"20241029215308-osrxoyv","updated":"20241029215315"},"Children":[{"Type":"NodeText","Data":"使用cp命令"}]},{"ID":"20241029212907-e3226bq","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029212907-e3226bq","updated":"20241029215347"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"[root@localhost ~]# mkdir mydata\n[root@localhost ~]# ls\nanaconda-ks.cfg  Desktop    Downloads   HPC_homework  Music   mysql             original-ks.cfg  Public       Templates\nc++web           Documents  hello.java  learn         mydata  mysql_backup.tar  Pictures         server_test  Videos\n[root@localhost ~]# cp -r mysql mydata/\n[root@localhost ~]#\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029212318-4xy7y6v","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241029212318-4xy7y6v","updated":"20241029220710"},"Children":[{"Type":"NodeText","Data":"cp命令"}]},{"ID":"20241029212318-glu7kt8","Type":"NodeBlockquote","Properties":{"id":"20241029212318-glu7kt8","updated":"20241029220703"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241029220703-hu9dicn","Type":"NodeParagraph","Properties":{"id":"20241029220703-hu9dicn","updated":"20241029220703"},"Children":[{"Type":"NodeText","Data":"目标：当前路径有两个文件夹"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql"},{"Type":"NodeText","Data":"​和"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mydata"},{"Type":"NodeText","Data":"​，要将"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql"},{"Type":"NodeText","Data":"​文件夹拷贝到"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mydata"},{"Type":"NodeText","Data":"​下面。"}]},{"ID":"20241029220703-4cdjsie","Type":"NodeParagraph","Properties":{"id":"20241029220703-4cdjsie","updated":"20241029220703"},"Children":[{"Type":"NodeText","Data":"如果你使用以下命令："}]},{"ID":"20241029220703-lvpg6d7","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029220703-lvpg6d7","updated":"20241029220703"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cp -r mysql mydata/\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029220703-bklku9e","Type":"NodeParagraph","Properties":{"id":"20241029220703-bklku9e","updated":"20241029220703"},"Children":[{"Type":"NodeText","Data":"整个"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql"},{"Type":"NodeText","Data":"​文件夹及其所有内容（包括子文件夹和文件）都会被复制到"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mydata/"},{"Type":"NodeText","Data":"​下面，形成"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mydata/mysql"},{"Type":"NodeText","Data":"​的目录结构。"}]},{"ID":"20241029220703-mjsqhm6","Type":"NodeParagraph","Properties":{"id":"20241029220703-mjsqhm6","updated":"20241029220703"},"Children":[{"Type":"NodeText","Data":"如果你使用下面的命令："}]},{"ID":"20241029220703-58kh2uu","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029220703-58kh2uu","updated":"20241029220703"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cp -r mysql/* mydata/\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029220703-uan21vo","Type":"NodeParagraph","Properties":{"id":"20241029220703-uan21vo","updated":"20241029220703"},"Children":[{"Type":"NodeText","Data":"则会将"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql"},{"Type":"NodeText","Data":"​文件夹中的所有文件和子文件夹直接复制到"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mydata/"},{"Type":"NodeText","Data":"​中，而不会创建"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql"},{"Type":"NodeText","Data":"​子目录。因此，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mydata/"},{"Type":"NodeText","Data":"​将包含"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql"},{"Type":"NodeText","Data":"​中的所有内容，但不会有"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql"},{"Type":"NodeText","Data":"​这个目录。"}]},{"ID":"20241029220703-7t3vlyn","Type":"NodeParagraph","Properties":{"id":"20241029220703-7t3vlyn","updated":"20241029220703"},"Children":[{"Type":"NodeText","Data":"总结："}]},{"ID":"20241029220703-7riywqp","Type":"NodeList","ListData":{},"Properties":{"id":"20241029220703-7riywqp","updated":"20241029220703"},"Children":[{"ID":"20241029220703-qc6nhjz","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029220703-qc6nhjz","updated":"20241029220703"},"Children":[{"ID":"20241029220703-yd44c98","Type":"NodeParagraph","Properties":{"id":"20241029220703-yd44c98","updated":"20241029220703"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cp -r mysql mydata/"},{"Type":"NodeText","Data":"​：创建"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mydata/mysql"},{"Type":"NodeText","Data":"​目录，并将所有内容复制到其中。"}]}]},{"ID":"20241029220703-grj49a4","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241029220703-grj49a4","updated":"20241029220703"},"Children":[{"ID":"20241029220703-lz6z1ak","Type":"NodeParagraph","Properties":{"id":"20241029220703-lz6z1ak","updated":"20241029220703"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"cp -r mysql/* mydata/"},{"Type":"NodeText","Data":"​：直接将"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mysql"},{"Type":"NodeText","Data":"​中的所有文件和子文件夹复制到"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mydata/"},{"Type":"NodeText","Data":"​中。"}]}]}]}]},{"ID":"20241029220700-ic61ea5","Type":"NodeParagraph","Properties":{"id":"20241029220700-ic61ea5","updated":"20241029221016"},"Children":[{"Type":"NodeText","Data":"现在新机器上的挂载目录就弄好了"}]},{"ID":"20241029221017-gmih1yn","Type":"NodeParagraph","Properties":{"id":"20241029221017-gmih1yn","updated":"20241029221017"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 366px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029221017-mzyg0cg.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 366px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029220710-zxpm3vn","Type":"NodeParagraph","Properties":{"id":"20241029220710-zxpm3vn","updated":"20241029220710"}},{"ID":"20241029210147-5ysvwht","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029210147-5ysvwht","updated":"20241102174622"},"Children":[{"Type":"NodeText","Data":"打包MySQL镜像文件"}]},{"ID":"20241029221351-p4j835s","Type":"NodeParagraph","Properties":{"id":"20241029221351-p4j835s","updated":"20241029221403"},"Children":[{"Type":"NodeText","Data":"先暂停容器："}]},{"ID":"20241029221403-ghu7tb4","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029221403-ghu7tb4","updated":"20241029221443"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker pause \u003cmysql_container_name\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029210301-45mk5bq","Type":"NodeParagraph","Properties":{"id":"20241029210301-45mk5bq","updated":"20241029210303"},"Children":[{"Type":"NodeText","Data":"使用命令"}]},{"ID":"20241029210306-zs7ie6y","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029210306-zs7ie6y","updated":"20241029221114"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker save -o mysql_image.tar \u003cmysql_image_name\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241102174606-7jztfvq","Type":"NodeParagraph","Properties":{"id":"20241102174606-7jztfvq","updated":"20241102174622"},"Children":[{"Type":"NodeText","Data":"​​注意后面的是镜像的名字，不是容器的名字"}]},{"ID":"20241102174618-4q5jxtt","Type":"NodeParagraph","Properties":{"id":"20241102174618-4q5jxtt","updated":"20241102174623"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241102174606-28rpayj.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029221120-mhqk174","Type":"NodeParagraph","Properties":{"id":"20241029221120-mhqk174","updated":"20241029221148"},"Children":[{"Type":"NodeText","Data":"查看运行的容器名字，然后打包"}]},{"ID":"20241029221149-3zut09z","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029221149-3zut09z","updated":"20241029221507"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"root@hcss-ecs-32de:~# docker ps\nCONTAINER ID   IMAGE       COMMAND                  CREATED         STATUS         PORTS                                                   NAMES\n2ba0e3398f7e   nginx       \"/docker-entrypoint.…\"   6 months ago    Up 6 months    80/tcp, 0.0.0.0:10089-\u003e10089/tcp, :::10089-\u003e10089/tcp   birth\nc9dc195645d0   nginx       \"/docker-entrypoint.…\"   10 months ago   Up 10 months   80/tcp, 0.0.0.0:8091-\u003e8091/tcp, :::8091-\u003e8091/tcp       nginx_zhiyuan_b\n75048cc36340   zhiyuan81   \"java -jar /app.jar\"     10 months ago   Up 10 months   0.0.0.0:8080-\u003e8080/tcp, :::8080-\u003e8080/tcp               zyjava8\nc9ea65002639   nginx       \"/docker-entrypoint.…\"   10 months ago   Up 10 months   80/tcp, 0.0.0.0:8090-\u003e8090/tcp, :::8090-\u003e8090/tcp       nginx_zhiyuan_f\n348ce2983b41   mysql:5.7   \"docker-entrypoint.s…\"   10 months ago   Up 10 months   0.0.0.0:3306-\u003e3306/tcp, :::3306-\u003e3306/tcp, 33060/tcp    mysql\n809173981dfc   nginx       \"/docker-entrypoint.…\"   11 months ago   Up 11 months   80/tcp, 0.0.0.0:18080-\u003e18080/tcp, :::18080-\u003e18080/tcp   nginx1\nroot@hcss-ecs-32de:~#\nroot@hcss-ecs-32de:~#\nroot@hcss-ecs-32de:~#\nroot@hcss-ecs-32de:~# docker save -o mysql_image.tar mysql\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029221412-sapl78x","Type":"NodeParagraph","Properties":{"id":"20241029221412-sapl78x","updated":"20241029221426"},"Children":[{"Type":"NodeText","Data":"然后可以恢复容器的运行："}]},{"ID":"20241029221426-84n1rih","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029221426-84n1rih","updated":"20241029221455"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker unpause \u003cmysql_container_name\u003e\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029221515-de3zcm0","Type":"NodeParagraph","Properties":{"id":"20241029221515-de3zcm0","updated":"20241029221528"},"Children":[{"Type":"NodeText","Data":"没有暂停也可以，不会报错。"}]},{"ID":"20241029222138-uk036ab","Type":"NodeParagraph","Properties":{"id":"20241029222138-uk036ab","updated":"20241029222138"}},{"ID":"20241029222335-axdcxfv","Type":"NodeParagraph","Properties":{"id":"20241029222335-axdcxfv","updated":"20241029224217"},"Children":[{"Type":"NodeText","Data":"打包后的文件非常大！传输的时候直接给我服务器运行内存占满了，传得很慢很慢。"}]},{"ID":"20241029222501-pg2dk2q","Type":"NodeParagraph","Properties":{"id":"20241029222501-pg2dk2q","updated":"20241029222501"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029222501-hdqz1o5.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029230340-fv3uxce","Type":"NodeParagraph","Properties":{"id":"20241029230340-fv3uxce","updated":"20241029230340"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029230340-0fnhru2.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029222348-b9pl9q5","Type":"NodeBlockquote","Properties":{"id":"20241029222348-b9pl9q5","updated":"20241029222701"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241029222701-nhltzda","Type":"NodeParagraph","Properties":{"id":"20241029222701-nhltzda","updated":"20241029222701"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker save"},{"Type":"NodeText","Data":"​ 生成的 tar 文件可能会比较大，主要有以下几个原因："}]},{"ID":"20241029222701-56wevjb","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241029222701-56wevjb","updated":"20241029222701"},"Children":[{"ID":"20241029222701-2cjgwg6","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241029222701-2cjgwg6","updated":"20241029222701"},"Children":[{"ID":"20241029222701-yqrfsx4","Type":"NodeParagraph","Properties":{"id":"20241029222701-yqrfsx4","updated":"20241029222701"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"镜像层"},{"Type":"NodeText","Data":"：Docker 镜像由多个层（layers）组成，每一层都会包含相关的文件和元数据。所有这些层都会被打包在 tar 文件中，从而导致文件变大。"}]}]},{"ID":"20241029222701-5fllqq5","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241029222701-5fllqq5","updated":"20241029222701"},"Children":[{"ID":"20241029222701-2xtcwuf","Type":"NodeParagraph","Properties":{"id":"20241029222701-2xtcwuf","updated":"20241029222701"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"未压缩"},{"Type":"NodeText","Data":"："},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"docker save"},{"Type":"NodeText","Data":"​ 命令不会对生成的 tar 文件进行压缩。这意味着所有的文件和数据都以原始形式存储，这会占用更多空间。"}]}]},{"ID":"20241029222701-kv99vyz","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241029222701-kv99vyz","updated":"20241029222701"},"Children":[{"ID":"20241029222701-seg8to5","Type":"NodeParagraph","Properties":{"id":"20241029222701-seg8to5","updated":"20241029222701"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"数据卷"},{"Type":"NodeText","Data":"：如果镜像中包含了数据卷的内容（如数据库数据），这些数据可能会占用大量空间，尤其是像 MySQL 这样的数据库，可能存储了大量数据。"}]}]}]},{"ID":"20241029222701-ifu5wdl","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241029222701-ifu5wdl","updated":"20241029222701"},"Children":[{"Type":"NodeText","Data":"解决方法"}]},{"ID":"20241029222701-yq58waq","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241029222701-yq58waq","updated":"20241029222701"},"Children":[{"ID":"20241029222701-z400hdk","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241029222701-z400hdk","updated":"20241029222701"},"Children":[{"ID":"20241029222701-in5wgx1","Type":"NodeParagraph","Properties":{"id":"20241029222701-in5wgx1","updated":"20241029222701"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"压缩文件"},{"Type":"NodeText","Data":"：在生成 tar 文件后，可以使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"gzip"},{"Type":"NodeText","Data":"​ 或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"bzip2"},{"Type":"NodeText","Data":"​ 进行压缩，以减小文件大小。例如："}]},{"ID":"20241029222701-w5bor23","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029222701-w5bor23","updated":"20241029222701"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker save \u003cmysql_image_name\u003e | gzip \u003e mysql_image.tar.gz\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029222701-2nu16tm","Type":"NodeParagraph","Properties":{"id":"20241029222701-2nu16tm","updated":"20241029222701"},"Children":[{"Type":"NodeText","Data":"这样生成的文件将更小。"}]}]},{"ID":"20241029222701-lsiqoai","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241029222701-lsiqoai","updated":"20241029222701"},"Children":[{"ID":"20241029222701-xzs2oai","Type":"NodeParagraph","Properties":{"id":"20241029222701-xzs2oai","updated":"20241029222701"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"检查数据"},{"Type":"NodeText","Data":"：确认镜像中包含的数据是否必要。如果你只需要某些特定的数据，可以考虑只保存那些数据，而不是整个镜像。"}]}]},{"ID":"20241029222701-zp7woou","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241029222701-zp7woou","updated":"20241029222701"},"Children":[{"ID":"20241029222701-m3wl4d0","Type":"NodeParagraph","Properties":{"id":"20241029222701-m3wl4d0","updated":"20241029222701"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"清理未使用的镜像和层"},{"Type":"NodeText","Data":"：可以使用以下命令清理未使用的镜像和数据层，以减小整体大小："}]},{"ID":"20241029222701-5c79zq2","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029222701-5c79zq2","updated":"20241029222701"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker system prune\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029222701-8dmge07","Type":"NodeParagraph","Properties":{"id":"20241029222701-8dmge07","updated":"20241029222701"},"Children":[{"Type":"NodeText","Data":"这个命令会删除所有未使用的容器、网络和悬空的镜像。"}]}]}]},{"ID":"20241029222701-psifsng","Type":"NodeParagraph","Properties":{"id":"20241029222701-psifsng","updated":"20241029222701"},"Children":[{"Type":"NodeText","Data":"通过这些方法，你可以减小生成的 tar 文件的大小。如果你还有其他问题，请告诉我！"}]}]},{"ID":"20241029222336-wt2jesj","Type":"NodeParagraph","Properties":{"id":"20241029222336-wt2jesj","updated":"20241029222336"}},{"ID":"20241029221559-2m1syd1","Type":"NodeParagraph","Properties":{"id":"20241029221559-2m1syd1","updated":"20241029222243"},"Children":[{"Type":"NodeText","Data":"接下来还是将tar拷到本机上，然后再传到新的服务器上。另外这个终端可以直接拖拽文件到本机文件夹，非常方便。"}]},{"ID":"20241029234251-796l7qn","Type":"NodeParagraph","Properties":{"id":"20241029234251-796l7qn","updated":"20241029234251"}},{"ID":"20241029234251-2gh2wwp","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029234251-2gh2wwp","updated":"20241029235403"},"Children":[{"Type":"NodeText","Data":"部署镜像文件"}]},{"ID":"20241029234312-a3a1x2b","Type":"NodeParagraph","Properties":{"id":"20241029234312-a3a1x2b","updated":"20241029234528"},"Children":[{"Type":"NodeText","Data":"导入保存的镜像文件，这里是在当前路径操作的，不然要写全路径"}]},{"ID":"20241029234500-wk5pamo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029234500-wk5pamo","updated":"20241029234513"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker load -i mysql_image.tar\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029223446-oxke0kb","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029223446-oxke0kb","updated":"20241029234657"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"[root@localhost ~]# docker load -i mysql_image.tar\ncff044e18624: Loading layer [==================================================\u003e]    145MB/145MB\n7ff7abf4911b: Loading layer [==================================================\u003e]  11.26kB/11.26kB\n8b2952eb02aa: Loading layer [==================================================\u003e]  2.383MB/2.383MB\nd76a5f910f6b: Loading layer [==================================================\u003e]  13.91MB/13.91MB\n8527ccd6bd85: Loading layer [==================================================\u003e]  7.168kB/7.168kB\n4555572a6bb2: Loading layer [==================================================\u003e]  3.072kB/3.072kB\n0d9e9a9ce9e4: Loading layer [==================================================\u003e]  79.38MB/79.38MB\n532b66f4569d: Loading layer [==================================================\u003e]  3.072kB/3.072kB\n337ec6bae222: Loading layer [==================================================\u003e]  278.8MB/278.8MB\n73cb62467b8f: Loading layer [==================================================\u003e]  17.41kB/17.41kB\n441e16cac4fe: Loading layer [==================================================\u003e]  1.536kB/1.536kB\nLoaded image: mysql:5.7\nd87ce14fed78: Loading layer [==================================================\u003e]  118.8MB/118.8MB\n805c4ad62bbd: Loading layer [==================================================\u003e]  11.26kB/11.26kB\n9166c8be8ddc: Loading layer [==================================================\u003e]  2.359MB/2.359MB\nf8ee6fd60415: Loading layer [==================================================\u003e]  13.84MB/13.84MB\n7d6226d7a694: Loading layer [==================================================\u003e]  6.656kB/6.656kB\n7242463c3e84: Loading layer [==================================================\u003e]  3.072kB/3.072kB\nd30c9e468341: Loading layer [==================================================\u003e]  199.9MB/199.9MB\nbea7023e9dd9: Loading layer [==================================================\u003e]  3.072kB/3.072kB\n8bb27dddf553: Loading layer [==================================================\u003e]  299.5MB/299.5MB\ne4ee9c43adca: Loading layer [==================================================\u003e]   16.9kB/16.9kB\nLoaded image: mysql:latest\n[root@localhost ~]#\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029234650-gjxcx9e","Type":"NodeParagraph","Properties":{"id":"20241029234650-gjxcx9e","updated":"20241029234650"}},{"ID":"20241029234818-i8ki6u6","Type":"NodeParagraph","Properties":{"id":"20241029234818-i8ki6u6","updated":"20241029234818"},"Children":[{"Type":"NodeText","Data":"创建MySQL容器："}]},{"ID":"20241029234818-qx2rrlz","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029234818-qx2rrlz","updated":"20241029234822"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run -d \\\n  --name mysql \\\n  -p 3306:3306 \\\n  -e TZ=Asia/Shanghai \\\n  -e MYSQL_ROOT_PASSWORD=pengyumingxrpsy2003 \\\n  -v /root/mydata/mysql/data:/var/lib/mysql \\\n  -v /root/mydata/mysql/conf:/etc/mysql/conf.d \\\n  -v /root/mydata/mysql/init:/docker-entrypoint-initdb.d \\\n  mysql:5.7\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029234742-z5rym6m","Type":"NodeParagraph","Properties":{"id":"20241029234742-z5rym6m","updated":"20241029234939"},"Children":[{"Type":"NodeText","Data":"这样就创建成功了"}]},{"ID":"20241029234940-fnbsb2v","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241029234940-fnbsb2v","updated":"20241029234956"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"[root@localhost ~]# docker run -d \\\n\u003e   --name mysql \\\n\u003e   -p 3306:3306 \\\n\u003e   -e TZ=Asia/Shanghai \\\n\u003e   -e MYSQL_ROOT_PASSWORD=pengyumingxrpsy2003 \\\n\u003e   -v /root/mydata/mysql/data:/var/lib/mysql \\\n\u003e   -v /root/mydata/mysql/conf:/etc/mysql/conf.d \\\n\u003e   -v /root/mydata/mysql/init:/docker-entrypoint-initdb.d \\\n\u003e   mysql:5.7\nce08686c6d29edc30b94a27507e29d90034b620346f80d043b5ac4d62d519370\n[root@localhost ~]#\n[root@localhost ~]# docker ps\nCONTAINER ID   IMAGE       COMMAND                  CREATED         STATUS         PORTS                                                  NAMES\nce08686c6d29   mysql:5.7   \"docker-entrypoint.s…\"   8 seconds ago   Up 7 seconds   0.0.0.0:3306-\u003e3306/tcp, :::3306-\u003e3306/tcp, 33060/tcp   mysql\n[root@localhost ~]#\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241029234742-npf1zao","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029234742-npf1zao","updated":"20241029235810"},"Children":[{"Type":"NodeText","Data":"连接navcat"}]},{"ID":"20241029235009-yc74job","Type":"NodeParagraph","Properties":{"id":"20241029235009-yc74job","updated":"20241029235359"},"Children":[{"Type":"NodeText","Data":"接下来用navcat连一下看看"}]},{"ID":"20241029235700-kr7g3aj","Type":"NodeParagraph","Properties":{"id":"20241029235700-kr7g3aj","updated":"20241029235700"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029235659-gn4n4ak.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029235422-blisdhh","Type":"NodeParagraph","Properties":{"id":"20241029235422-blisdhh","updated":"20241029235730"},"Children":[{"Type":"NodeText","Data":"可以了"}]},{"ID":"20241029235732-1gritpw","Type":"NodeParagraph","Properties":{"id":"20241029235732-1gritpw","updated":"20241029235732"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029235732-3nzisg0.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029235403-lsfu4qp","Type":"NodeParagraph","Properties":{"id":"20241029235403-lsfu4qp","updated":"20241029235403"}},{"ID":"20241029235810-xhuzpfc","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029235810-xhuzpfc","updated":"20241029235009"},"Children":[{"Type":"NodeText","Data":"总结"}]},{"ID":"20241029235814-vbrk0qx","Type":"NodeParagraph","Properties":{"id":"20241029235814-vbrk0qx","updated":"20241029235927"},"Children":[{"Type":"NodeText","Data":"总的来说还是比较顺利的，就是传输MySQL的镜像文件的时候花太多时间了，因此下次试试看另一种打包方式。"}]},{"ID":"20241029235009-09shsoh","Type":"NodeParagraph","Properties":{"id":"20241029235009-09shsoh","updated":"20241029235009"}},{"ID":"20241029223451-92ynlfn","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241029223451-92ynlfn","updated":"20241030235518"},"Children":[{"Type":"NodeText","Data":"华为云机器情况"}]},{"ID":"20241029223713-rgvc8n3","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029223713-rgvc8n3","updated":"20241029223724"},"Children":[{"Type":"NodeText","Data":"机器情况"}]},{"ID":"20241029223505-95wcs6d","Type":"NodeParagraph","Properties":{"id":"20241029223505-95wcs6d","updated":"20241029223610"},"Children":[{"Type":"NodeText","Data":"旧机器（华为云服务器2h+2g+40G）"}]},{"ID":"20241029223637-seqc0i6","Type":"NodeParagraph","Properties":{"id":"20241029223637-seqc0i6","updated":"20241029223637"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029223636-9yyyfx1.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029223653-9njmnn3","Type":"NodeParagraph","Properties":{"id":"20241029223653-9njmnn3","updated":"20241029223653"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029223653-b8pb01y.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029223654-jfkks6s","Type":"NodeParagraph","Properties":{"id":"20241029223654-jfkks6s","updated":"20241029223704"},"Children":[{"Type":"NodeText","Data":"新机器（本地虚拟机）"}]},{"ID":"20241029223724-83hqwwi","Type":"NodeParagraph","Properties":{"id":"20241029223724-83hqwwi","updated":"20241029223724"}},{"ID":"20241029223724-ds027d2","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029223724-ds027d2","updated":"20241030235531"},"Children":[{"Type":"NodeText","Data":"目录"}]},{"ID":"20241029223747-8emrjbp","Type":"NodeParagraph","Properties":{"id":"20241029223747-8emrjbp","updated":"20241029223943"},"Children":[{"Type":"NodeText","Data":"华为云服务器"}]},{"ID":"20241029223944-cufl1bh","Type":"NodeParagraph","Properties":{"id":"20241029223944-cufl1bh","updated":"20241029223944"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029223944-vjy5s05.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029223946-0xs3yw7","Type":"NodeParagraph","Properties":{"id":"20241029223946-0xs3yw7","updated":"20241029224039"},"Children":[{"Type":"NodeText","Data":"本地服务器"}]},{"ID":"20241029224040-p38z72q","Type":"NodeParagraph","Properties":{"id":"20241029224040-p38z72q","updated":"20241029224040"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241029224040-qpkbben.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029224106-hpk42qx","Type":"NodeParagraph","Properties":{"id":"20241029224106-hpk42qx","updated":"20241029224106"}},{"ID":"20241030235531-xf665h0","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241030235531-xf665h0","updated":"20241030235613"},"Children":[{"Type":"NodeText","Data":"docker情况"}]},{"ID":"20241030235539-tfehy57","Type":"NodeParagraph","Properties":{"id":"20241030235539-tfehy57","updated":"20241030235548"},"Children":[{"Type":"NodeText","Data":"docker ps"}]},{"ID":"20241030235549-7fxry3z","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241030235549-7fxry3z","updated":"20241030235553"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"root@hcss-ecs-32de:~# docker ps\nCONTAINER ID   IMAGE       COMMAND                  CREATED         STATUS         PORTS                                                   NAMES\n2ba0e3398f7e   nginx       \"/docker-entrypoint.…\"   6 months ago    Up 6 months    80/tcp, 0.0.0.0:10089-\u003e10089/tcp, :::10089-\u003e10089/tcp   birth\nc9dc195645d0   nginx       \"/docker-entrypoint.…\"   10 months ago   Up 10 months   80/tcp, 0.0.0.0:8091-\u003e8091/tcp, :::8091-\u003e8091/tcp       nginx_zhiyuan_b\n75048cc36340   zhiyuan81   \"java -jar /app.jar\"     10 months ago   Up 10 months   0.0.0.0:8080-\u003e8080/tcp, :::8080-\u003e8080/tcp               zyjava8\nc9ea65002639   nginx       \"/docker-entrypoint.…\"   10 months ago   Up 10 months   80/tcp, 0.0.0.0:8090-\u003e8090/tcp, :::8090-\u003e8090/tcp       nginx_zhiyuan_f\n348ce2983b41   mysql:5.7   \"docker-entrypoint.s…\"   10 months ago   Up 10 months   0.0.0.0:3306-\u003e3306/tcp, :::3306-\u003e3306/tcp, 33060/tcp    mysql\n809173981dfc   nginx       \"/docker-entrypoint.…\"   11 months ago   Up 11 months   80/tcp, 0.0.0.0:18080-\u003e18080/tcp, :::18080-\u003e18080/tcp   nginx1\nroot@hcss-ecs-32de:~#\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241030235526-ulkpzvx","Type":"NodeParagraph","Properties":{"id":"20241030235526-ulkpzvx","updated":"20241030235526"}},{"ID":"20241030235557-q8yapwp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241030235557-q8yapwp","updated":"20241030235613"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"root@hcss-ecs-32de:~# docker ps -a\nCONTAINER ID   IMAGE       COMMAND                  CREATED         STATUS         PORTS                                                   NAMES\n2ba0e3398f7e   nginx       \"/docker-entrypoint.…\"   6 months ago    Up 6 months    80/tcp, 0.0.0.0:10089-\u003e10089/tcp, :::10089-\u003e10089/tcp   birth\nfadc775ae38e   nginx       \"/docker-entrypoint.…\"   6 months ago    Created        80/tcp, 0.0.0.0:10089-\u003e10089/tcp, :::10089-\u003e10089/tcp   nginx_birt\nfb53255beb10   nginx       \"/docker-entrypoint.…\"   6 months ago    Created        80/tcp, 0.0.0.0:8089-\u003e8089/tcp, :::8089-\u003e8089/tcp       nginx_birth\nc9dc195645d0   nginx       \"/docker-entrypoint.…\"   10 months ago   Up 10 months   80/tcp, 0.0.0.0:8091-\u003e8091/tcp, :::8091-\u003e8091/tcp       nginx_zhiyuan_b\n75048cc36340   zhiyuan81   \"java -jar /app.jar\"     10 months ago   Up 10 months   0.0.0.0:8080-\u003e8080/tcp, :::8080-\u003e8080/tcp               zyjava8\nc9ea65002639   nginx       \"/docker-entrypoint.…\"   10 months ago   Up 10 months   80/tcp, 0.0.0.0:8090-\u003e8090/tcp, :::8090-\u003e8090/tcp       nginx_zhiyuan_f\n348ce2983b41   mysql:5.7   \"docker-entrypoint.s…\"   10 months ago   Up 10 months   0.0.0.0:3306-\u003e3306/tcp, :::3306-\u003e3306/tcp, 33060/tcp    mysql\n809173981dfc   nginx       \"/docker-entrypoint.…\"   11 months ago   Up 11 months   80/tcp, 0.0.0.0:18080-\u003e18080/tcp, :::18080-\u003e18080/tcp   nginx1\nroot@hcss-ecs-32de:~#\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241030235526-etmkz8q","Type":"NodeParagraph","Properties":{"id":"20241030235526-etmkz8q","updated":"20241030235526"}},{"ID":"20241030224306-qd7pqbe","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241030224306-qd7pqbe","updated":"20241030224510"},"Children":[{"Type":"NodeText","Data":"推荐的挂载管理🌸🌸"}]},{"ID":"20241030224306-oe7ivxe","Type":"NodeParagraph","Properties":{"id":"20241030224306-oe7ivxe","updated":"20241030224349"},"Children":[{"Type":"NodeText","Data":"如图"}]},{"ID":"20241030224346-k6q6nzs","Type":"NodeParagraph","Properties":{"id":"20241030224346-k6q6nzs","updated":"20241030224346"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241030224346-01nw15p.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241030224307-sjm12x3","Type":"NodeParagraph","Properties":{"id":"20241030224307-sjm12x3","updated":"20241030224425"},"Children":[{"Type":"NodeText","Data":"这样方便迁移所有的挂载目录，直接把mydata整个打成tar包"}]},{"ID":"20241030224353-wre62yz","Type":"NodeParagraph","Properties":{"id":"20241030224353-wre62yz","updated":"20241030224353"}},{"ID":"20241030181631-k3oczrw","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241030181631-k3oczrw","updated":"20241030232358"},"Children":[{"Type":"NodeText","Data":"实际操作-迁移NGINX🚩"}]},{"ID":"20241030232138-hfmns8t","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241030232138-hfmns8t","updated":"20241030232330"},"Children":[{"Type":"NodeText","Data":"迁移整个挂载文件夹"}]},{"ID":"20241030181827-cu0r00k","Type":"NodeParagraph","Properties":{"id":"20241030181827-cu0r00k","updated":"20241030181827"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241030181827-prqjpnb.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241030181657-gi9zbp8","Type":"NodeParagraph","Properties":{"id":"20241030181657-gi9zbp8","style":"color: var(--b3-card-success-color);background-color: var(--b3-card-success-background);","updated":"20241030181747"},"Children":[{"Type":"NodeText","Data":"直接打包华为云服务器上的整个挂载文件夹，所有挂载目录都在mydata文件夹下，直接打包mydata就可以了"}]},{"ID":"20241030182014-ox4fu4s","Type":"NodeParagraph","Properties":{"id":"20241030182014-ox4fu4s","updated":"20241030182033"},"Children":[{"Type":"NodeText","Data":"在mydata同目录打包："}]},{"ID":"20241030181750-06sdxly","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241030181750-06sdxly","updated":"20241030181859"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"tar -cvf mydata_backup.tar mydata\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241030181901-t2h45ks","Type":"NodeParagraph","Properties":{"id":"20241030181901-t2h45ks","updated":"20241030181957"},"Children":[{"Type":"NodeText","Data":"然后下载到本机上，在拷到新主机中"}]},{"ID":"20241030181959-1x03lln","Type":"NodeParagraph","Properties":{"id":"20241030181959-1x03lln","updated":"20241030221945"},"Children":[{"Type":"NodeText","Data":"解压到当前路径"}]},{"ID":"20241030225325-3k1tsq0","Type":"NodeList","ListData":{},"Properties":{"id":"20241030225325-3k1tsq0","updated":"20241030225723"},"Children":[{"ID":"20241030225536-om5dxdl","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20241030225536-om5dxdl","updated":"20241030225723"},"Children":[{"ID":"20241030225536-7cs0eq6","Type":"NodeParagraph","Properties":{"id":"20241030225536-7cs0eq6","style":"color: var(--b3-card-info-color);background-color: var(--b3-card-info-background);","updated":"20241030225536"},"Children":[{"Type":"NodeText","Data":"可以先用这个命令看看压缩包里面是什么"}]},{"ID":"20241030225709-4gp5dal","Type":"NodeParagraph","Properties":{"id":"20241030225709-4gp5dal","updated":"20241030225723"},"Children":[{"Type":"NodeText","Data":"第一个是查看命令，第二个是解压缩命令"}]},{"ID":"20241030225626-v00k6jk","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241030225626-v00k6jk","updated":"20241030225635"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"[root@localhost ~]# tar -tf beifen_backup.tar\nbeifen/\nbeifen/html/\nbeifen/html/ditu.html\nbeifen/nginx.conf\n[root@localhost ~]#\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241030225645-o2nyqg9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241030225645-o2nyqg9","updated":"20241030225645"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"[root@localhost ~]# tar -xvf beifen_backup.tar\nbeifen/\nbeifen/html/\nbeifen/html/ditu.html\nbeifen/nginx.conf\n[root@localhost ~]#\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241030225336-hjv941j","Type":"NodeParagraph","Properties":{"id":"20241030225336-hjv941j","updated":"20241030225547"},"Children":[{"Type":"NodeText","Data":"是这个压缩包"}]},{"ID":"20241030225359-uk8i0yp","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241030225359-uk8i0yp","updated":"20241030225413"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":" tar -xvf mydata_backup.tar\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241030225442-baagewj","Type":"NodeParagraph","Properties":{"id":"20241030225442-baagewj","updated":"20241030225929"},"Children":[{"Type":"NodeText","Data":"现在新的主机上就有完整的挂载目录"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"mydata"},{"Type":"NodeText","Data":"​了！所有容器的挂载目录都在这里！容器导进来可以直接挂载！这就是统一管理挂载目录的好处！（看看"},{"Type":"NodeTextMark","TextMarkType":"block-ref","TextMarkBlockRefID":"20241030224306-qd7pqbe","TextMarkBlockRefSubtype":"d","TextMarkTextContent":"推荐的挂载管理🌸🌸"},{"Type":"NodeText","Data":"）"}]},{"ID":"20241030222038-zcbacbn","Type":"NodeParagraph","Properties":{"id":"20241030222038-zcbacbn","updated":"20241030222038"}},{"ID":"20241030232216-vkkbnxz","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241030232216-vkkbnxz","updated":"20241102171835"},"Children":[{"Type":"NodeText","Data":"docker export导出容器镜像"}]},{"ID":"20241030221832-irswo4q","Type":"NodeParagraph","Properties":{"id":"20241030221832-irswo4q","updated":"20241030222057"},"Children":[{"Type":"NodeText","Data":"现在采用第二种方法导出容器"}]},{"ID":"20241030221832-5gw6t69","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241030221832-5gw6t69","updated":"20241102171835"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker export -o nginx_birth.tar birth\n\ndocker export -o zy_b_img.tar nginx_zhiyuan_b\n\ndocker export -o myredis1_img.tar myredis1\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241030222236-84jmqxj","Type":"NodeParagraph","Properties":{"id":"20241030222236-84jmqxj","updated":"20241030222244"},"Children":[{"Type":"NodeText","Data":"导出的速度很快"}]},{"ID":"20241030222226-xf978oz","Type":"NodeParagraph","Properties":{"id":"20241030222226-xf978oz","updated":"20241030222226"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241030222226-ogvd4dg.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241030222232-w3awkp8","Type":"NodeParagraph","Properties":{"id":"20241030222232-w3awkp8","updated":"20241030222326"},"Children":[{"Type":"NodeText","Data":"可以看到镜像文件也小一些"}]},{"ID":"20241030222327-6o8bsty","Type":"NodeParagraph","Properties":{"id":"20241030222327-6o8bsty","updated":"20241030222327"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241030222327-pv90q74.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241030232245-4ni3bmv","Type":"NodeParagraph","Properties":{"id":"20241030232245-4ni3bmv","updated":"20241030232245"}},{"ID":"20241030232247-0erfblf","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241030232247-0erfblf","updated":"20241102173451"},"Children":[{"Type":"NodeText","Data":"导入容器镜像"}]},{"ID":"20241030181927-om6a5pn","Type":"NodeParagraph","Properties":{"id":"20241030181927-om6a5pn","updated":"20241102173451"},"Children":[{"Type":"NodeText","Data":"现在把镜像弄到新的服务器上去，并给它导入，使用命令"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"（注意要在镜像tar包所在的目录操作）"},{"Type":"NodeText","Data":"："}]},{"ID":"20241030225023-v3fo3zi","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241030225023-v3fo3zi","updated":"20241030233303"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"cat nginx_birth.tar | docker import - nginx_birth\n\ncat zy_f_img.tar | docker import - zy_f_img\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241030222352-noad7qu","Type":"NodeParagraph","Properties":{"id":"20241030222352-noad7qu","updated":"20241030230055"},"Children":[{"Type":"NodeText","Data":"这将创建一个名为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"nginx_birth"},{"Type":"NodeText","Data":"​ 的"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"新镜像"},{"Type":"NodeText","Data":"。"}]},{"ID":"20241030232316-qsfjqr2","Type":"NodeParagraph","Properties":{"id":"20241030232316-qsfjqr2","updated":"20241030232316"}},{"ID":"20241030230057-tr6rojt","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241030230057-tr6rojt","updated":"20241031001811"},"Children":[{"Type":"NodeText","Data":"使用镜像创建容器"}]},{"ID":"20241030230058-hx3ygtw","Type":"NodeParagraph","Properties":{"id":"20241030230058-hx3ygtw","updated":"20241030230124"},"Children":[{"Type":"NodeText","Data":"现在用这个镜像创建容器："}]},{"ID":"20241030230125-l00lulg","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241030230125-l00lulg","updated":"20241030231125"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run -d --name nginx_birth \\\n  -p 10089:10089 \\\n  -v /root/mydata/nginx/birthday/html:/usr/share/nginx/html \\\n  -v /root/mydata/nginx/birthday/nginx.conf:/etc/nginx/nginx.conf \\\n  nginx_birth \\\n  nginx -g 'daemon off;'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241030233314-daob439","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241030233314-daob439","updated":"20241030233514"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run -d \\\n  --name nginx_zhiyuan_b \\\n  -p 8091:8091 \\\n  -v /root/mydata/nginx/nginx_zhiyuan_backend/html:/usr/share/nginx/html \\\n  -v /root/mydata/nginx/nginx_zhiyuan_backend/nginx.conf:/etc/nginx/nginx.conf \\\n  zy_b_img \\\n  nginx -g 'daemon off;'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241030233315-fc9w432","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241030233315-fc9w432","updated":"20241030233757"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"docker run -d \\\n  --name nginx_zhiyuan_f \\\n  -p 8090:8090 \\\n  -v /root/mydata/nginx/nginx_zhiyuan_front/html:/usr/share/nginx/html \\\n  -v /root/mydata/nginx/nginx_zhiyuan_front/nginx.conf:/etc/nginx/nginx.conf \\\n  zy_f_img \\\n  nginx -g 'daemon off;'\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241030222335-oxk5oq0","Type":"NodeParagraph","Properties":{"id":"20241030222335-oxk5oq0","updated":"20241030231440"},"Children":[{"Type":"NodeText","Data":"完成了："}]},{"ID":"20241030231441-i7bog1y","Type":"NodeParagraph","Properties":{"id":"20241030231441-i7bog1y","updated":"20241030231441"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241030231441-y2qt5em.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241030231442-ic2d795","Type":"NodeParagraph","Properties":{"id":"20241030231442-ic2d795","updated":"20241030232125"},"Children":[{"Type":"NodeText","Data":"在浏览器里看看，nginx部署的网页可以正常看到。"}]},{"ID":"20241030232340-bta2y8r","Type":"NodeParagraph","Properties":{"id":"20241030232340-bta2y8r","updated":"20241030232340"}},{"ID":"20241031001811-uc2pt04","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241031001811-uc2pt04","updated":"20241031143432"},"Children":[{"Type":"NodeText","Data":"迁移Java？"}]},{"ID":"20241031142232-e9l6rl6","Type":"NodeParagraph","Properties":{"id":"20241031142232-e9l6rl6","updated":"20241031142741"},"Children":[{"Type":"NodeText","Data":"这里最开始没搞明白，本地虚拟机中只有前端容器，打开仍然可以查到数据，说明华为云的后端还在。试着把华为云的后端停掉后，前端果然看不到数据了。"}]},{"ID":"20241031001935-1x6b0uy","Type":"NodeParagraph","Properties":{"id":"20241031001935-1x6b0uy","updated":"20241031143028"},"Children":[{"Type":"NodeText","Data":"但是前端的请求路径写的是"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"localhost:8080"},{"Type":"NodeText","Data":"​，应该请求的是虚拟机的8080端口啊，怎么会请求到华为云主机上去呢。开始我以为是前端转发路径写错了："}]},{"ID":"20241031002029-qtkfsv0","Type":"NodeParagraph","Properties":{"id":"20241031002029-qtkfsv0","updated":"20241031002029"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031002029-40dlj4m.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031002031-ufdbzbp","Type":"NodeParagraph","Properties":{"id":"20241031002031-ufdbzbp","updated":"20241031143034"},"Children":[{"Type":"NodeText","Data":"实际上NGINX配置文件中也写了转发到后端的地址："}]},{"ID":"20241031002130-ysyooea","Type":"NodeParagraph","Properties":{"id":"20241031002130-ysyooea","updated":"20241031002130"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031002130-mpei155.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031002131-c8njqu9","Type":"NodeParagraph","Properties":{"id":"20241031002131-c8njqu9","updated":"20241031143108"},"Children":[{"Type":"NodeText","Data":"所以NGINX将请求转发给后端华为云服务器了。"}]},{"ID":"20241031143038-6w2u1z7","Type":"NodeParagraph","Properties":{"id":"20241031143038-6w2u1z7","updated":"20241031143038"}},{"ID":"20241031002133-x4nfm7f","Type":"NodeParagraph","Properties":{"id":"20241031002133-x4nfm7f","updated":"20241031002137"},"Children":[{"Type":"NodeText","Data":"解决方法"}]},{"ID":"20241031002138-76y6a2i","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241031002138-76y6a2i","updated":"20241031143334"},"Children":[{"ID":"20241031002140-82b4eu9","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241031002140-82b4eu9","updated":"20241031143231"},"Children":[{"ID":"20241031002140-u4l5mts","Type":"NodeParagraph","Properties":{"id":"20241031002140-u4l5mts","updated":"20241031143214"},"Children":[{"Type":"NodeText","Data":"后端项目的配置文件中，数据库地址改成localhost，然后重新打包jar"}]},{"ID":"20241031143231-s5x859s","Type":"NodeParagraph","Properties":{"id":"20241031143231-s5x859s","updated":"20241031143231"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031143231-mtxh3c7.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20241031002217-7rghets","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241031002217-7rghets","updated":"20241031143334"},"Children":[{"ID":"20241031002217-wtp1t18","Type":"NodeParagraph","Properties":{"id":"20241031002217-wtp1t18","updated":"20241031143334"},"Children":[{"Type":"NodeText","Data":"前端只改nginx.conf中的后端位置就行，直接在挂载目录里面改，同样改为localhost"}]}]}]},{"ID":"20241031002242-tj872mu","Type":"NodeParagraph","Properties":{"id":"20241031002242-tj872mu","updated":"20241031002242"}},{"ID":"20241031143342-4itqn3o","Type":"NodeParagraph","Properties":{"id":"20241031143342-4itqn3o","updated":"20241031143355"},"Children":[{"Type":"NodeText","Data":"暂时就不做了"}]},{"ID":"20241031143406-6u40zkv","Type":"NodeParagraph","Properties":{"id":"20241031143406-6u40zkv","updated":"20241031143406"}}]}