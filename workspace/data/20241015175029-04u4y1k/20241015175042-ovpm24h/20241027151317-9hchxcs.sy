{"ID":"20241027151317-9hchxcs","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241027151317-9hchxcs","title":"Springboot配置文件属性类","type":"doc","updated":"20241031162627"},"Children":[{"ID":"20241027151317-j8s3w6d","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241027151317-j8s3w6d","updated":"20241031162612"},"Children":[{"Type":"NodeText","Data":"简介"}]},{"ID":"20241031162226-hy827rx","Type":"NodeParagraph","Properties":{"id":"20241031162226-hy827rx","updated":"20241031162612"},"Children":[{"Type":"NodeText","Data":"在项目中可以看到"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"properties"},{"Type":"NodeText","Data":"​包，里面放着的就是SpringBoot相关的配置属性类："}]},{"ID":"20241031162536-kb2ztwn","Type":"NodeParagraph","Properties":{"id":"20241031162536-kb2ztwn","updated":"20241031162557"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031162536-5my5mtu.png"},{"Type":"NodeLinkSpace"},{"Type":"NodeLinkTitle","Data":"配置文件属性类"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031162226-978s8yz","Type":"NodeParagraph","Properties":{"id":"20241031162226-978s8yz","updated":"20241031162226"}},{"ID":"20241027151405-pdbvi29","Type":"NodeParagraph","Properties":{"id":"20241027151405-pdbvi29","updated":"20241027151422"},"Children":[{"Type":"NodeText","Data":"在 Spring Boot 中，配置文件属性类通常用于将"},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"配置文件中的键值对"},{"Type":"NodeText","Data":"映射到"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"mark","TextMarkTextContent":"Java 对象"},{"Type":"NodeText","Data":"中。这使得配置的管理和使用变得更加简便和结构化。下面是一些关键点："}]},{"ID":"20241027151405-bhlm30r","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241027151405-bhlm30r","updated":"20241027153113"},"Children":[{"ID":"20241027151405-temuwoc","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241027151405-temuwoc","updated":"20241027151405"},"Children":[{"ID":"20241027151405-28koura","Type":"NodeParagraph","Properties":{"id":"20241027151405-28koura","updated":"20241027151405"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"配置文件"},{"Type":"NodeText","Data":"：\nSpring Boot 支持多种配置文件格式，主要是 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"application.properties"},{"Type":"NodeText","Data":"​ 和 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"application.yml"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241027151405-p2mwhaq","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241027151405-p2mwhaq","updated":"20241027151517"},"Children":[{"ID":"20241027151405-3f6tuj0","Type":"NodeParagraph","Properties":{"id":"20241027151405-3f6tuj0","updated":"20241027151517"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"属性类"},{"Type":"NodeText","Data":"：\n属性类是一个普通的 Java 类，其中用来绑定和存储配置文件中的属性。这些类通常"},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"使用"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"code strong","TextMarkTextContent":"@ConfigurationProperties"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"注解"},{"Type":"NodeText","Data":"。"}]}]},{"ID":"20241027151405-zz9pen4","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241027151405-zz9pen4","updated":"20241027153113"},"Children":[{"ID":"20241027151405-hok5ok9","Type":"NodeParagraph","Properties":{"id":"20241027151405-hok5ok9","updated":"20241027151405"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"strong code","TextMarkTextContent":"@ConfigurationProperties"},{"Type":"NodeText","Data":"​ "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"注解"},{"Type":"NodeText","Data":"："}]},{"ID":"20241027153113-s9upow9","Type":"NodeParagraph","Properties":{"id":"20241027153113-s9upow9","updated":"20241027153113"},"Children":[{"Type":"NodeText","Data":"这个注解用于将类中的字段与配置文件中的属性绑定。它通常与 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Component"},{"Type":"NodeText","Data":"​ 或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@EnableConfigurationProperties"},{"Type":"NodeText","Data":"​ 一起使用。"}]},{"ID":"20241027151405-72lrm7a","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241027151405-72lrm7a","updated":"20241027151405"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Component\n@ConfigurationProperties(prefix = \"myapp\")\npublic class MyAppProperties {\n    private String name;\n    private int timeout;\n\n    // getters and setters\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241027151405-9972ed9","Type":"NodeParagraph","Properties":{"id":"20241027151405-9972ed9","updated":"20241027151405"},"Children":[{"Type":"NodeText","Data":"在上面的例子中，配置文件中可能有以下内容："}]},{"ID":"20241027151405-1b63glo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241027151405-1b63glo","updated":"20241027151405"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"cHJvcGVydGllcw=="},{"Type":"NodeCodeBlockCode","Data":"myapp.name=ExampleApp\nmyapp.timeout=30\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241027151405-ze8yctz","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241027151405-ze8yctz","updated":"20241027151405"},"Children":[{"ID":"20241027151405-zpr9zig","Type":"NodeParagraph","Properties":{"id":"20241027151405-zpr9zig","updated":"20241027151405"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"使用"},{"Type":"NodeText","Data":" "},{"Type":"NodeTextMark","TextMarkType":"strong code","TextMarkTextContent":"@EnableConfigurationProperties"},{"Type":"NodeText","Data":"​：\n如果不想将属性类标记为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Component"},{"Type":"NodeText","Data":"​，可以在配置类中使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@EnableConfigurationProperties"},{"Type":"NodeText","Data":"​ 注解来启用属性类。"}]},{"ID":"20241027151405-quzl91n","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241027151405-quzl91n","updated":"20241027151405"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Configuration\n@EnableConfigurationProperties(MyAppProperties.class)\npublic class MyAppConfig {\n    // other configurations\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241027151405-26k8xy5","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20241027151405-26k8xy5","updated":"20241027151405"},"Children":[{"ID":"20241027151405-scktm7o","Type":"NodeParagraph","Properties":{"id":"20241027151405-scktm7o","updated":"20241027151405"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"验证"},{"Type":"NodeText","Data":"：\n可以使用 JSR-303/349 bean 验证注解来校验配置参数，例如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@NotNull"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Min"},{"Type":"NodeText","Data":"​，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"@Max"},{"Type":"NodeText","Data":"​ 等。"}]},{"ID":"20241027151405-g93ezdx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241027151405-g93ezdx","updated":"20241027151405"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"@Component\n@ConfigurationProperties(prefix = \"myapp\")\n@Validated\npublic class MyAppProperties {\n    @NotNull\n    private String name;\n\n    @Min(1)\n    @Max(60)\n    private int timeout;\n\n    // getters and setters\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241027151405-peazhpy","Type":"NodeParagraph","Properties":{"id":"20241027151405-peazhpy","updated":"20241027151405"},"Children":[{"Type":"NodeText","Data":"这种配置方式极大地提高了应用程序的可配置性和可维护性，同时使得配置参数的管理更加直观和类型安全。"}]},{"ID":"20241027153230-0ljiydq","Type":"NodeParagraph","Properties":{"id":"20241027153230-0ljiydq","updated":"20241027153230"}},{"ID":"20241027153550-yh0z4l3","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241027153550-yh0z4l3","updated":"20241027153622"},"Children":[{"Type":"NodeText","Data":"简单的例子"}]},{"ID":"20241027153622-bhilubf","Type":"NodeParagraph","Properties":{"id":"20241027153622-bhilubf","updated":"20241027153622"},"Children":[{"Type":"NodeText","Data":"当然可以！下面是一个使用 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"application.yml"},{"Type":"NodeText","Data":"​ 配置文件和相应的属性类的完整示例。"}]},{"ID":"20241027153622-eckn2ya","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241027153622-eckn2ya","updated":"20241027153622"},"Children":[{"Type":"NodeText","Data":"1. application.yml"}]},{"ID":"20241027153622-thjy754","Type":"NodeParagraph","Properties":{"id":"20241027153622-thjy754","updated":"20241027153622"},"Children":[{"Type":"NodeText","Data":"假设我们有一个应用程序，想要配置一下数据库的连接信息和应用的名称，我们可以在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"application.yml"},{"Type":"NodeText","Data":"​ 文件中写入："}]},{"ID":"20241027153622-5259wl3","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241027153622-5259wl3","updated":"20241027153622"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"eWFtbA=="},{"Type":"NodeCodeBlockCode","Data":"myapp:\n  name: MyApplication\n  database:\n    url: jdbc:mysql://localhost:3306/mydb\n    username: root\n    password: secret\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241027153622-cectvxo","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241027153622-cectvxo","updated":"20241027153622"},"Children":[{"Type":"NodeText","Data":"2. 属性类"}]},{"ID":"20241027153622-ll0vig9","Type":"NodeParagraph","Properties":{"id":"20241027153622-ll0vig9","updated":"20241027153622"},"Children":[{"Type":"NodeText","Data":"接下来，我们在代码中创建一个对应的属性类，用于映射上述配置："}]},{"ID":"20241027153622-2b41045","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241027153622-2b41045","updated":"20241027153622"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"import org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.stereotype.Component;\nimport javax.validation.constraints.NotNull;\n\n@Component\n@ConfigurationProperties(prefix = \"myapp\")\npublic class MyAppProperties {\n\n    @NotNull\n    private String name;\n\n    private DatabaseProperties database = new DatabaseProperties();\n\n    public static class DatabaseProperties {\n        private String url;\n        private String username;\n        private String password;\n\n        // Getters and setters\n        public String getUrl() {\n            return url;\n        }\n\n        public void setUrl(String url) {\n            this.url = url;\n        }\n\n        public String getUsername() {\n            return username;\n        }\n\n        public void setUsername(String username) {\n            this.username = username;\n        }\n\n        public String getPassword() {\n            return password;\n        }\n\n        public void setPassword(String password) {\n            this.password = password;\n        }\n    }\n\n    // Getters and setters\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public DatabaseProperties getDatabase() {\n        return database;\n    }\n\n    public void setDatabase(DatabaseProperties database) {\n        this.database = database;\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241027153622-35y4p4b","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241027153622-35y4p4b","updated":"20241027153622"},"Children":[{"Type":"NodeText","Data":"3. 使用属性类"}]},{"ID":"20241027153622-cejradq","Type":"NodeParagraph","Properties":{"id":"20241027153622-cejradq","updated":"20241027153622"},"Children":[{"Type":"NodeText","Data":"在你的应用中，你可以通过依赖注入的方式使用这些配置属性："}]},{"ID":"20241027153622-2mi3271","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241027153622-2mi3271","updated":"20241027153622"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class MyService {\n\n    private final MyAppProperties properties;\n\n    @Autowired\n    public MyService(MyAppProperties properties) {\n        this.properties = properties;\n    }\n\n    public void printConfig() {\n        System.out.println(\"Application Name: \" + properties.getName());\n        System.out.println(\"Database URL: \" + properties.getDatabase().getUrl());\n        System.out.println(\"Database Username: \" + properties.getDatabase().getUsername());\n        // It's usually a bad idea to print passwords, but just for demonstration.\n        System.out.println(\"Database Password: \" + properties.getDatabase().getPassword());\n    }\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241027153622-0y8zifk","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241027153622-0y8zifk","updated":"20241027153646"},"Children":[{"Type":"NodeText","Data":"总结"}]},{"ID":"20241027153622-ppsfe9e","Type":"NodeParagraph","Properties":{"id":"20241027153622-ppsfe9e","updated":"20241027153622"},"Children":[{"Type":"NodeText","Data":"在这个示例中，"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"application.yml"},{"Type":"NodeText","Data":"​ 中的配置被自动绑定到 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"MyAppProperties"},{"Type":"NodeText","Data":"​ 类的实例中，并且可以通过依赖注入轻松地访问和使用。这样你就可以在应用程序的不同部分使用这些配置信息，保持代码的干净和可维护性，也可以通过配置替换来轻松改变应用行为。"}]},{"ID":"20241027153641-54tyrvm","Type":"NodeParagraph","Properties":{"id":"20241027153641-54tyrvm","updated":"20241027153641"}},{"ID":"20241027153646-t52wr7v","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20241027153646-t52wr7v","updated":"20241031162627"},"Children":[{"Type":"NodeText","Data":"苍穹外卖的例子"}]},{"ID":"20241031162628-fg2xerh","Type":"NodeParagraph","Properties":{"id":"20241031162628-fg2xerh","updated":"20241031162628"},"Children":[{"Type":"NodeText","Data":"在项目中可以看到"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"properties"},{"Type":"NodeText","Data":"​包，里面放着的就是SpringBoot相关的配置属性类："}]},{"ID":"20241031162628-ba275us","Type":"NodeParagraph","Properties":{"id":"20241031162628-ba275us","updated":"20241031162628"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241031162536-5my5mtu.png"},{"Type":"NodeLinkSpace"},{"Type":"NodeLinkTitle","Data":"配置文件属性类"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241031162627-f23hk9f","Type":"NodeParagraph","Properties":{"id":"20241031162627-f23hk9f","updated":"20241031162627"},"Children":[{"Type":"NodeText","Data":"配置属性类是"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"JwtProperties"},{"Type":"NodeText","Data":"​："}]},{"ID":"20241027153958-08kc8fe","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241027153958-08kc8fe","updated":"20241027154002"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"import lombok.Data;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.stereotype.Component;\n\n@Component\n@ConfigurationProperties(prefix = \"sky.jwt\")\n@Data\npublic class JwtProperties {\n\n    /**\n     * 管理端员工生成jwt令牌相关配置\n     */\n    private String adminSecretKey;\n    private long adminTtl;\n    private String adminTokenName;\n\n    /**\n     * 用户端微信用户生成jwt令牌相关配置\n     */\n    private String userSecretKey;\n    private long userTtl;\n    private String userTokenName;\n\n}\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241027154019-22sfpc9","Type":"NodeParagraph","Properties":{"id":"20241027154019-22sfpc9","updated":"20241027154054"},"Children":[{"Type":"NodeText","Data":"在"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"application.yml"},{"Type":"NodeText","Data":"​中，对应的部分："}]},{"ID":"20241027154054-kz151ha","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241027154054-kz151ha","updated":"20241027154111"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"eW1s"},{"Type":"NodeCodeBlockCode","Data":"sky:\n  jwt:\n    # 设置jwt签名加密时使用的秘钥\n    admin-secret-key: itcast\n    # 设置jwt过期时间\n    admin-ttl: 7200000\n    # 设置前端传递过来的令牌名称\n    admin-token-name: token\n    user-secret-key: itheima\n    user-ttl: 7200000\n    user-token-name: authentication\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241027154127-omuzo16","Type":"NodeParagraph","Properties":{"id":"20241027154127-omuzo16","updated":"20241027154243"},"Children":[{"Type":"NodeText","Data":"然后我们在Controller中就可以直接注入"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"jwtProperties"},{"Type":"NodeText","Data":"​对象然后使用了，例如在"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"EmployeeController"},{"Type":"NodeText","Data":"​中："}]},{"ID":"20241027154256-uvsm48g","Type":"NodeParagraph","Properties":{"id":"20241027154256-uvsm48g","updated":"20241027154256"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Properties":{"style":"width: 617px;"},"Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20241027154256-jq5el8k.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeKramdownSpanIAL","Data":"{: style=\"width: 617px;\"}"},{"Type":"NodeText","Data":"​"}]},{"ID":"20241027154300-vkf2wrf","Type":"NodeParagraph","Properties":{"id":"20241027154300-vkf2wrf","updated":"20241027154322"},"Children":[{"Type":"NodeText","Data":"使用："}]},{"ID":"20241027154322-gg6qff5","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241027154322-gg6qff5","updated":"20241027154404"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"amF2YQ=="},{"Type":"NodeCodeBlockCode","Data":"/**\n     * 登录\n     *\n     * @param employeeLoginDTO\n     * @return\n     */\n    @PostMapping(\"/login\")\n    @ApiOperation(value = \"员工登录\")\n    public Result\u003cEmployeeLoginVO\u003e login(@RequestBody EmployeeLoginDTO employeeLoginDTO) {\n        log.info(\"员工登录：{}\", employeeLoginDTO);\n\n        Employee employee = employeeService.login(employeeLoginDTO);\n\n        //登录成功后，生成jwt令牌\n        Map\u003cString, Object\u003e claims = new HashMap\u003c\u003e();\n        claims.put(JwtClaimsConstant.EMP_ID, employee.getId());\n        String token = JwtUtil.createJWT(\n                jwtProperties.getAdminSecretKey(), // 从配置文件中拿到属性\n                jwtProperties.getAdminTtl(),       // 从配置文件中拿到属性\n                claims);\n\n        EmployeeLoginVO employeeLoginVO = EmployeeLoginVO.builder()\n                .id(employee.getId())\n                .userName(employee.getUsername())\n                .name(employee.getName())\n                .token(token)\n                .build();\n\n        return Result.success(employeeLoginVO);\n    }\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241027154540-e38y05g","Type":"NodeParagraph","Properties":{"id":"20241027154540-e38y05g","updated":"20241027154540"}}]}